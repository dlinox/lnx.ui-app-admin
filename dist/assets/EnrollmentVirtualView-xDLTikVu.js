import{d as x,aD as j,a9 as $,ad as q,ae as _,aa as y,h as H,r as n,aJ as J,aG as T,_ as E,af as S,ac as i,aK as K,ab as c,aH as Q,a3 as X,a8 as Y,aB as Z}from"./index-BOyx2DGO.js";import{d as ee,e as te,i as ae}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-CzAZkrsj.js";import{i as G}from"./DataTable.types-BEg5m_To.js";import{a as oe}from"./selectables.services-C_NjbCfl.js";import"./studentType.services-Dv6g504T.js";import"./student.services-AZcb6zHl.js";import"./documentType.services-CuAw_OVC.js";import{u as ne}from"./period.stores-BRXwuw8f.js";import{d as V}from"./debounce.utils-DqPPCsFD.js";import{_ as le,a as se}from"./Col-Ddh-mtwO.js";import{_ as re}from"./Select-CP6PIrTl.js";import{_ as ie}from"./Input-CA42N3nM.js";import{_ as ue}from"./DataTable-CHe9vRd_.js";import"./icon.utils-BZ_5fGn6.js";import"./Alert-DWB3U6zN.js";import"./FormItem-BNNBpqpK.js";import"./get-BgSbcy5X.js";import"./ListItem-Dxt3JRC8.js";import"./Thing-BxYJ11Ic.js";import"./Tag-DM5krFKW.js";import"./Space-Bq9hZ6L8.js";import"./composables-C-nEvORv.js";import"./Dropdown-DquLRH-c.js";import"./Popover-C3xoDLDW.js";import"./use-merged-state-PebSr71T.js";import"./Suffix-3kzIsxrs.js";import"./Tooltip-C1e_98yG.js";const pe=x({__name:"DataTableOp",props:{item:{}},emits:["openForm","success"],setup(o,{emit:u}){const a=u,p=ne(),l=async()=>{};return j(()=>{l()}),(m,e)=>{var s;return((s=_(p).enrollment)==null?void 0:s.period)==m.item.period?(y(),$(ee,{key:0,item:m.item,onResetEnrollment:e[0]||(e[0]=r=>a("openForm",r)),onChangeGroup:e[1]||(e[1]=r=>a("openForm",r)),onReserveEnrollment:e[2]||(e[2]=r=>a("success")),onCancelEnrollment:e[3]||(e[3]=r=>a("success"))},null,8,["item"])):q("",!0)}}}),ce=(o,u)=>[{title:"Ops.",key:"ops",width:"100px",fixed:"left",render(a){const p=a;return H(pe,{onOpenForm:()=>o(p),onSuccess:()=>u(),item:p},{default:()=>"Editar"})}},{title:"Período",key:"period",minWidth:"120"},{title:"Estudiante",key:"group-student",children:[{title:"Nombre",key:"student",minWidth:"250px"},{title:"Estado de mat.",key:"enrollmentStatus",minWidth:"150px"}]},{title:"Grupo",key:"group-group",children:[{title:"Módulo",key:"module",minWidth:"200px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Grupo",key:"group",minWidth:"100px"},{title:"Modalidad",key:"modality",minWidth:"100px"}]}],me=(o=G())=>({page:o.page,total:o.total,pageSize:o.pageSize,pageCount:o.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${o.total} registros`}}),de={style:{"border-bottom":"1px solid #e9e9e9"}},_e=x({__name:"DataTable",setup(o){const u=n(!1),a=n(!1),p=n([]),l=n(!1),m=n([]),e=J({...G()}),s=n({search:null,page:e.page,pageSize:e.pageSize,filters:{periodId:null}}),r=n({}),b=n(null),k=n(null),w=n(null),I=n(null),z=n(!1),D=t=>{b.value=t.courseId,w.value=t.studentId,I.value=t.curriculumId,k.value=t,z.value=t.isSpecial,u.value=!0},g=async()=>{s.value.page=1,await f()},M=ce(D,g),C=async t=>{a.value=!0,p.value=await oe(t),a.value=!1},N=V(t=>{C(t)},400),f=async()=>{l.value=!0,r.value=await ae(s.value),m.value=r.value.data,e.total=r.value.total,e.pageSize=r.value.per_page,e.page=r.value.current_page,e.pageCount=r.value.last_page,l.value=!1},B=V(()=>{g()},400),W=async t=>{s.value.page=t,await f()},A=async t=>{s.value.page=1,s.value.pageSize=t,await f()},R=async()=>{await C(""),await f()},U=n(t=>(console.log("Row Class Name",t.enrollmentModality),t.enrollmentModality=="VIRTUAL"?"enrollment-virtual":""));return R(),(t,d)=>{const F=re,h=se,O=ie,P=le,L=ue;return y(),T(E,null,[S("div",de,[i(P,{gutter:12,class:"p-4 flex justify-between"},{default:c(()=>[i(h,{span:6},{default:c(()=>[i(F,{value:s.value.filters.periodId,"onUpdate:value":[d[0]||(d[0]=v=>s.value.filters.periodId=v),g],placeholder:"Seleccionar Periodo Académico",filterable:"",options:p.value,loading:a.value,clearable:"",remote:"",size:"large","virtual-scroll":!1,onSearch:_(N)},null,8,["value","options","loading","onSearch"])]),_:1}),i(h,{span:12},{default:c(()=>[i(O,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":d[1]||(d[1]=v=>s.value.search=v),onInput:_(B),clearable:""},{suffix:c(()=>[i(Q,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),i(P,null,{default:c(()=>[i(h,{span:24},{default:c(()=>[i(L,{key:"id",remote:"",size:"small","row-class-name":U.value,"single-line":!1,columns:_(M),data:m.value,pagination:_(me)(e),"pagination-show-size-picker":!0,loading:l.value,"onUpdate:page":W,"onUpdate:pageSize":A},null,8,["row-class-name","columns","data","pagination","loading"])]),_:1})]),_:1}),K(t.$slots,"extra",{reLoadDataTable:g},void 0,!0)]),i(te,{modelValue:u.value,"onUpdate:modelValue":d[2]||(d[2]=v=>u.value=v),studentId:w.value,curriculumId:I.value,courseId:b.value,isSpecial:z.value,enrollmetGroup:k.value,onSuccess:g},null,8,["modelValue","studentId","curriculumId","courseId","isSpecial","enrollmetGroup"])],64)}}}),ge=(o,u)=>{const a=o.__vccOpts||o;for(const[p,l]of u)a[p]=l;return a},ve=ge(_e,[["__scopeId","data-v-21b44676"]]),Le=x({__name:"EnrollmentVirtualView",setup(o){const{hasPermission:u}=X();return(async()=>{})(),(p,l)=>{const m=Z,e=Y("AppNotAuthorization");return _(u)(["enrollment.edit"])?(y(),T(E,{key:0},[i(m,{segmented:{header:!0,content:!0}},{header:c(()=>l[0]||(l[0]=[S("span",{class:"text-sm text-slate-500"}," Gestión de matrículas ",-1),S("h5",{class:"text-lg font-bold text-slate-800"},"Matrículas",-1)])),"header-extra":c(()=>l[1]||(l[1]=[])),_:1}),i(ve)],64)):(y(),$(e,{key:1}))}}});export{Le as default};
