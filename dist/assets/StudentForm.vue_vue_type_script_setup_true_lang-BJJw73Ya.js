import{G}from"./genders.constans-BK559Fh_.js";import{u as O}from"./useBreakpoints-Dkt6LK3U.js";import{d as S,e as A,f as j,g as x,h as H}from"./student.services-Bq67KpZc.js";import{d as L,e as P,r as _,j as q,aL as J,a8 as K,a9 as Q,aa as l,ab as a,aA as W,ad as p,w as y,af as X,az as U,aH as Y}from"./index-BA0H_JCl.js";import{_ as Z}from"./Select-DtHdO6pL.js";import{_ as ee,a as ae}from"./FormItem-BNivClae.js";import{_ as le,a as te}from"./Col-cTRCMRiH.js";import{_ as ne}from"./Input-CZ0NJzi4.js";import{_ as ue}from"./Space-ByIL93Yx.js";import{_ as oe}from"./Switch-De4fbpOJ.js";const ce=L({__name:"StudentForm",props:{item:{},modelValue:{type:Boolean},selectables:{}},emits:["update:modelValue","success"],setup(E,{emit:R}){const k=R,c=E,{screenSize:i}=O(),f=P({get:()=>c.modelValue,set:r=>k("update:modelValue",r)}),b=_(!1),g=_(null),t=_(S()),u=_(null),$=_({...A()}),w=async()=>{if(g.value){const r=await g.value.validate();let e=null;r?(b.value=!0,t.value.id?e=await j(t.value):e=await x(t.value),e.status?(k("success",t.value),f.value=!1):u.value=e.data):console.log("Formulario inválido")}b.value=!1},M=async()=>{var r;return(r=c.item)!=null&&r.id?t.value=await H(c.item.id):t.value=S(),t.value},V=async()=>{console.log("Inicializando formulario"),await M()};return q(f,r=>{r&&V()}),(r,e)=>{const N=Z,d=ae,m=te,v=ne,h=oe,T=ue,z=le,B=ee,F=X,C=W,D=Y,I=J("upper-case");return Q(),K(D,{show:f.value,"onUpdate:show":e[17]||(e[17]=n=>f.value=n)},{default:l(()=>[a(C,{style:{width:"1024px"},title:r.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:l(()=>[a(T,{justify:"end"},{default:l(()=>[a(F,{tertiary:"",size:"large",onClick:e[16]||(e[16]=n=>f.value=!1),disabled:b.value},{default:l(()=>e[18]||(e[18]=[U(" Cancelar ")])),_:1},8,["disabled"]),a(F,{size:"large",type:"primary",onClick:w,loading:b.value},{default:l(()=>e[19]||(e[19]=[U("Guardar")])),_:1},8,["loading"])]),_:1})]),default:l(()=>[a(B,{ref_key:"formRef",ref:g,model:t.value,rules:$.value,size:"large",onSubmit:w},{default:l(()=>[a(z,{gutter:16},{default:l(()=>[a(m,{span:p(i)==="sm"?12:8},{default:l(()=>[a(d,{path:"studentTypeId",label:"Tipo de Estudiante"},{default:l(()=>[a(N,{value:t.value.studentTypeId,"onUpdate:value":e[0]||(e[0]=n=>t.value.studentTypeId=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:r.selectables.studentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>[a(d,{path:"documentTypeId",label:"Tipo de Documento"},{default:l(()=>[a(N,{value:t.value.documentTypeId,"onUpdate:value":e[1]||(e[1]=n=>t.value.documentTypeId=n),clearable:"","virtual-scroll":!1,placeholder:"Seleccione",options:r.selectables.documentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>{var n;return[a(d,{path:"documentNumber",label:"Número de Documento",feedback:(n=u.value)==null?void 0:n.documentNumber},{default:l(()=>{var o;return[a(v,{value:t.value.documentNumber,"onUpdate:value":e[2]||(e[2]=s=>t.value.documentNumber=s),status:((o=u.value)==null?void 0:o.documentNumber)!=null?"error":"",onInput:e[3]||(e[3]=s=>u.value!=null?u.value.documentNumber=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?24:8},{default:l(()=>{var n;return[a(d,{path:"name",label:"Nombre",feedback:(n=u.value)==null?void 0:n.name},{default:l(()=>{var o;return[y(a(v,{status:((o=u.value)==null?void 0:o.name)!=null?"error":"",value:t.value.name,"onUpdate:value":e[4]||(e[4]=s=>t.value.name=s),onInput:e[5]||(e[5]=s=>u.value!=null?u.value.name=null:()=>{})},null,8,["status","value"]),[[I]])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>{var n;return[a(d,{path:"lastNameFather",label:"Apellido Paterno",feedback:(n=u.value)==null?void 0:n.lastNameFather},{default:l(()=>{var o;return[y(a(v,{status:((o=u.value)==null?void 0:o.lastNameFather)!=null?"error":"",value:t.value.lastNameFather,"onUpdate:value":e[6]||(e[6]=s=>t.value.lastNameFather=s),onInput:e[7]||(e[7]=s=>u.value!=null?u.value.lastNameFather=null:()=>{})},null,8,["status","value"]),[[I]])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>{var n;return[a(d,{path:"lastNameMother",label:"Apellido Materno",feedback:(n=u.value)==null?void 0:n.lastNameMother},{default:l(()=>{var o;return[y(a(v,{status:((o=u.value)==null?void 0:o.lastNameMother)!=null?"error":"",value:t.value.lastNameMother,"onUpdate:value":e[8]||(e[8]=s=>t.value.lastNameMother=s),onInput:e[9]||(e[9]=s=>u.value!=null?u.value.lastNameMother=null:()=>{})},null,8,["status","value"]),[[I]])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>[a(d,{path:"gender",label:"Genero"},{default:l(()=>[a(N,{value:t.value.gender,"onUpdate:value":e[10]||(e[10]=n=>t.value.gender=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:p(G)},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>[a(d,{path:"birthDate",label:"Fecha de Nacimiento"},{default:l(()=>[a(v,{value:t.value.dateOfBirth,"onUpdate:value":e[11]||(e[11]=n=>t.value.dateOfBirth=n),type:"date",clearable:"",placeholder:""},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>{var n;return[a(d,{path:"email",feedback:(n=u.value)==null?void 0:n.email,label:"Correo Electrónico"},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.email)!=null?"error":"",onInput:e[12]||(e[12]=s=>u.value!=null?u.value.email=null:()=>{}),value:t.value.email,"onUpdate:value":e[13]||(e[13]=s=>t.value.email=s)},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>[a(d,{path:"phone",label:"Teléfono"},{default:l(()=>[a(v,{value:t.value.phone,"onUpdate:value":e[14]||(e[14]=n=>t.value.phone=n)},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(m,{span:"24"},{default:l(()=>[a(T,{justify:"end"},{default:l(()=>[a(d,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:l(()=>[a(h,{value:t.value.isEnabled,"onUpdate:value":e[15]||(e[15]=n=>t.value.isEnabled=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}});export{ce as _};
