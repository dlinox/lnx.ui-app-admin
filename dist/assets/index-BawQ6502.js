import{d as fe,_ as Te}from"./debounce.utils-rmPTix7t.js";import{_ as je,a as Fe,b as Me,c as Le}from"./selectables.services-BEnv0PEh.js";import{r as ue}from"./icon.utils-DnuXdNV1.js";import{u as Ne}from"./useBreakpoints-CGGSJYYs.js";import{d as M,h as v,z as O,U as Se,x as F,A as K,B as Z,u as ge,am as He,p as xe,an as Ge,f as ve,c as Ke,a as qe,ao as We,P as Je,i as _e,D as oe,ap as Qe,r as P,G as ee,e as H,I as Ye,ac as N,aq as Ve,ar as Ce,as as de,at as ce,a0 as Ze,R as Q,K as pe,au as Xe,av as et,aw as Pe,ax as tt,aj as re,g as he,a7 as L,a3 as Y,a4 as i,a8 as a,ab as G,ag as ne,ay as $e,a9 as $,Z as le,ae as ye,ad as Re,ah as be,af as at,ai as nt,aa as lt}from"./index-Bqe-vxMq.js";import{g as ot,d as rt,b as st,a as se,c as ie,e as Ue,i as Be,_ as it}from"./DataTable.types-C3XSPyHT.js";import{_ as ut}from"./Divider-2qeRHmQi.js";import{A as dt,a as ct,u as pt,_ as mt}from"./composables-B9b5AZp0.js";import{_ as ft}from"./TimePicker-BK9u6xhF.js";import{a as gt,_ as Ae}from"./FormItem-BBmdDte0.js";import{i as vt,_ as X,u as _t}from"./Input-yPERYFUO.js";import{u as ht}from"./get-C8gX6CwU.js";import{A as ke}from"./Add-DUQ_pCkh.js";import{R as yt}from"./Remove-DsEDqNmj.js";import{a as bt}from"./LnxIcon.vue_vue_type_script_setup_true_lang-tM4SdBca.js";import"./Forward-DN8GWHg-.js";import"./use-keyboard-BPlN3GQF.js";const It=M({name:"ArrowUp",render(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},v("g",{fill:"none"},v("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),C="0!important",De="-1px!important";function W(e){return K(`${e}-type`,[F("& +",[O("button",{},[K(`${e}-type`,[Z("border",{borderLeftWidth:C}),Z("state-border",{left:De})])])])])}function J(e){return K(`${e}-type`,[F("& +",[O("button",[K(`${e}-type`,[Z("border",{borderTopWidth:C}),Z("state-border",{top:De})])])])])}const wt=O("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Se("vertical",{flexDirection:"row"},[Se("rtl",[O("button",[F("&:first-child:not(:last-child)",`
 margin-right: ${C};
 border-top-right-radius: ${C};
 border-bottom-right-radius: ${C};
 `),F("&:last-child:not(:first-child)",`
 margin-left: ${C};
 border-top-left-radius: ${C};
 border-bottom-left-radius: ${C};
 `),F("&:not(:first-child):not(:last-child)",`
 margin-left: ${C};
 margin-right: ${C};
 border-radius: ${C};
 `),W("default"),K("ghost",[W("primary"),W("info"),W("success"),W("warning"),W("error")])])])]),K("vertical",{flexDirection:"column"},[O("button",[F("&:first-child:not(:last-child)",`
 margin-bottom: ${C};
 margin-left: ${C};
 margin-right: ${C};
 border-bottom-left-radius: ${C};
 border-bottom-right-radius: ${C};
 `),F("&:last-child:not(:first-child)",`
 margin-top: ${C};
 margin-left: ${C};
 margin-right: ${C};
 border-top-left-radius: ${C};
 border-top-right-radius: ${C};
 `),F("&:not(:first-child):not(:last-child)",`
 margin: ${C};
 border-radius: ${C};
 `),J("default"),K("ghost",[J("primary"),J("info"),J("success"),J("warning"),J("error")])])])]),St={size:{type:String,default:void 0},vertical:Boolean},Ee=M({name:"ButtonGroup",props:St,setup(e){const{mergedClsPrefixRef:o,mergedRtlRef:m}=ge(e);return He("-button-group",wt,o),xe(Ge,e),{rtlEnabled:ve("ButtonGroup",m,o),mergedClsPrefix:o}},render(){const{mergedClsPrefix:e}=this;return v("div",{class:[`${e}-button-group`,this.rtlEnabled&&`${e}-button-group--rtl`,this.vertical&&`${e}-button-group--vertical`],role:"group"},this.$slots)}}),Vt={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"};function Ct(){return Vt}const Pt=Ke({name:"DynamicInput",common:qe,peers:{Input:vt,Button:We},self:Ct}),Ie=Je("n-dynamic-input"),$t=M({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:o}=_e(Ie);return{mergedTheme:e,placeholder:o}},render(){const{mergedTheme:e,placeholder:o,value:m,clsPrefix:n,onUpdateValue:d,disabled:p}=this;return v("div",{class:`${n}-dynamic-input-preset-input`},v(X,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:m,placeholder:o,onUpdateValue:d,disabled:p}))}}),kt=M({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:o,keyPlaceholderRef:m,valuePlaceholderRef:n}=_e(Ie);return{mergedTheme:o,keyPlaceholder:m,valuePlaceholder:n,handleKeyInput(d){e.onUpdateValue({key:d,value:e.value.value})},handleValueInput(d){e.onUpdateValue({key:e.value.key,value:d})}}},render(){const{mergedTheme:e,keyPlaceholder:o,valuePlaceholder:m,value:n,clsPrefix:d,disabled:p}=this;return v("div",{class:`${d}-dynamic-input-preset-pair`},v(X,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:n.key,class:`${d}-dynamic-input-pair-input`,placeholder:o,onUpdateValue:this.handleKeyInput,disabled:p}),v(X,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:n.value,class:`${d}-dynamic-input-pair-input`,placeholder:m,onUpdateValue:this.handleValueInput,disabled:p}))}}),xt=O("dynamic-input",{width:"100%"},[O("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[O("dynamic-input-preset-input",{flex:1,alignItems:"center"}),O("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[O("dynamic-input-pair-input",[F("&:first-child",{"margin-right":"12px"})])]),Z("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[K("icon",{cursor:"pointer"})]),F("&:last-child",{marginBottom:0})]),O("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[O("form-item-blank",{paddingTop:"0 !important"})])]),te=new WeakMap,Rt=Object.assign(Object.assign({},oe.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Ut=M({name:"DynamicInput",props:Rt,setup(e,{slots:o}){const{mergedComponentPropsRef:m,mergedClsPrefixRef:n,mergedRtlRef:d,inlineThemeDisabled:p}=ge(),r=_e(Qe,null),y=P(e.defaultValue),b=ee(e,"value"),g=ht(b,y),x=oe("DynamicInput","-dynamic-input",xt,Pt,e,n),_=H(()=>{const{value:t}=g;if(Array.isArray(t)){const{max:l}=e;return l!==void 0&&t.length>=l}return!1}),E=H(()=>{const{value:t}=g;return Array.isArray(t)?t.length<=e.min:!0}),U=H(()=>{var t,l;return(l=(t=m==null?void 0:m.value)===null||t===void 0?void 0:t.DynamicInput)===null||l===void 0?void 0:l.buttonSize});function V(t){const{onInput:l,"onUpdate:value":S,onUpdateValue:u}=e;l&&pe(l,t),S&&pe(S,t),u&&pe(u,t),y.value=t}function I(t,l){if(t==null||typeof t!="object")return l;const S=de(t)?ce(t):t;let u=te.get(S);return u===void 0&&te.set(S,u=Ze()),u}function h(t,l){const{value:S}=g,u=Array.from(S??[]),R=u[t];if(u[t]=l,R&&l&&typeof R=="object"&&typeof l=="object"){const j=de(R)?ce(R):R,q=de(l)?ce(l):l,w=te.get(j);w!==void 0&&te.set(q,w)}V(u)}function B(){f(-1)}function f(t){const{value:l}=g,{onCreate:S}=e,u=Array.from(l??[]);if(S)u.splice(t+1,0,S(t+1)),V(u);else if(o.default)u.splice(t+1,0,null),V(u);else switch(e.preset){case"input":u.splice(t+1,0,""),V(u);break;case"pair":u.splice(t+1,0,{key:"",value:""}),V(u);break}}function s(t){const{value:l}=g;if(!Array.isArray(l))return;const{min:S}=e;if(l.length<=S)return;const{onRemove:u}=e;u&&u(t);const R=Array.from(l);R.splice(t,1),V(R)}function c(t,l,S){if(l<0||S<0||l>=t.length||S>=t.length||l===S)return;const u=t[l];t[l]=t[S],t[S]=u}function k(t,l){const{value:S}=g;if(!Array.isArray(S))return;const u=Array.from(S);t==="up"&&c(u,l,l-1),t==="down"&&c(u,l,l+1),V(u)}xe(Ie,{mergedThemeRef:x,keyPlaceholderRef:ee(e,"keyPlaceholder"),valuePlaceholderRef:ee(e,"valuePlaceholder"),placeholderRef:ee(e,"placeholder")});const z=ve("DynamicInput",d,n),T=H(()=>{const{self:{actionMargin:t,actionMarginRtl:l}}=x.value;return{"--action-margin":t,"--action-margin-rtl":l}}),A=p?Ye("dynamic-input",void 0,T,e):void 0;return{locale:_t("DynamicInput").localeRef,rtlEnabled:z,buttonSize:U,mergedClsPrefix:n,NFormItem:r,uncontrolledValue:y,mergedValue:g,insertionDisabled:_,removeDisabled:E,handleCreateClick:B,ensureKey:I,handleValueChange:h,remove:s,move:k,createItem:f,mergedTheme:x,cssVars:p?void 0:T,themeClass:A==null?void 0:A.themeClass,onRender:A==null?void 0:A.onRender}},render(){const{$slots:e,itemClass:o,buttonSize:m,mergedClsPrefix:n,mergedValue:d,locale:p,mergedTheme:r,keyField:y,itemStyle:b,preset:g,showSortButton:x,NFormItem:_,ensureKey:E,handleValueChange:U,remove:V,createItem:I,move:h,onRender:B,disabled:f}=this;return B==null||B(),v("div",{class:[`${n}-dynamic-input`,this.rtlEnabled&&`${n}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(d)||d.length===0?v(N,Object.assign({block:!0,ghost:!0,dashed:!0,size:m},this.createButtonProps,{disabled:this.insertionDisabled||f,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>Ve(e["create-button-default"],()=>[p.create]),icon:()=>Ve(e["create-button-icon"],()=>[v(Q,{clsPrefix:n},{default:()=>v(ke,null)})])}):d.map((s,c)=>v("div",{key:y?s[y]:E(s,c),"data-key":y?s[y]:E(s,c),class:[`${n}-dynamic-input-item`,o],style:b},Ce(e.default,{value:d[c],index:c},()=>[g==="input"?v($t,{disabled:f,clsPrefix:n,value:d[c],parentPath:_?_.path.value:void 0,path:_!=null&&_.path.value?`${_.path.value}[${c}]`:void 0,onUpdateValue:k=>{U(c,k)}}):g==="pair"?v(kt,{disabled:f,clsPrefix:n,value:d[c],parentPath:_?_.path.value:void 0,path:_!=null&&_.path.value?`${_.path.value}[${c}]`:void 0,onUpdateValue:k=>{U(c,k)}}):null]),Ce(e.action,{value:d[c],index:c,create:I,remove:V,move:h},()=>[v("div",{class:`${n}-dynamic-input-item__action`},v(Ee,{size:m},{default:()=>[v(N,{disabled:this.removeDisabled||f,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,circle:!0,onClick:()=>{V(c)}},{icon:()=>v(Q,{clsPrefix:n},{default:()=>v(yt,null)})}),v(N,{disabled:this.insertionDisabled||f,circle:!0,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,onClick:()=>{I(c)}},{icon:()=>v(Q,{clsPrefix:n},{default:()=>v(ke,null)})}),x?v(N,{disabled:c===0||f,circle:!0,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,onClick:()=>{h("up",c)}},{icon:()=>v(Q,{clsPrefix:n},{default:()=>v(It,null)})}):null,x?v(N,{disabled:c===d.length-1||f,circle:!0,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,onClick:()=>{h("down",c)}},{icon:()=>v(Q,{clsPrefix:n},{default:()=>v(dt,null)})}):null]}))]))))}}),Bt={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};function At(){return Bt}const Dt={name:"Flex",self:At},Et=Object.assign(Object.assign({},oe.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),Ot=M({name:"Flex",props:Et,setup(e){const{mergedClsPrefixRef:o,mergedRtlRef:m}=ge(e),n=oe("Flex","-flex",void 0,Dt,e,o);return{rtlEnabled:ve("Flex",m,o),mergedClsPrefix:o,margin:H(()=>{const{size:p}=e;if(Array.isArray(p))return{horizontal:p[0],vertical:p[1]};if(typeof p=="number")return{horizontal:p,vertical:p};const{self:{[Xe("gap",p)]:r}}=n.value,{row:y,col:b}=et(r);return{horizontal:Pe(b),vertical:Pe(y)}})}},render(){const{vertical:e,reverse:o,align:m,inline:n,justify:d,margin:p,wrap:r,mergedClsPrefix:y,rtlEnabled:b}=this,g=tt(ot(this),!1);return g.length?v("div",{role:"none",class:[`${y}-flex`,b&&`${y}-flex--rtl`],style:{display:n?"inline-flex":"flex",flexDirection:e&&!o?"column":e&&o?"column-reverse":!e&&o?"row-reverse":"row",justifyContent:d,flexWrap:!r||e?"nowrap":"wrap",alignItems:m,gap:`${p.vertical}px ${p.horizontal}px`}},g):null}}),me=()=>({id:null,name:null,curriculumCourseId:null,teacherId:null,laboratoryId:null,schedules:[],modality:null,isEnabled:!0}),zt=async e=>{try{return(await re().post("/group/load-data-table",e)).data.data}catch{return rt()}},Tt=async e=>{try{return(await re().post("/group/load-form",e)).data.data}catch{return null}},jt=async(e,o,m)=>{try{return{status:!0,data:(await re().post("/group/save",{groups:e,periodId:o,curriculumCourseId:m})).data.data}}catch(n){return n.response.status===422?{status:!1,data:n.response.data.errors}:{status:!1,data:null}}},Ft=async e=>{try{return await re().delete("/group",{data:{id:e.id}}),!0}catch{return!1}},Mt=[{label:"PRESENCIAL",value:"PRESENCIAL"},{label:"VIRTUAL",value:"VIRTUAL"}],ae=[{value:"LUN",label:"LUNES"},{value:"MAR",label:"MARTES"},{value:"MIE",label:"MIÉRCOLES"},{value:"JUE",label:"JUEVES"},{value:"VIE",label:"VIERNES"},{value:"SAB",label:"SÁBADO"},{value:"DOM",label:"DOMINGO"}],Lt=M({__name:"ScheduleForm",props:{modelValue:{type:Boolean},groupSelect:{}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:o}){const m=o,n=e,d=H({get:()=>n.modelValue,set:I=>m("update:modelValue",I)}),p=P(null),r=P([]),y={startHour:{type:"number",required:!0,message:"Obligatorio",trigger:"blur"},endHour:{type:"number",required:!0,message:"Obligatorio",trigger:"blur"}},b=P([]),g=I=>{r.value.push({day:I,startHour:null,endHour:null})},x=I=>{r.value=r.value.filter(h=>h.day!==I)},_=()=>{r.value=r.value.sort((I,h)=>ae.findIndex(B=>B.value===I.day)-ae.findIndex(B=>B.value===h.day))},E=(I,h)=>{I?g(h):x(h),_()},U=()=>{var I;(I=p.value)==null||I.validate().then(h=>{h&&(m("submit",r.value,n.groupSelect.id),d.value=!1)})},V=()=>{b.value=[],r.value=[],b.value=n.groupSelect.schedules.map(I=>I.day),r.value=Object.assign([],n.groupSelect.schedules)};return he(()=>n.modelValue,I=>{I&&n.groupSelect&&(console.log("initForm"),V())}),(I,h)=>{const B=ct,f=ut,s=ft,c=Ae,k=se,z=ie,T=gt,A=N,t=st,l=ye,S=Re;return L(),Y(S,{show:d.value,"onUpdate:show":h[1]||(h[1]=u=>d.value=u)},{default:i(()=>[a(l,{style:{width:"650px"},title:"Horarios del grupo",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:i(()=>[a(t,{justify:"end"},{default:i(()=>[a(A,{onClick:h[0]||(h[0]=u=>d.value=!1)},{default:i(()=>h[3]||(h[3]=[G("Cancelar")])),_:1}),a(A,{type:"primary",onClick:U},{default:i(()=>h[4]||(h[4]=[G(" Aceptar ")])),_:1})]),_:1})]),default:i(()=>[(L(!0),ne(le,null,$e($(ae),(u,R)=>(L(),Y(B,{key:R,label:u.label,"default-checked":b.value.includes(u.value),"onUpdate:checked":j=>E(j,u.value)},null,8,["label","default-checked","onUpdate:checked"]))),128)),a(f,{dashed:"","title-placement":"left"},{default:i(()=>h[2]||(h[2]=[G(" Horarios ")])),_:1}),a(T,{ref_key:"formRef",ref:p,model:r.value},{default:i(()=>[(L(!0),ne(le,null,$e(r.value,(u,R)=>(L(),Y(z,{gutter:16,key:R},{default:i(()=>[a(k,{span:12},{default:i(()=>{var j,q;return[a(c,{label:(q=(j=$(ae))==null?void 0:j.find(w=>w.value===u.day))==null?void 0:q.label,path:`[${R}].startHour`,rule:y.startHour},{default:i(()=>[a(s,{clearable:"",value:u.startHour,"onUpdate:value":w=>u.startHour=w,format:"h:mm a",placeholder:"Seleccione la hora de inicio",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["label","path","rule"])]}),_:2},1024),a(k,{span:12},{default:i(()=>[a(c,{label:"",path:`[${R}].endHour`,rule:y.endHour},{default:i(()=>[a(s,{clearable:"",value:u.endHour,"onUpdate:value":j=>u.endHour=j,format:"h:mm a",placeholder:"Seleccione la hora de fin",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["path","rule"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),Nt={style:{width:"120px","margin-left":"1rem",display:"flex","justify-content":"space-evenly","flex-direction":"column","border-bottom":"1px dashed #f0f0f0"}},Ht=M({__name:"GroupForm",props:{modelValue:{type:Boolean},item:{},periodId:{},laboratoryOptions:{}},emits:["update:modelValue","success"],setup(e,{emit:o}){const m=pt(),n=o,d=e,{screenSize:p}=Ne(),r=H({get:()=>d.modelValue,set:f=>n("update:modelValue",f)}),y=P(!1),b=P(null),g=P(!1),x=P([]),_=P([]),E=f=>{b.value=Object.assign({},{...f}),g.value=!0},U=(f,s)=>{console.log("Actualizando horarios",f,s),_.value=_.value.map(c=>(c.id===s&&(c.schedules=f),c))},V=async()=>{console.log("Enviando formulario"),console.log(_.value),console.log(d.item),y.value=!0,(await jt(_.value,d.periodId,d.item.id)).status&&(n("success"),r.value=!1),y.value=!1},I=async({search:f=null,id:s=null})=>{x.value=await je({search:f,id:s})},h=fe(async f=>{await I({search:f})},400),B=async()=>{if(console.log("Inicializando formulario"),d.item){const f=await Tt({id:d.item.id,periodId:d.periodId});if(console.log(f),f){const s=f.map(c=>c.teacherId).filter(c=>c!=null).join(",");console.log(s),await I({id:s}),_.value=f}else _.value=[{...me()}],I({search:""})}else _.value=[{...me()}]};return he(r,f=>{f&&B()}),(f,s)=>{const c=X,k=Ae,z=se,T=Ue,A=Te,t=ie,l=N,S=Ee,u=Ut,R=Ot,j=ye,q=Re;return L(),Y(q,{show:r.value,"onUpdate:show":s[3]||(s[3]=w=>r.value=w)},{default:i(()=>[a(j,{style:{width:"1200px"},title:"Registro de grupos",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:i(()=>[a(R,{justify:"end"},{default:i(()=>[a(l,{onClick:s[1]||(s[1]=()=>r.value=!1)},{default:i(()=>s[6]||(s[6]=[G("Cancelar")])),_:1}),a(l,{type:"primary",onClick:V},{default:i(()=>s[7]||(s[7]=[G("Guardar")])),_:1})]),_:1})]),default:i(()=>[a(u,{value:_.value,"onUpdate:value":s[0]||(s[0]=w=>_.value=w),"on-create":$(me)},{"create-button-default":i(()=>s[4]||(s[4]=[G(" Nuevo grupo ")])),default:i(({value:w})=>[a(t,{gutter:"16",style:{"border-bottom":"1px dashed #f0f0f0",padding:"1rem 0"}},{default:i(()=>[a(z,{span:$(p)==="lg"?3:4},{default:i(()=>[a(k,{label:"Grupo",path:"name"},{default:i(()=>[a(c,{value:w.name,"onUpdate:value":D=>w.name=D},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),a(z,{span:$(p)==="lg"?7:10},{default:i(()=>[a(k,{label:"Docente",path:"teacher"},{default:i(()=>[a(T,{value:w.teacherId,"onUpdate:value":D=>w.teacherId=D,options:x.value,filterable:"",clearable:"",remote:"","virtual-scroll":!1,onSearch:$(h)},null,8,["value","onUpdate:value","options","onSearch"])]),_:2},1024)]),_:2},1032,["span"]),a(z,{span:$(p)=="lg"?7:10},{default:i(()=>[a(k,{label:"Laboratorio",path:"laboratory"},{default:i(()=>[a(T,{value:w.laboratoryId,"onUpdate:value":D=>w.laboratoryId=D,options:d.laboratoryOptions,filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),a(z,{span:$(p)=="lg"?4:12},{default:i(()=>[a(k,{label:"Modalidad",path:"modality"},{default:i(()=>[a(T,{value:w.modality,"onUpdate:value":D=>w.modality=D,options:$(Mt),filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),a(z,{span:$(p)=="lg"?3:12,style:{display:"flex","justify-content":"end"}},{default:i(()=>[a(k,{label:"Hablitado",path:"isEnabled"},{default:i(()=>[a(A,{value:w.isEnabled,"onUpdate:value":D=>w.isEnabled=D},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"])]),_:2},1024)]),action:i(({value:w,index:D,create:Oe,remove:we})=>[be("div",Nt,[a(l,{secondary:"",type:"primary",renderIcon:$(ue)("calendar-add"),onClick:ze=>E(w)},{default:i(()=>s[5]||(s[5]=[G(" Horarios ")])),_:2},1032,["renderIcon","onClick"]),a(S,{style:{"margin-left":"1rem"}},{default:i(()=>[a(l,{"render-icon":$(ue)("element-plus"),onClick:()=>Oe(D)},null,8,["render-icon","onClick"]),a(l,{type:"error","render-icon":$(ue)("trash"),onClick:()=>{$(m).warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:w.id?"Eliminar":"Quitar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:async()=>{w.id?await $(Ft)(w)&&we(D):we(D)}})}},null,8,["render-icon","onClick"])]),_:2},1024)])]),_:1},8,["value","on-create"]),a(Lt,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=w=>g.value=w),groupSelect:b.value,onSubmit:U},null,8,["modelValue","groupSelect"])]),_:1})]),_:1},8,["show"])}}}),Gt=e=>[{title:"Grupos",key:"ops",width:"80px",fixed:"left",render(o){const m=o;return v(N,{type:"tertiary",onClick:()=>e(m)},{default:()=>`${m.countGroups} Grupo(s) `})}},{title:"Codigo",key:"code",minWidth:"80px"},{title:"Area",key:"area",minWidth:"200px"},{title:"Modulo",key:"module",minWidth:"200px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:o=>v(it,{type:o.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>o.isEnabled?"	Habilitado":"Deshabilitado"})}],Kt=(e=Be())=>({page:e.page,total:e.total,pageSize:e.pageSize,pageCount:e.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${e.total} registros`}}),qt={style:{"border-bottom":"1px solid #e9e9e9"}},Wt=M({__name:"DataTable",props:{periodId:{},curriculumId:{}},setup(e){const o=e,m=H(()=>({periodId:o.periodId,curriculumId:o.curriculumId})),n=P(!1),d=P([]),p=P(!1),r=P(null),y=at({...Be()}),b=P({search:null,page:y.page,pageSize:y.pageSize,filters:{...m.value}}),g=P({}),x=P([]),E=Gt(s=>{r.value=s,p.value=!0}),U=async()=>{b.value.page=1,await V()},V=async()=>{n.value=!0,g.value=await zt(b.value),d.value=g.value.data,y.total=g.value.total,y.pageSize=g.value.per_page,y.page=g.value.current_page,y.pageCount=g.value.last_page,n.value=!1},I=fe(()=>{U()},400),h=async s=>{b.value.page=s,await V()},B=async s=>{b.value.page=1,b.value.pageSize=s,await V()},f=async()=>{x.value=await Fe(""),await V()};return he(m,async(s,c)=>{b.value.filters=s,await U()},{deep:!0}),f(),(s,c)=>{const k=se,z=X,T=ie,A=mt;return L(),ne(le,null,[be("div",qt,[a(T,{gutter:12,style:{padding:"12px 16px"}},{default:i(()=>[a(k,{span:12}),a(k,{span:12},{default:i(()=>[a(z,{size:"large",placeholder:"Buscar",value:b.value.search,"onUpdate:value":c[0]||(c[0]=t=>b.value.search=t),onInput:$(I),clearable:""},{suffix:i(()=>[a(bt,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),a(T,null,{default:i(()=>[a(k,{span:24},{default:i(()=>[a(A,{key:"id",remote:"","single-line":!1,columns:$(E),data:d.value,pagination:$(Kt)(y),"pagination-show-size-picker":!0,loading:n.value,"onUpdate:page":h,"onUpdate:pageSize":B},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),nt(s.$slots,"extra",{reLoadDataTable:U})]),a(Ht,{modelValue:p.value,"onUpdate:modelValue":c[1]||(c[1]=t=>p.value=t),item:r.value,periodId:s.periodId,laboratoryOptions:x.value,onSuccess:U},null,8,["modelValue","item","periodId","laboratoryOptions"])],64)}}}),pa=M({__name:"index",setup(e){const o=P(!1),m=P([]),n=async b=>{o.value=!0,m.value=await Le(b),o.value=!1},d=fe(b=>{n(b)},400),p=P([]),r=P({period:null,curriculumId:null});return(async()=>{await n(""),p.value=await Me()})(),(b,g)=>{const x=Ue,_=se,E=ie,U=ye;return L(),ne(le,null,[a(U,{segmented:{header:!0,content:!0}},{header:i(()=>g[2]||(g[2]=[be("h6",{style:{color:"#999",margin:"0"}},"Carga Académica",-1),G(" Apertura de grupos ")])),action:i(()=>[a(E,{gutter:"16",style:{display:"flex","justify-content":"center"}},{default:i(()=>[a(_,{span:"10"},{default:i(()=>[a(x,{value:r.value.curriculumId,"onUpdate:value":g[0]||(g[0]=V=>r.value.curriculumId=V),placeholder:"Seleccionar Plan de estudio",filterable:"",options:p.value,clearable:"","virtual-scroll":!1},null,8,["value","options"])]),_:1}),a(_,{span:"10"},{default:i(()=>[a(x,{value:r.value.period,"onUpdate:value":g[1]||(g[1]=V=>r.value.period=V),placeholder:"Seleccionar Periodo Académico",filterable:"",options:m.value,loading:o.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:$(d)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1}),r.value.period&&r.value.curriculumId?(L(),Y(Wt,{key:0,periodId:r.value.period,curriculumId:r.value.curriculumId},null,8,["periodId","curriculumId"])):lt("",!0)],64)}}});export{pa as default};
