import{d as ue,a as j,_ as me}from"./selectables.services-S-WFd6Ss.js";import{b as _e,c as de,d as fe,e as ve,f as be,g as ge}from"./report.services-Dda0QA-B.js";import{r as $}from"./icon.utils-BskQV8nf.js";import{d as N}from"./debounce.utils-DqPPCsFD.js";import{d as O,e as D,r as d,j as H,a9 as U,aa as k,ab as e,ac as o,aB as B,aA as f,ae as g,aG as ne,_ as te,aL as ie,af as Q,ah as x,ag as E,aI as T,a3 as ye,a8 as we}from"./index-DJC0BDyi.js";import{_ as ce}from"./Divider-Cas2-eGg.js";import{_ as L,a as q}from"./Col-C21edevQ.js";import{_ as J}from"./Select-DspmZ1pU.js";import{a as ae,_ as se}from"./ListItem-C4iNgzvu.js";import{_ as re}from"./Thing-B2WvJBao.js";import{N as pe}from"./Tag-Dk2E0f9P.js";import{_ as K}from"./Space-B52NGJNL.js";import"./Popover-0ZzN24Gj.js";import"./get-8hg4PRDN.js";import"./use-merged-state-Cj4Aargr.js";import"./Suffix-DoGO01ad.js";const Ie=O({__name:"AttendanceGroups",props:{modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(h,{emit:P}){const w=P,I=h,u=D({get:()=>I.modelValue,set:n=>w("update:modelValue",n)}),c=d(!1),m=d(!1),_=d([]),p=d([]),G=d([]),l=d({periodId:null,curriculumId:null,moduleId:null}),y=async n=>{c.value=!0,await _e({groupId:n}),c.value=!1},v=async n=>{m.value=!0,p.value=await j(n),m.value=!1},s=N(n=>{v(n)},400),r=async n=>{G.value=await ue(n)},b=async()=>{_.value=await de(l.value)},C=()=>{v("")};return H(u,n=>{n&&C()}),(n,t)=>{const V=E,A=ce,S=J,i=q,W=pe,X=re,F=K,Y=se,Z=ae,ee=L,oe=B,le=T;return k(),U(le,{show:u.value,"onUpdate:show":t[5]||(t[5]=a=>u.value=a)},{default:e(()=>[o(oe,{style:{width:"800px"},title:"Generar Plantilla - Asistencia",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(V,{"render-icon":g($)("close-circle"),onClick:t[0]||(t[0]=a=>u.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(F,{justify:"end"},{default:e(()=>[o(V,{tertiary:"",size:"large",onClick:t[4]||(t[4]=a=>u.value=!1),disabled:c.value},{default:e(()=>t[8]||(t[8]=[f(" Cancelar ")])),_:1},8,["disabled"])]),_:1})]),default:e(()=>[o(A,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:e(()=>t[6]||(t[6]=[f(" Buscar grupo ")])),_:1}),o(ee,{gutter:"16"},{default:e(()=>[o(i,{span:"8"},{default:e(()=>[o(S,{value:l.value.periodId,"onUpdate:value":[t[1]||(t[1]=a=>l.value.periodId=a),b],placeholder:"Seleccionar Periodo Académico",filterable:"",options:p.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:g(s)},null,8,["value","options","onSearch"])]),_:1}),o(i,{span:"8"},{default:e(()=>[o(S,{disabled:l.value.periodId===null,value:l.value.curriculumId,"onUpdate:value":[t[2]||(t[2]=a=>l.value.curriculumId=a),r],placeholder:"Seleccionar Plan de estudio",filterable:"",options:n.curriculumOptions,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(i,{span:"8"},{default:e(()=>[o(S,{disabled:l.value.curriculumId===null||l.value.periodId===null,value:l.value.moduleId,"onUpdate:value":[t[3]||(t[3]=a=>l.value.moduleId=a),b],placeholder:"Seleccionar Módulo",filterable:"",options:G.value,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(i,{span:"24",class:"border-t border-t-gray-200 mt-2"},{default:e(()=>[o(Z,{hoverable:"",clickable:"",style:{"max-height":"300px","overflow-y":"auto"}},{default:e(()=>[(k(!0),ne(te,null,ie(_.value,a=>(k(),U(Y,{style:{margin:"0 1rem"},key:a.id},{default:e(()=>[o(X,null,{header:e(()=>[o(W,{bordered:!1,class:"me-2"},{default:e(()=>[f(x(a.status),1)]),_:2},1024),f(" "+x(a.name)+" - "+x(a.course),1)]),default:e(()=>{var M,R,z;return[Q("i",null,x((M=a.schedule)==null?void 0:M.days)+" - "+x((R=a.schedule)==null?void 0:R.startHour)+" a "+x((z=a.schedule)==null?void 0:z.endHour),1)]}),_:2},1024),o(F,{align:"center",justify:"end"},{default:e(()=>[o(V,{secondary:"",class:"ms-2",type:"error","render-icon":g($)("document-download"),onClick:M=>y(a.id)},{default:e(()=>t[7]||(t[7]=[f(" PDF ")])),_:2},1032,["render-icon","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ve=O({__name:"AvailableGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(h,{emit:P}){const w=P,I=h,u=D({get:()=>I.modelValue,set:s=>w("update:modelValue",s)}),c=d(!1),m=d(!1),_=d([]),p=d({periodId:null}),G=async()=>{c.value=!0,await fe({periodId:p.value.periodId}),c.value=!1},l=async s=>{m.value=!0,_.value=await j(s),m.value=!1},y=N(s=>{l(s)},400),v=()=>{l("")};return H(u,s=>{s&&v()}),(s,r)=>{const b=E,C=J,n=q,t=L,V=K,A=B,S=T;return k(),U(S,{show:u.value,"onUpdate:show":r[2]||(r[2]=i=>u.value=i)},{default:e(()=>[o(A,{style:{width:"800px"},title:"Generar Reporte - Grupos Habilitados",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(b,{"render-icon":g($)("close-circle"),onClick:r[0]||(r[0]=i=>u.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(V,{justify:"center"},{default:e(()=>[o(b,{disabled:p.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:c.value,"render-icon":g($)("document-download"),onClick:G},{default:e(()=>r[3]||(r[3]=[f(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(n,{span:"24"},{default:e(()=>[o(C,{class:"mx-auto",style:{width:"300px"},value:p.value.periodId,"onUpdate:value":r[1]||(r[1]=i=>p.value.periodId=i),placeholder:"Seleccionar Periodo Académico",filterable:"",options:_.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:g(y)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Se=O({__name:"EnabledGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(h,{emit:P}){const w=P,I=h,u=D({get:()=>I.modelValue,set:s=>w("update:modelValue",s)}),c=d(!1),m=d(!1),_=d([]),p=d({periodId:null}),G=async()=>{c.value=!0,await ve({periodId:p.value.periodId}),c.value=!1},l=async s=>{m.value=!0,_.value=await j(s),m.value=!1},y=N(s=>{l(s)},400),v=()=>{l("")};return H(u,s=>{s&&v()}),(s,r)=>{const b=E,C=J,n=q,t=L,V=K,A=B,S=T;return k(),U(S,{show:u.value,"onUpdate:show":r[2]||(r[2]=i=>u.value=i)},{default:e(()=>[o(A,{style:{width:"800px"},title:"Generar Reporte - Grupos Aperturados",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(b,{"render-icon":g($)("close-circle"),onClick:r[0]||(r[0]=i=>u.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(V,{justify:"center"},{default:e(()=>[o(b,{disabled:p.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:c.value,"render-icon":g($)("document-download"),onClick:G},{default:e(()=>r[3]||(r[3]=[f(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(n,{span:"24"},{default:e(()=>[o(C,{class:"mx-auto",style:{width:"300px"},value:p.value.periodId,"onUpdate:value":r[1]||(r[1]=i=>p.value.periodId=i),placeholder:"Seleccionar Periodo Académico",filterable:"",options:_.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:g(y)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ge=O({__name:"Enrollments",props:{modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(h,{emit:P}){const w=P,I=h,u=D({get:()=>I.modelValue,set:n=>w("update:modelValue",n)}),c=d(!1),m=d(!1),_=d([]),p=d([]),G=d([]),l=d({periodId:null,curriculumId:null,moduleId:null}),y=async n=>{c.value=!0,await be({groupId:n}),c.value=!1},v=async n=>{m.value=!0,p.value=await j(n),m.value=!1},s=N(n=>{v(n)},400),r=async n=>{G.value=await ue(n)},b=async()=>{_.value=await de(l.value)},C=()=>{v("")};return H(u,n=>{n&&C()}),(n,t)=>{const V=E,A=ce,S=J,i=q,W=pe,X=re,F=K,Y=se,Z=ae,ee=L,oe=B,le=T;return k(),U(le,{show:u.value,"onUpdate:show":t[5]||(t[5]=a=>u.value=a)},{default:e(()=>[o(oe,{style:{width:"800px"},title:"Generar Reporte - Matrículas",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(V,{"render-icon":g($)("close-circle"),onClick:t[0]||(t[0]=a=>u.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(F,{justify:"end"},{default:e(()=>[o(V,{tertiary:"",size:"large",onClick:t[4]||(t[4]=a=>u.value=!1),disabled:c.value},{default:e(()=>t[8]||(t[8]=[f(" Cancelar ")])),_:1},8,["disabled"])]),_:1})]),default:e(()=>[o(A,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:e(()=>t[6]||(t[6]=[f(" Buscar grupo ")])),_:1}),o(ee,{gutter:"16"},{default:e(()=>[o(i,{span:"8"},{default:e(()=>[o(S,{value:l.value.periodId,"onUpdate:value":[t[1]||(t[1]=a=>l.value.periodId=a),b],placeholder:"Seleccionar Periodo Académico",filterable:"",options:p.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:g(s)},null,8,["value","options","onSearch"])]),_:1}),o(i,{span:"8"},{default:e(()=>[o(S,{disabled:l.value.periodId===null,value:l.value.curriculumId,"onUpdate:value":[t[2]||(t[2]=a=>l.value.curriculumId=a),r],placeholder:"Seleccionar Plan de estudio",filterable:"",options:n.curriculumOptions,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(i,{span:"8"},{default:e(()=>[o(S,{disabled:l.value.curriculumId===null||l.value.periodId===null,value:l.value.moduleId,"onUpdate:value":[t[3]||(t[3]=a=>l.value.moduleId=a),b],placeholder:"Seleccionar Módulo",filterable:"",options:G.value,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(i,{span:"24",class:"border-t border-t-gray-200 mt-2"},{default:e(()=>[o(Z,{hoverable:"",clickable:"",style:{"max-height":"300px","overflow-y":"auto"}},{default:e(()=>[(k(!0),ne(te,null,ie(_.value,a=>(k(),U(Y,{style:{margin:"0 1rem"},key:a.id},{default:e(()=>[o(X,null,{header:e(()=>[o(W,{bordered:!1,class:"me-2"},{default:e(()=>[f(x(a.status),1)]),_:2},1024),f(" "+x(a.name)+" - "+x(a.course),1)]),default:e(()=>{var M,R,z;return[Q("i",null,x((M=a.schedule)==null?void 0:M.days)+" - "+x((R=a.schedule)==null?void 0:R.startHour)+" a "+x((z=a.schedule)==null?void 0:z.endHour),1)]}),_:2},1024),o(F,{align:"center",justify:"end"},{default:e(()=>[o(V,{secondary:"",class:"ms-2",type:"error","render-icon":g($)("document-download"),onClick:M=>y(a.id)},{default:e(()=>t[7]||(t[7]=[f(" PDF ")])),_:2},1032,["render-icon","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),xe=O({__name:"CollectionGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(h,{emit:P}){const w=P,I=h,u=D({get:()=>I.modelValue,set:s=>w("update:modelValue",s)}),c=d(!1),m=d(!1),_=d([]),p=d({periodId:null}),G=async()=>{c.value=!0,await ge({periodId:p.value.periodId}),c.value=!1},l=async s=>{m.value=!0,_.value=await j(s),m.value=!1},y=N(s=>{l(s)},400),v=()=>{l("")};return H(u,s=>{s&&v()}),(s,r)=>{const b=E,C=J,n=q,t=L,V=K,A=B,S=T;return k(),U(S,{show:u.value,"onUpdate:show":r[2]||(r[2]=i=>u.value=i)},{default:e(()=>[o(A,{style:{width:"800px"},title:"Generar Reporte - Recaudación por grupo",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(b,{"render-icon":g($)("close-circle"),onClick:r[0]||(r[0]=i=>u.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(V,{justify:"center"},{default:e(()=>[o(b,{disabled:p.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:c.value,"render-icon":g($)("document-download"),onClick:G},{default:e(()=>r[3]||(r[3]=[f(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(n,{span:"24"},{default:e(()=>[o(C,{class:"mx-auto",style:{width:"300px"},value:p.value.periodId,"onUpdate:value":r[1]||(r[1]=i=>p.value.periodId=i),placeholder:"Seleccionar Periodo Académico",filterable:"",options:_.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:g(y)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),De=O({__name:"GroupReportView",setup(h){const{hasPermission:P}=ye(),w=d([]),I=d(!1),u=d(!1),c=d(!1),m=d(!1),_=d(!1);return(async()=>{w.value=await me()})(),(G,l)=>{const y=E,v=re,s=se,r=ae,b=B,C=we("AppNotAuthorization");return g(P)(["report.group"])?(k(),ne(te,{key:0},[o(b,{segmented:{header:!0,content:!0}},{header:e(()=>l[10]||(l[10]=[Q("span",{class:"text-sm text-slate-500"}," Reportes ",-1),Q("h5",{class:"text-lg font-bold text-slate-800"},"Reporte de grupos",-1)])),default:e(()=>[o(r,null,{default:e(()=>[o(s,null,{suffix:e(()=>[o(y,{onClick:l[0]||(l[0]=n=>c.value=!0)},{default:e(()=>l[11]||(l[11]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(v,{title:"Matrículas",description:"Estudiantes matriculados en un grupo"})]),_:1}),o(s,null,{suffix:e(()=>[o(y,{onClick:l[1]||(l[1]=n=>I.value=!0)},{default:e(()=>l[12]||(l[12]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(v,{title:"Grupos Aperturados",description:"Grupos aperturados por periodo"})]),_:1}),o(s,null,{suffix:e(()=>[o(y,{onClick:l[2]||(l[2]=n=>u.value=!0)},{default:e(()=>l[13]||(l[13]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(v,{title:"Grupos Habilitados",description:"Grupos habilitados por periodo"})]),_:1}),o(s,null,{suffix:e(()=>[o(y,{onClick:l[3]||(l[3]=n=>m.value=!0)},{default:e(()=>l[14]||(l[14]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(v,{title:"Recaudación por grupo",description:"Recaudación por grupo en un periodo"})]),_:1}),o(s,null,{suffix:e(()=>[o(y,{onClick:l[4]||(l[4]=n=>_.value=!0)},{default:e(()=>l[15]||(l[15]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(v,{title:"Plantilla de Asistencia",description:"Plantilla de asistencia para grupos"})]),_:1})]),_:1})]),_:1}),o(Ie,{modelValue:_.value,"onUpdate:modelValue":l[5]||(l[5]=n=>_.value=n),curriculumOptions:w.value},null,8,["modelValue","curriculumOptions"]),o(Ge,{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=n=>c.value=n),curriculumOptions:w.value},null,8,["modelValue","curriculumOptions"]),o(Se,{modelValue:I.value,"onUpdate:modelValue":l[7]||(l[7]=n=>I.value=n)},null,8,["modelValue"]),o(xe,{modelValue:m.value,"onUpdate:modelValue":l[8]||(l[8]=n=>m.value=n)},null,8,["modelValue"]),o(Ve,{modelValue:u.value,"onUpdate:modelValue":l[9]||(l[9]=n=>u.value=n)},null,8,["modelValue"])],64)):(k(),U(C,{key:1}))}}});export{De as default};
