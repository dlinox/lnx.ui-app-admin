import{d as Z,h as N,a as be,z as O,A as W,B as M,x as S,W as Be,V as $e,u as ue,r as I,e as q,D as ne,p as Le,f as ce,I as _e,Q as Ue,M as se,aN as je,G as ke,n as qe,v as We,a0 as Ge,a1 as He,Z as Ke,i as Qe,ar as Ze,ay as Ie,U as Je,aO as Xe,O as Y,aJ as de,aP as Ye,aQ as et,aD as ve,an as oe,g as he,a8 as xe,a9 as $,a4 as K,a6 as t,aa as n,ae as E,aR as tt,ab as G,aS as ot,ag as pe,ai as me,aj as ye,al as L,ac as d,ao as y,_ as Q,aG as te,aT as nt,aU as lt,a5 as rt,aV as at,ad as ie}from"./index-BzGjg7HW.js";import{h as Se,r as ae}from"./DataTable.types-CWkwFvml.js";import{u as st}from"./useBreakpoints-jDxkxCqO.js";import{h as dt}from"./student.services-3TyR0h8R.js";import{_ as it}from"./selectables.services-l3r8o3Sm.js";import{_ as ut,a as ct}from"./Spin-BQv_Bc2_.js";import{_ as pt,a as Pe,b as Ne}from"./FormItem-Baka7rSs.js";import{_ as fe,c as Ce,b as ge,N as Re,a as Ee}from"./Col-B1xrStaH.js";import{_ as Te,a as Ve,b as Me}from"./Thing-DiqCXtFm.js";import{u as mt}from"./period.stores-BzAVm1e5.js";import{u as ft}from"./get-Q-alL0iz.js";import{C as gt}from"./ChevronRight-DqgmWN6z.js";const vt=Z({name:"ChevronLeft",render(){return N("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}});function bt(e){const{fontWeight:o,textColor1:s,textColor2:a,textColorDisabled:f,dividerColor:u,fontSize:i}=e;return{titleFontSize:i,titleFontWeight:o,dividerColor:u,titleTextColor:s,titleTextColorDisabled:f,fontSize:i,textColor:a,arrowColor:a,arrowColorDisabled:f,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}}const _t={name:"Collapse",common:be,self:bt},ht=O("collapse","width: 100%;",[O("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[W("disabled",[M("header","cursor: not-allowed;",[M("header-main",`
 color: var(--n-title-text-color-disabled);
 `),O("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),O("collapse-item","margin-left: 32px;"),S("&:first-child","margin-top: 0;"),S("&:first-child >",[M("header","padding-top: 0;")]),W("left-arrow-placement",[M("header",[O("collapse-item-arrow","margin-right: 4px;")])]),W("right-arrow-placement",[M("header",[O("collapse-item-arrow","margin-left: 4px;")])]),M("content-wrapper",[M("content-inner","padding-top: 16px;"),Be({duration:"0.15s"})]),W("active",[M("header",[W("active",[O("collapse-item-arrow","transform: rotate(90deg);")])])]),S("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),$e("disabled",[W("trigger-area-main",[M("header",[M("header-main","cursor: pointer;"),O("collapse-item-arrow","cursor: default;")])]),W("trigger-area-arrow",[M("header",[O("collapse-item-arrow","cursor: pointer;")])]),W("trigger-area-extra",[M("header",[M("header-extra","cursor: pointer;")])])]),M("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 `,[M("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),M("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),O("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),xt=Object.assign(Object.assign({},ne.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},triggerAreas:{type:Array,default:()=>["main","extra","arrow"]},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),Ae=Ue("n-collapse"),yt=Z({name:"Collapse",props:xt,slots:Object,setup(e,{slots:o}){const{mergedClsPrefixRef:s,inlineThemeDisabled:a,mergedRtlRef:f}=ue(e),u=I(e.defaultExpandedNames),i=q(()=>e.expandedNames),p=ft(i,u),C=ne("Collapse","-collapse",ht,_t,e,s);function x(R){const{"onUpdate:expandedNames":h,onUpdateExpandedNames:k,onExpandedNamesChange:v}=e;k&&se(k,R),h&&se(h,R),v&&se(v,R),u.value=R}function r(R){const{onItemHeaderClick:h}=e;h&&se(h,R)}function c(R,h,k){const{accordion:v}=e,{value:m}=p;if(v)R?(x([h]),r({name:h,expanded:!0,event:k})):(x([]),r({name:h,expanded:!1,event:k}));else if(!Array.isArray(m))x([h]),r({name:h,expanded:!0,event:k});else{const l=m.slice(),g=l.findIndex(P=>h===P);~g?(l.splice(g,1),x(l),r({name:h,expanded:!1,event:k})):(l.push(h),x(l),r({name:h,expanded:!0,event:k}))}}Le(Ae,{props:e,mergedClsPrefixRef:s,expandedNamesRef:p,slots:o,toggleItem:c});const b=ce("Collapse",f,s),A=q(()=>{const{common:{cubicBezierEaseInOut:R},self:{titleFontWeight:h,dividerColor:k,titlePadding:v,titleTextColor:m,titleTextColorDisabled:l,textColor:g,arrowColor:P,fontSize:z,titleFontSize:D,arrowColorDisabled:T,itemMargin:U}}=C.value;return{"--n-font-size":z,"--n-bezier":R,"--n-text-color":g,"--n-divider-color":k,"--n-title-padding":v,"--n-title-font-size":D,"--n-title-text-color":m,"--n-title-text-color-disabled":l,"--n-title-font-weight":h,"--n-arrow-color":P,"--n-arrow-color-disabled":T,"--n-item-margin":U}}),V=a?_e("collapse",void 0,A,e):void 0;return{rtlEnabled:b,mergedTheme:C,mergedClsPrefix:s,cssVars:a?void 0:A,themeClass:V==null?void 0:V.themeClass,onRender:V==null?void 0:V.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),N("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),Ct=Z({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(e){return{onceTrue:je(ke(e,"show"))}},render(){return N(Ge,null,{default:()=>{const{show:e,displayDirective:o,onceTrue:s,clsPrefix:a}=this,f=o==="show"&&s,u=N("div",{class:`${a}-collapse-item__content-wrapper`},N("div",{class:`${a}-collapse-item__content-inner`},this.$slots));return f?qe(u,[[We,e]]):e?u:null}})}}),wt={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},It=Z({name:"CollapseItem",props:wt,setup(e){const{mergedRtlRef:o}=ue(e),s=He(),a=Ke(()=>{var c;return(c=e.name)!==null&&c!==void 0?c:s}),f=Qe(Ae);f||Ze("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:u,props:i,mergedClsPrefixRef:p,slots:C}=f,x=q(()=>{const{value:c}=u;if(Array.isArray(c)){const{value:b}=a;return!~c.findIndex(A=>A===b)}else if(c){const{value:b}=a;return b!==c}return!0});return{rtlEnabled:ce("Collapse",o,p),collapseSlots:C,randomName:s,mergedClsPrefix:p,collapsed:x,triggerAreas:ke(i,"triggerAreas"),mergedDisplayDirective:q(()=>{const{displayDirective:c}=e;return c||i.displayDirective}),arrowPlacement:q(()=>i.arrowPlacement),handleClick(c){let b="main";Se(c,"arrow")&&(b="arrow"),Se(c,"extra")&&(b="extra"),i.triggerAreas.includes(b)&&f&&!e.disabled&&f.toggleItem(x.value,a.value,c)}}},render(){const{collapseSlots:e,$slots:o,arrowPlacement:s,collapsed:a,mergedDisplayDirective:f,mergedClsPrefix:u,disabled:i,triggerAreas:p}=this,C=Ie(o.header,{collapsed:a},()=>[this.title]),x=o["header-extra"]||e["header-extra"],r=o.arrow||e.arrow;return N("div",{class:[`${u}-collapse-item`,`${u}-collapse-item--${s}-arrow-placement`,i&&`${u}-collapse-item--disabled`,!a&&`${u}-collapse-item--active`,p.map(c=>`${u}-collapse-item--trigger-area-${c}`)]},N("div",{class:[`${u}-collapse-item__header`,!a&&`${u}-collapse-item__header--active`]},N("div",{class:`${u}-collapse-item__header-main`,onClick:this.handleClick},s==="right"&&C,N("div",{class:`${u}-collapse-item-arrow`,key:this.rtlEnabled?0:1,"data-arrow":!0},Ie(r,{collapsed:a},()=>[N(Je,{clsPrefix:u},{default:()=>this.rtlEnabled?N(vt,null):N(gt,null)})])),s==="left"&&C),Xe(x,{collapsed:a},c=>N("div",{class:`${u}-collapse-item__header-extra`,onClick:this.handleClick,"data-extra":!0},c))),N(Ct,{clsPrefix:u,displayDirective:f,show:!a},o))}});function St(e){const{textColor2:o,textColor3:s,fontSize:a,fontWeight:f}=e;return{labelFontSize:a,labelFontWeight:f,valueFontWeight:f,valueFontSize:"24px",labelTextColor:s,valuePrefixTextColor:o,valueSuffixTextColor:o,valueTextColor:o}}const zt={name:"Statistic",common:be,self:St},$t={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"};function kt(e){const{dividerColor:o,cardColor:s,modalColor:a,popoverColor:f,tableHeaderColor:u,tableColorStriped:i,textColor1:p,textColor2:C,borderRadius:x,fontWeightStrong:r,lineHeight:c,fontSizeSmall:b,fontSizeMedium:A,fontSizeLarge:V}=e;return Object.assign(Object.assign({},$t),{fontSizeSmall:b,fontSizeMedium:A,fontSizeLarge:V,lineHeight:c,borderRadius:x,borderColor:Y(s,o),borderColorModal:Y(a,o),borderColorPopover:Y(f,o),tdColor:s,tdColorModal:a,tdColorPopover:f,tdColorStriped:Y(s,i),tdColorStripedModal:Y(a,i),tdColorStripedPopover:Y(f,i),thColor:Y(s,u),thColorModal:Y(a,u),thColorPopover:Y(f,u),thTextColor:p,tdTextColor:C,thFontWeight:r})}const Pt={name:"Table",common:be,self:kt},Nt=O("statistic",[M("label",`
 font-weight: var(--n-label-font-weight);
 transition: .3s color var(--n-bezier);
 font-size: var(--n-label-font-size);
 color: var(--n-label-text-color);
 `),O("statistic-value",`
 margin-top: 4px;
 font-weight: var(--n-value-font-weight);
 `,[M("prefix",`
 margin: 0 4px 0 0;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-prefix-text-color);
 `,[O("icon",{verticalAlign:"-0.125em"})]),M("content",`
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-text-color);
 `),M("suffix",`
 margin: 0 0 0 4px;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-suffix-text-color);
 `,[O("icon",{verticalAlign:"-0.125em"})])])]),Rt=Object.assign(Object.assign({},ne.props),{tabularNums:Boolean,label:String,value:[String,Number]}),Et=Z({name:"Statistic",props:Rt,slots:Object,setup(e){const{mergedClsPrefixRef:o,inlineThemeDisabled:s,mergedRtlRef:a}=ue(e),f=ne("Statistic","-statistic",Nt,zt,e,o),u=ce("Statistic",a,o),i=q(()=>{const{self:{labelFontWeight:C,valueFontSize:x,valueFontWeight:r,valuePrefixTextColor:c,labelTextColor:b,valueSuffixTextColor:A,valueTextColor:V,labelFontSize:R},common:{cubicBezierEaseInOut:h}}=f.value;return{"--n-bezier":h,"--n-label-font-size":R,"--n-label-font-weight":C,"--n-label-text-color":b,"--n-value-font-weight":r,"--n-value-font-size":x,"--n-value-prefix-text-color":c,"--n-value-suffix-text-color":A,"--n-value-text-color":V}}),p=s?_e("statistic",void 0,i,e):void 0;return{rtlEnabled:u,mergedClsPrefix:o,cssVars:s?void 0:i,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var e;const{mergedClsPrefix:o,$slots:{default:s,label:a,prefix:f,suffix:u}}=this;return(e=this.onRender)===null||e===void 0||e.call(this),N("div",{class:[`${o}-statistic`,this.themeClass,this.rtlEnabled&&`${o}-statistic--rtl`],style:this.cssVars},de(a,i=>N("div",{class:`${o}-statistic__label`},this.label||i)),N("div",{class:`${o}-statistic-value`,style:{fontVariantNumeric:this.tabularNums?"tabular-nums":""}},de(f,i=>i&&N("span",{class:`${o}-statistic-value__prefix`},i)),this.value!==void 0?N("span",{class:`${o}-statistic-value__content`},this.value):de(s,i=>i&&N("span",{class:`${o}-statistic-value__content`},i)),de(u,i=>i&&N("span",{class:`${o}-statistic-value__suffix`},i))))}}),Tt=S([O("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[S("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[S("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),S("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[S("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),W("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[S("tr",[S("&:last-child",[S("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),W("single-line",[S("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),S("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),W("single-column",[S("tr",[S("&:not(:last-child)",[S("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),W("striped",[S("tr:nth-of-type(even)",[S("td","background-color: var(--n-td-color-striped)")])]),$e("bottom-bordered",[S("tr",[S("&:last-child",[S("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),Ye(O("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[S("th",`
 background-color: var(--n-th-color-modal);
 `),S("td",`
 background-color: var(--n-td-color-modal);
 `)])),et(O("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[S("th",`
 background-color: var(--n-th-color-popover);
 `),S("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),Vt=Object.assign(Object.assign({},ne.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),Mt=Z({name:"Table",props:Vt,setup(e){const{mergedClsPrefixRef:o,inlineThemeDisabled:s,mergedRtlRef:a}=ue(e),f=ne("Table","-table",Tt,Pt,e,o),u=ce("Table",a,o),i=q(()=>{const{size:C}=e,{self:{borderColor:x,tdColor:r,tdColorModal:c,tdColorPopover:b,thColor:A,thColorModal:V,thColorPopover:R,thTextColor:h,tdTextColor:k,borderRadius:v,thFontWeight:m,lineHeight:l,borderColorModal:g,borderColorPopover:P,tdColorStriped:z,tdColorStripedModal:D,tdColorStripedPopover:T,[ve("fontSize",C)]:U,[ve("tdPadding",C)]:J,[ve("thPadding",C)]:X},common:{cubicBezierEaseInOut:ee}}=f.value;return{"--n-bezier":ee,"--n-td-color":r,"--n-td-color-modal":c,"--n-td-color-popover":b,"--n-td-text-color":k,"--n-border-color":x,"--n-border-color-modal":g,"--n-border-color-popover":P,"--n-border-radius":v,"--n-font-size":U,"--n-th-color":A,"--n-th-color-modal":V,"--n-th-color-popover":R,"--n-th-font-weight":m,"--n-th-text-color":h,"--n-line-height":l,"--n-td-padding":J,"--n-th-padding":X,"--n-td-color-striped":z,"--n-td-color-striped-modal":D,"--n-td-color-striped-popover":T}}),p=s?_e("table",q(()=>e.size[0]),i,e):void 0;return{rtlEnabled:u,mergedClsPrefix:o,cssVars:s?void 0:i,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var e;const{mergedClsPrefix:o}=this;return(e=this.onRender)===null||e===void 0||e.call(this),N("table",{class:[`${o}-table`,this.themeClass,{[`${o}-table--rtl`]:this.rtlEnabled,[`${o}-table--bottom-bordered`]:this.bottomBordered,[`${o}-table--bordered`]:this.bordered,[`${o}-table--single-line`]:this.singleLine,[`${o}-table--single-column`]:this.singleColumn,[`${o}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),At=async e=>{try{return{status:!0,data:(await oe().post("/enrollment/module-store",{...e})).data.data}}catch{return{status:!1,data:null}}},Dt=async e=>{try{return{status:!0,data:(await oe().post("/enrollment/group-store",{...e})).data.data}}catch{return{status:!1,data:null}}},Ot=async e=>{try{return{status:!0,data:(await oe().post("/enrollment/enabled-groups",e)).data.data}}catch{return{status:!1,data:null}}},Ft=async(e,o,s)=>{try{return(await oe().post("/enrollment/student-enrollment-avaliable",{studentId:e,curriculumId:o,periodId:s})).data.data}catch{return null}},Bt=async(e,o)=>{try{return{status:!0,data:(await oe().post(`/enrollment/${e}/student/${o}/curriculum`)).data.data}}catch{return{status:!1,data:[]}}},Lt=async e=>{try{return(await oe().post("/enrollment/download-enrollment-pdf",{...e},{responseType:"blob"})).data}catch{return null}},Ut=()=>({studentId:null,groupId:null,payments:[]}),jt=async e=>{try{return(await oe().post("/payment/validate",e)).data.data}catch{return{token:null}}},qt=()=>({studentId:null,amount:null,date:null,sequenceNumber:null,paymentTypeId:7}),Wt=e=>({studentId:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}],amount:[{required:!0,trigger:["blur","input"],message:"Obligatorio"},{message:"Debe ser un número",trigger:["blur","input"],validator:(o,s)=>{if(s){if(!/^\d*\.?\d*$/.test(s))return new Error("Debe ser un número")}else return new Error("Obligatorio");return!0}}],date:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}],sequenceNumber:[{required:!0,trigger:["blur","input"],message:"Obligatorio"},{message:e===7?"Debe tener 7 digitos":"Debe tener 6 digitos",trigger:["blur","input"],validator:(o,s)=>{if(s)if(/^\d*$/.test(s)){if(e===7&&s.length!==7)return new Error("Debe tener 7 digitos");if(e===9&&s.length!==6)return new Error("Debe tener 6 digitos")}else return new Error("Debe ser un número");else return new Error("Obligatorio");return!0}}],paymentTypeId:[{type:"number",required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),De=Z({__name:"PaymentForm",props:{modelValue:{type:Boolean},studentId:{}},emits:["update:modelValue","success"],setup(e,{emit:o}){const s=o,a=e,f=I(!1),u=q({get:()=>a.modelValue,set:c=>s("update:modelValue",c)}),i=I(null),p=I({}),C=q(()=>Wt(p.value.paymentTypeId)),x=async()=>{if(i.value&&!await i.value.validate())return;p.value.studentId=a.studentId,f.value=!0;const c=await jt(p.value);c.token!==null&&(u.value=!1,s("success",{token:c.token,payment:p.value})),f.value=!1,console.log("Validando pago",c)},r=()=>{console.log("Inicializando formulario"),p.value=Object.assign({},qt())};return he(u,c=>{c&&r()}),(c,b)=>{const A=xe("LnxIcon"),V=ot,R=ut,h=pt,k=Pe,v=fe,m=Ce,l=pe,g=ge,P=Ne,z=me,D=ye;return $(),K(D,{show:u.value,"onUpdate:show":b[4]||(b[4]=T=>u.value=T)},{default:t(()=>[n(z,{style:{width:"500px"},title:"REGISTRAR PAGO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{default:t(()=>[n(R,{title:"¡Importante!",type:"default",class:"mb-4"},{icon:t(()=>[n(V,null,{default:t(()=>[n(A,{"icon-name":"information",size:"20"})]),_:1})]),default:t(()=>[b[5]||(b[5]=E(" Solo se validan pagos realizados, con un día de anticipación. "))]),_:1}),n(P,{ref_key:"formRef",ref:i,model:p.value,rules:C.value,size:"large",onKeydown:tt(x,["enter"])},{default:t(()=>[n(g,{gutter:[16,16]},{default:t(()=>[n(v,{span:"12"},{default:t(()=>[n(k,{path:"amount",label:"Monto"},{default:t(()=>[n(h,{value:p.value.amount,"onUpdate:value":b[0]||(b[0]=T=>p.value.amount=T)},null,8,["value"])]),_:1})]),_:1}),n(v,{span:"12"},{default:t(()=>[n(k,{path:"date",label:"Fecha de pago"},{default:t(()=>[n(h,{placeholder:"",type:"date",value:p.value.date,"onUpdate:value":b[1]||(b[1]=T=>p.value.date=T)},null,8,["value"])]),_:1})]),_:1}),n(v,{span:"12"},{default:t(()=>[n(k,{path:"sequenceNumber",label:"Secuencia"},{default:t(()=>[n(h,{value:p.value.sequenceNumber,"onUpdate:value":b[2]||(b[2]=T=>p.value.sequenceNumber=T)},null,8,["value"])]),_:1})]),_:1}),n(v,{span:"12"},{default:t(()=>[n(k,{path:"paymentTypeId",label:"Metodo de pago"},{default:t(()=>[n(m,{"virtual-scroll":!1,value:p.value.paymentTypeId,"onUpdate:value":b[3]||(b[3]=T=>p.value.paymentTypeId=T),placeholder:"Metodo de pago",options:[{label:"BN - VENTANILLA",value:7},{label:"BN - PAGALO.PE",value:9}]},null,8,["value"])]),_:1})]),_:1}),n(v,{span:"24"},{default:t(()=>[n(l,{loading:f.value,secondary:"",type:"primary",onClick:x,block:"","render-icon":G(ae)("money-tick")},{default:t(()=>b[6]||(b[6]=[E(" Validar Pago ")])),_:1},8,["loading","render-icon"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"])}}}),Gt={class:"wrapper-list-groups"},Ht={class:"table-auto w-full"},Kt={class:"px-4 py-2 flex items-center"},Qt={class:"ms-2"},Zt={class:"text-end px-4 py-2"},Jt={class:"border-b-2 border-gray-500"},Xt={class:"px-4 py-2 font-bold text-lg text-end"},Yt={class:"px-4 py-2 font-bold text-lg text-end"},eo={class:"text-red-500 text-sm text-end text-sm"},to=Z({__name:"EnrollmentGroupForm",props:{modelValue:{type:Boolean},studentId:{},curriculumId:{},courseId:{}},emits:["update:modelValue","success"],setup(e,{emit:o}){const s=o,a=e,f=I(!1),u=q({get:()=>a.modelValue,set:v=>s("update:modelValue",v)}),i=I(!1),p=I([]),C=I([]),x=I(0),r=I(Object.assign({},{...Ut()})),c=v=>{console.log("Pago validado",v),r.value.payments.push(v.token),C.value.push({token:v.token,amount:v.payment.amount,sequenceNumber:v.payment.sequenceNumber})},b=v=>{r.value.groupId&&r.value.groupId!=v.id&&(r.value.groupId=v.id,x.value=v.price),r.value.groupId==v.id?(r.value.groupId=null,x.value=0):(r.value.groupId=v.id,x.value=v.price)},A=async()=>{const v=await Ot({studentId:a.studentId,curriculumId:a.curriculumId,courseId:a.courseId});p.value=v.data},V=v=>{let l=C.value[v].token;C.value.splice(v,1);let g=r.value.payments.find(z=>z.token==l);if(!g)return;let P=r.value.payments.indexOf(g);r.value.payments.splice(P,1)},R=()=>C.value.reduce((m,l)=>m+parseInt(l.amount),0)>=x.value?null:"El monto pagado es menor al total",h=async()=>{r.value.studentId=a.studentId,f.value=!0,(await Dt(r.value)).status&&(s("success"),u.value=!1),f.value=!1,console.log("Guardando matricula",r.value)},k=async()=>{await A(),console.log("Inicializando formulario")};return he(u,v=>{v&&k()}),(v,m)=>{const l=pe,g=Re,P=Ee,z=Ve,D=Me,T=Te,U=fe,J=xe("LnxIcon"),X=ge,ee=me,le=ye;return $(),L(Q,null,[n(le,{show:u.value,"onUpdate:show":m[1]||(m[1]=_=>u.value=_)},{default:t(()=>[n(ee,{style:{width:"500px"},title:"MATRICULA EN GRUPO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{default:t(()=>[n(X,{gutter:[16,16]},{default:t(()=>[n(U,{span:"24"},{default:t(()=>[d("div",Gt,[n(T,{hoverable:"",clickable:""},{header:t(()=>[E(" Grupos aperturados ("+y(p.value.length)+") ",1)]),default:t(()=>[($(!0),L(Q,null,te(p.value,_=>($(),K(D,{key:_.id,class:nt({"item-selected":r.value.groupId==_.id}),extra:_.price},{default:t(()=>[n(z,{title:`${_.group} - S/. ${_.price}`,onClick:F=>b(_)},lt({description:t(()=>[n(P,{size:"small",style:{"margin-top":"4px"}},{default:t(()=>[n(g,{bordered:!1,type:"info",size:"small"},{default:t(()=>[E(y(_.modality),1)]),_:2},1024)]),_:2},1024)]),default:t(()=>[m[3]||(m[3]=E(" Docente: ")),d("b",null,y(_.teacher),1),m[4]||(m[4]=d("br",null,null,-1)),m[5]||(m[5]=E(" Laboratorio: ")),d("b",null,y(_.laboratory),1),m[6]||(m[6]=d("br",null,null,-1)),($(!0),L(Q,null,te(_.schedules,(F,re)=>($(),K(g,{key:re,bordered:!1,type:"info",size:"small"},{default:t(()=>[E(y(F.day)+" - "+y(F.startHour)+" - "+y(F.endHour),1)]),_:2},1024))),128))]),_:2},[r.value.groupId==_.id?{name:"header-extra",fn:t(()=>[n(l,{circle:"",type:"warning","render-icon":G(ae)("verify")},null,8,["render-icon"])]),key:"0"}:void 0]),1032,["title","onClick"])]),_:2},1032,["class","extra"]))),128))]),_:1})])]),_:1}),n(U,{span:"24"},{default:t(()=>[d("span",{role:"button",onClick:m[0]||(m[0]=_=>i.value=!0),class:"border border-dashed border-gray-300 p-4 rounded-sm flex items-center justify-center cursor-pointer text-gray-400 hover:bg-gray-50 font-bold hover:text-gray-500 mb-4"},[n(J,{class:"me-3","icon-name":"money-add",size:"20"}),m[7]||(m[7]=E(" Agregar pago "))]),d("table",Ht,[d("tbody",null,[($(!0),L(Q,null,te(C.value,(_,F)=>($(),L("tr",{key:F,class:"border-b border-gray-300 border-dashed px-4 py-2"},[d("td",Kt,[n(l,{type:"error",size:"small",secondary:"",onClick:re=>V(F),"render-icon":G(ae)("trash")},null,8,["onClick","render-icon"]),d("i",Qt,y(_.sequenceNumber),1)]),d("td",Zt,"S/. "+y(_.amount),1)]))),128)),d("tr",Jt,[m[8]||(m[8]=d("td",{class:"px-4 py-2"},"Total pagado",-1)),d("td",Xt," S/. "+y(C.value.reduce((_,F)=>_+parseInt(F.amount),0)),1)]),d("tr",null,[m[9]||(m[9]=d("td",{class:"px-4 py-2"},"Total a pagar",-1)),d("td",Yt," S/. "+y(x.value),1)])])]),d("div",eo,y(R()),1)]),_:1}),n(U,{span:"24"},{default:t(()=>[n(l,{size:"large",type:"primary",onClick:h,block:"",loading:f.value},{default:t(()=>m[10]||(m[10]=[E(" Realizar Matricula ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),n(De,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=_=>i.value=_),studentId:a.studentId,onSuccess:c},null,8,["modelValue","studentId"])],64)}}}),ze=()=>({studentId:null,curriculumId:null,moduleId:null,payments:[]}),oo=()=>({studentId:[],curriculumId:[],moduleId:[{type:"number",required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),no={class:"table-auto w-full"},lo={class:"px-4 py-2 flex items-center"},ro={class:"ms-2"},ao={class:"text-end px-4 py-2"},so={class:"border-b-2 border-gray-500"},io={class:"px-4 py-2 font-bold text-lg text-end"},uo={class:"px-4 py-2 font-bold text-lg text-end"},co={class:"text-red-500 text-sm text-end text-sm"},po=Z({__name:"EnrollmentModuleForm",props:{modelValue:{type:Boolean},studentId:{},curriculumId:{}},emits:["update:modelValue","success"],setup(e,{emit:o}){const s=o,a=e,f=q({get:()=>a.modelValue,set:l=>s("update:modelValue",l)}),u=I(!1),i=I(!1),p=I([]),C=I(null),x=q(()=>oo()),r=I(ze()),c=I([]),b=I(0),A=l=>{console.log("Pago validado",l),r.value.payments.push(l.token),c.value.push({token:l.token,amount:l.payment.amount,sequenceNumber:l.payment.sequenceNumber})},V=l=>{let P=c.value[l].token;c.value.splice(l,1);let z=r.value.payments.find(T=>T.token==P);if(!z)return;let D=r.value.payments.indexOf(z);r.value.payments.splice(D,1)},R=l=>{console.log("Seleccionando modulo",l),r.value.payments=[],p.value.forEach(g=>{g.value==l&&(b.value=g.price)})},h=async()=>{const l=await Bt(a.studentId,a.curriculumId);p.value=l.data},k=()=>c.value.reduce((g,P)=>g+parseInt(P.amount),0)>=b.value?null:"El monto pagado es menor al total",v=async()=>{r.value.studentId=a.studentId,r.value.curriculumId=a.curriculumId,u.value=!0,(await At(r.value)).status&&(s("success"),f.value=!1),u.value=!1,console.log("Guardando matricula",r.value)},m=()=>{h(),console.log("Inicializando formulario")};return he(f,l=>{l&&(r.value=Object.assign({},{...ze()}),c.value=[],m())}),(l,g)=>{const P=Ce,z=Pe,D=fe,T=xe("LnxIcon"),U=pe,J=ge,X=Ne,ee=me,le=ye;return $(),L(Q,null,[n(le,{show:f.value,"onUpdate:show":g[2]||(g[2]=_=>f.value=_)},{default:t(()=>[n(ee,{style:{width:"600px"},title:"MATRICULA EN MODULO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{default:t(()=>[n(X,{ref_key:"formRef",ref:C,model:r.value,rules:x.value,size:"large"},{default:t(()=>[n(J,{gutter:[16,16]},{default:t(()=>[n(D,{span:"24"},{default:t(()=>[n(z,{path:"moduleId",label:"Modulo"},{default:t(()=>[n(P,{value:r.value.moduleId,"onUpdate:value":[g[0]||(g[0]=_=>r.value.moduleId=_),R],placeholder:"Seleccionar modulo",options:p.value,"virtual-scroll":!1,clearable:"",filterable:""},null,8,["value","options"])]),_:1})]),_:1}),n(D,{span:"24"},{default:t(()=>[d("span",{role:"button",onClick:g[1]||(g[1]=_=>i.value=!0),class:"border border-dashed border-gray-300 p-4 rounded-sm flex items-center justify-center cursor-pointer text-gray-400 hover:bg-gray-50 font-bold hover:text-gray-500 mb-4"},[n(T,{class:"me-3","icon-name":"money-add",size:"20"}),g[4]||(g[4]=E(" Agregar pago "))]),d("table",no,[d("tbody",null,[($(!0),L(Q,null,te(c.value,(_,F)=>($(),L("tr",{key:F,class:"border-b border-gray-300 border-dashed px-4 py-2"},[d("td",lo,[n(U,{type:"error",size:"small",secondary:"",onClick:re=>V(F),"render-icon":G(ae)("trash")},null,8,["onClick","render-icon"]),d("i",ro,y(_.sequenceNumber),1)]),d("td",ao,"S/. "+y(_.amount),1)]))),128)),d("tr",so,[g[5]||(g[5]=d("td",{class:"px-4 py-2"},"Total pagado",-1)),d("td",io," S/. "+y(c.value.reduce((_,F)=>_+parseInt(F.amount),0)),1)]),d("tr",null,[g[6]||(g[6]=d("td",{class:"px-4 py-2"},"Total a pagar",-1)),d("td",uo," S/. "+y(b.value),1)])])]),d("div",co,y(k()),1)]),_:1}),n(D,{span:"24"},{default:t(()=>[n(U,{size:"large",type:"primary",onClick:v,block:"",loading:u.value},{default:t(()=>g[7]||(g[7]=[E(" Realizar matricula ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"]),n(De,{modelValue:i.value,"onUpdate:modelValue":g[3]||(g[3]=_=>i.value=_),studentId:a.studentId,onSuccess:A},null,8,["modelValue","studentId"])],64)}}}),mo={class:"p-4"},fo={class:"flex justify-end bg-gray-100 p-4 -mx-6 -mt-6 mb-4"},go={class:"text-lg font-semibold w-full text-blue-800 p-2"},vo={key:1},No=Z({__name:"EnrollmentStudentView",setup(e){const{screenSize:o}=st(),s=rt(),a=mt(),f=I(!1),u=I(!1),i=I(null),p=I(null),C=I([]),x=I(!0),r=I({}),c=I(!0),b=I(null),A=I(null),V=async m=>{let l=await Lt({id:m}),g=new Blob([l],{type:"application/pdf"}),P=window.URL.createObjectURL(g),z=document.getElementById("printFrame");z.src=P,z.onload=function(){var D;(D=z.contentWindow)==null||D.print()}},R=async()=>{const m=s.params.id;x.value=!0,r.value=await dt(m),x.value=!1},h=async()=>{var g;const m=s.params.id,l=(g=p.value)==null?void 0:g.id;c.value=!0,b.value=await Ft(m,i.value,l),c.value=!1},k=m=>{A.value=m,u.value=!0},v=async()=>{C.value=await it(),i.value=C.value[0].value,R(),h()};return at(()=>{v()}),(m,l)=>{const g=Ce,P=me,z=Et,D=Ee,T=ct,U=fe,J=Re,X=pe,ee=Mt,le=Ve,_=Me,F=Te,re=It,Oe=yt,Fe=ge;return $(),L(Q,null,[n(P,{segmented:{header:!0,footer:!0,content:!0}},{header:t(()=>l[4]||(l[4]=[d("h6",{style:{color:"#999",margin:"0"}},"Matricular estudiante",-1),E(" Nombre del estudiante ")])),"header-extra":t(()=>[n(g,{value:i.value,"onUpdate:value":[l[0]||(l[0]=w=>i.value=w),h],placeholder:"Seleccionar Plan de estudio",filterable:"",options:C.value,"virtual-scroll":!1,"default-value":1},null,8,["value","options"])]),action:t(()=>l[5]||(l[5]=[])),_:1}),d("div",mo,[n(Fe,{gutter:16},{default:t(()=>[n(U,{span:G(o)=="lg"?6:24},{default:t(()=>[n(P,{segmented:{header:!0,content:!0},title:"Información Personal",subtitle:"Datos del estudiante"},{default:t(()=>[n(T,{show:x.value},{default:t(()=>[n(D,{vertical:""},{default:t(()=>[n(z,{class:"small",label:"Tipo de estudiante"},{default:t(()=>{var w;return[E(y((w=r.value)==null?void 0:w.studentType),1)]}),_:1}),n(z,{class:"small",label:"Documento"},{default:t(()=>{var w,j;return[E(y((w=r.value)!=null&&w.documentNumber?(j=r.value)==null?void 0:j.documentNumber:"No registrado"),1)]}),_:1}),n(z,{class:"small",label:"Nombres"},{default:t(()=>{var w;return[E(y((w=r.value)==null?void 0:w.fullName),1)]}),_:1}),n(z,{class:"small",label:"Correo electronico"},{default:t(()=>{var w,j;return[E(y((w=r.value)!=null&&w.email?(j=r.value)==null?void 0:j.email:"No registrado"),1)]}),_:1}),n(z,{class:"small",label:"Telefono"},{default:t(()=>{var w,j;return[E(y((w=r.value)!=null&&w.phone?(j=r.value)==null?void 0:j.phone:"No registrado"),1)]}),_:1})]),_:1})]),_:1},8,["show"])]),_:1})]),_:1},8,["span"]),n(U,{span:G(o)=="lg"?18:24},{default:t(()=>[n(P,{segmented:{header:!0,content:!0},title:"Matricula"},{"header-extra":t(()=>[n(J,{bordered:!1,type:G(a).enrollment?"info":"error"},{default:t(()=>{var w;return[d("strong",null,y(G(a).enrollment?(w=G(a).enrollment)==null?void 0:w.name:"No habilitado"),1)]}),_:1},8,["type"])]),default:t(()=>[d("div",fo,[n(X,{type:"primary",onClick:l[1]||(l[1]=w=>f.value=!0),disabled:!G(a).enrollment},{default:t(()=>l[6]||(l[6]=[E(" Agregar Modulo ")])),_:1},8,["disabled"])]),n(Oe,null,{default:t(()=>{var w;return[($(!0),L(Q,null,te((w=b.value)==null?void 0:w.enrollments,j=>($(),K(re,{key:j.moduleId,name:j.moduleId},{header:t(()=>[d("h2",go,y(j.moduleName),1)]),default:t(()=>[n(F,{hoverable:"",clickable:""},{default:t(()=>[($(!0),L(Q,null,te(j.courses,H=>($(),K(_,{key:H.id},{default:t(()=>[n(le,{title:`${H.code} - ${H.name}`},{"header-extra":t(()=>[H.enrollmentGroups.length==0||Math.max(...H.enrollmentGroups.map(B=>B.grade))<11&&H.enrollmentGroups.filter(B=>B.groupStatus=="ABIERTO").length==0?($(),K(X,{key:0,type:"primary",onClick:B=>k(H.id)},{default:t(()=>l[7]||(l[7]=[E(" Matricular ")])),_:2},1032,["onClick"])):ie("",!0)]),description:t(()=>[n(D,{size:"small"},{default:t(()=>[n(J,{bordered:!1,size:"small"},{default:t(()=>[E(" Area: "+y(H.area),1)]),_:2},1024)]),_:2},1024)]),default:t(()=>[H.enrollmentGroups.length>0?($(),K(ee,{key:0,"single-line":!1},{default:t(()=>[l[9]||(l[9]=d("thead",null,[d("tr",null,[d("th",null,"Periodo"),d("th",null,"Grupo"),d("th",null,"Modalidad"),d("th",null,"Estado"),d("th",null,"Nota"),d("th",null,"Acciones")])],-1)),d("tbody",null,[($(!0),L(Q,null,te(H.enrollmentGroups,B=>{var we;return $(),L("tr",null,[d("td",null,[((we=G(a).enrollment)==null?void 0:we.name)==B.period?($(),K(J,{key:0,type:"info"},{default:t(()=>[E(y(B.period),1)]),_:2},1024)):($(),L("span",vo,y(B.period),1))]),d("td",null,y(B.groupName),1),d("td",null,y(B.groupModality),1),d("td",null,y(B.groupStatus),1),d("td",null,y(B.grade),1),d("td",null,[B.groupStatus==="ABIERTO"||B.groupStatus==="CERRADO"?($(),K(X,{key:0,"render-icon":G(ae)("printer"),onClick:bo=>V(B.id)},{default:t(()=>l[8]||(l[8]=[E(" Imprimir ficha ")])),_:2},1032,["render-icon","onClick"])):ie("",!0)])])}),256))])]),_:2},1024)):ie("",!0)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]}),_:1})]),_:1})]),_:1},8,["span"])]),_:1})]),l[10]||(l[10]=d("iframe",{id:"printFrame",style:{display:"none"}},null,-1)),r.value?($(),K(po,{key:0,modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=w=>f.value=w),studentId:r.value.id,curriculumId:i.value,onSuccess:h},null,8,["modelValue","studentId","curriculumId"])):ie("",!0),n(to,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=w=>u.value=w),studentId:r.value.id,curriculumId:i.value,courseId:A.value,onSuccess:h},null,8,["modelValue","studentId","curriculumId","courseId"])],64)}}});export{No as default};
