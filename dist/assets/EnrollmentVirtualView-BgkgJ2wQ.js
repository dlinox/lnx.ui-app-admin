import{d as x,aD as j,a9 as $,ad as q,ae as _,aa as y,h as H,r as n,aJ as J,aG as T,_ as E,af as S,ac as i,aK as K,ab as c,aH as Q,a3 as X,a8 as Y,aB as Z}from"./index-DwV6zJCX.js";import{d as ee,e as te,i as ae}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-8dhxPFRK.js";import{i as G}from"./DataTable.types-BEg5m_To.js";import{a as oe}from"./selectables.services-rqDjzlhf.js";import"./studentType.services-FE2g26JP.js";import"./student.services-CbdSJW83.js";import"./documentType.services-DDy_5MCJ.js";import{u as ne}from"./period.stores-DWdKCjN9.js";import{d as V}from"./debounce.utils-DqPPCsFD.js";import{_ as le,a as se}from"./Col-BkVWW8vc.js";import{_ as re}from"./Select-B-XafpkT.js";import{_ as ie}from"./Input-DldL4MyO.js";import{_ as ue}from"./DataTable-DqW2qosf.js";import"./icon.utils-DutMd2qr.js";import"./Alert-ByHfwsqL.js";import"./FormItem-CNNyqOT9.js";import"./get-CqIzH_zz.js";import"./ListItem-Ch3wxL4j.js";import"./Thing-9qserMdX.js";import"./Tag-tDmUe03M.js";import"./composables-OPWM5oN5.js";import"./Dropdown-CxNUQKFj.js";import"./Popover-BpepRpqO.js";import"./use-merged-state-B_X6BK0G.js";import"./Suffix-B52V2l9z.js";import"./Tooltip-B687EG_W.js";import"./get-slot-Bk_rJcZu.js";const pe=x({__name:"DataTableOp",props:{item:{}},emits:["openForm","success"],setup(o,{emit:u}){const a=u,p=ne(),l=async()=>{};return j(()=>{l()}),(d,e)=>{var s;return((s=_(p).enrollment)==null?void 0:s.period)==d.item.period?(y(),$(ee,{key:0,item:d.item,onResetEnrollment:e[0]||(e[0]=r=>a("openForm",r)),onChangeGroup:e[1]||(e[1]=r=>a("openForm",r)),onReserveEnrollment:e[2]||(e[2]=r=>a("success")),onCancelEnrollment:e[3]||(e[3]=r=>a("success"))},null,8,["item"])):q("",!0)}}}),ce=(o,u)=>[{title:"Ops.",key:"ops",width:"100px",fixed:"left",render(a){const p=a;return H(pe,{onOpenForm:()=>o(p),onSuccess:()=>u(),item:p},{default:()=>"Editar"})}},{title:"Período",key:"period",minWidth:"120"},{title:"Estudiante",key:"group-student",children:[{title:"Nombre",key:"student",minWidth:"250px"},{title:"Estado de mat.",key:"enrollmentStatus",minWidth:"150px"}]},{title:"Grupo",key:"group-group",children:[{title:"Módulo",key:"module",minWidth:"200px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Grupo",key:"group",minWidth:"100px"},{title:"Modalidad",key:"modality",minWidth:"100px"}]}],de=(o=G())=>({page:o.page,total:o.total,pageSize:o.pageSize,pageCount:o.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${o.total} registros`}}),me={style:{"border-bottom":"1px solid #e9e9e9"}},_e=x({__name:"DataTable",setup(o){const u=n(!1),a=n(!1),p=n([]),l=n(!1),d=n([]),e=J({...G()}),s=n({search:null,page:e.page,pageSize:e.pageSize,filters:{periodId:null}}),r=n({}),b=n(null),k=n(null),w=n(null),I=n(null),z=n(!1),D=t=>{b.value=t.courseId,w.value=t.studentId,I.value=t.curriculumId,k.value=t,z.value=t.isSpecial,u.value=!0},g=async()=>{s.value.page=1,await f()},B=ce(D,g),P=async t=>{a.value=!0,p.value=await oe(t),a.value=!1},M=V(t=>{P(t)},400),f=async()=>{l.value=!0,r.value=await ae(s.value),d.value=r.value.data,e.total=r.value.total,e.pageSize=r.value.per_page,e.page=r.value.current_page,e.pageCount=r.value.last_page,l.value=!1},N=V(()=>{g()},400),W=async t=>{s.value.page=t,await f()},A=async t=>{s.value.page=1,s.value.pageSize=t,await f()},U=async()=>{await P(""),await f()},F=n(t=>t.enrollmentModality=="VIRTUAL"?"enrollment-virtual":"");return U(),(t,m)=>{const R=re,h=se,O=ie,C=le,L=ue;return y(),T(E,null,[S("div",me,[i(C,{gutter:12,class:"p-4 flex justify-between"},{default:c(()=>[i(h,{span:6},{default:c(()=>[i(R,{value:s.value.filters.periodId,"onUpdate:value":[m[0]||(m[0]=v=>s.value.filters.periodId=v),g],placeholder:"Seleccionar Periodo Académico",filterable:"",options:p.value,loading:a.value,clearable:"",remote:"",size:"large","virtual-scroll":!1,onSearch:_(M)},null,8,["value","options","loading","onSearch"])]),_:1}),i(h,{span:12},{default:c(()=>[i(O,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":m[1]||(m[1]=v=>s.value.search=v),onInput:_(N),clearable:""},{suffix:c(()=>[i(Q,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),i(C,null,{default:c(()=>[i(h,{span:24},{default:c(()=>[i(L,{key:"id",remote:"",size:"small","row-class-name":F.value,"single-line":!1,columns:_(B),data:d.value,pagination:_(de)(e),"pagination-show-size-picker":!0,loading:l.value,"onUpdate:page":W,"onUpdate:pageSize":A},null,8,["row-class-name","columns","data","pagination","loading"])]),_:1})]),_:1}),K(t.$slots,"extra",{reLoadDataTable:g},void 0,!0)]),i(te,{modelValue:u.value,"onUpdate:modelValue":m[2]||(m[2]=v=>u.value=v),studentId:w.value,curriculumId:I.value,courseId:b.value,isSpecial:z.value,enrollmetGroup:k.value,onSuccess:g},null,8,["modelValue","studentId","curriculumId","courseId","isSpecial","enrollmetGroup"])],64)}}}),ge=(o,u)=>{const a=o.__vccOpts||o;for(const[p,l]of u)a[p]=l;return a},ve=ge(_e,[["__scopeId","data-v-e413ed30"]]),Le=x({__name:"EnrollmentVirtualView",setup(o){const{hasPermission:u}=X();return(async()=>{})(),(p,l)=>{const d=Z,e=Y("AppNotAuthorization");return _(u)(["enrollment.edit"])?(y(),T(E,{key:0},[i(d,{segmented:{header:!0,content:!0}},{header:c(()=>l[0]||(l[0]=[S("span",{class:"text-sm text-slate-500"}," Gestión de matrículas ",-1),S("h5",{class:"text-lg font-bold text-slate-800"},"Matrículas",-1)])),"header-extra":c(()=>l[1]||(l[1]=[])),_:1}),i(ve)],64)):(y(),$(e,{key:1}))}}});export{Le as default};
