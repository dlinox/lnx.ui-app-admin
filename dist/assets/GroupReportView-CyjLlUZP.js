import{d as ue,a as D,_ as de}from"./selectables.services-BaLMt3qD.js";import{b as ie,c as ce,d as pe}from"./report.services-RbXjRrkK.js";import{r as k}from"./icon.utils-Cdau1lmo.js";import{d as H}from"./debounce.utils-DqPPCsFD.js";import{d as U,e as N,r,j as L,a8 as M,a9 as $,aa as e,ab as o,aA as A,az as v,ad as V,aF as T,_ as q,b2 as me,ae as O,ag as I,af as F,aH as J}from"./index--Fiy2I4t.js";import{_ as _e}from"./Divider-Dpgye3j3.js";import{_ as K,a as Q}from"./Col-Bhohzmu6.js";import{_ as W}from"./Select-JHMV7BBf.js";import{a as X,_ as Y}from"./ListItem-Bx3-mArE.js";import{_ as Z}from"./Thing-2BjOqH8k.js";import{_ as fe}from"./Tag-CmlrV2vM.js";import{_ as ee}from"./Space-CHReEK5D.js";import"./Popover-_nZkNipR.js";import"./get-BxuUz3sF.js";import"./use-merged-state-Hew3oQWq.js";import"./Suffix-Cejid3DV.js";import"./get-slot-Bk_rJcZu.js";const ve=U({__name:"Enrollments",props:{modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(h,{emit:w}){const g=w,b=h,u=N({get:()=>b.modelValue,set:s=>g("update:modelValue",s)}),_=r(!1),n=r(!1),f=r([]),d=r([]),y=r([]),a=r({periodId:null,curriculumId:null,moduleId:null}),x=async s=>{_.value=!0,await ie({groupId:s}),_.value=!1},i=async s=>{n.value=!0,d.value=await D(s),n.value=!1},c=H(s=>{i(s)},400),p=async s=>{y.value=await ue(s)},S=async()=>{f.value=await ce(a.value)},P=()=>{i("")};return L(u,s=>{s&&P()}),(s,t)=>{const G=F,B=_e,C=W,m=Q,oe=fe,ne=Z,R=ee,te=Y,le=X,ae=K,se=A,re=J;return $(),M(re,{show:u.value,"onUpdate:show":t[5]||(t[5]=l=>u.value=l)},{default:e(()=>[o(se,{style:{width:"800px"},title:"Generar Reporte - Matrículas",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(G,{"render-icon":V(k)("close-circle"),onClick:t[0]||(t[0]=l=>u.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(R,{justify:"end"},{default:e(()=>[o(G,{tertiary:"",size:"large",onClick:t[4]||(t[4]=l=>u.value=!1),disabled:_.value},{default:e(()=>t[8]||(t[8]=[v(" Cancelar ")])),_:1},8,["disabled"])]),_:1})]),default:e(()=>[o(B,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:e(()=>t[6]||(t[6]=[v(" Buscar estudiantes ")])),_:1}),o(ae,{gutter:"16"},{default:e(()=>[o(m,{span:"8"},{default:e(()=>[o(C,{value:a.value.periodId,"onUpdate:value":[t[1]||(t[1]=l=>a.value.periodId=l),S],placeholder:"Seleccionar Periodo Académico",filterable:"",options:d.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:V(c)},null,8,["value","options","onSearch"])]),_:1}),o(m,{span:"8"},{default:e(()=>[o(C,{disabled:a.value.periodId===null,value:a.value.curriculumId,"onUpdate:value":[t[2]||(t[2]=l=>a.value.curriculumId=l),p],placeholder:"Seleccionar Plan de estudio",filterable:"",options:s.curriculumOptions,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(m,{span:"8"},{default:e(()=>[o(C,{disabled:a.value.curriculumId===null||a.value.periodId===null,value:a.value.moduleId,"onUpdate:value":[t[3]||(t[3]=l=>a.value.moduleId=l),S],placeholder:"Seleccionar Módulo",filterable:"",options:y.value,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(m,{span:"24",class:"border-t border-t-gray-200 mt-2"},{default:e(()=>[o(le,{hoverable:"",clickable:"",style:{"max-height":"300px","overflow-y":"auto"}},{default:e(()=>[($(!0),T(q,null,me(f.value,l=>($(),M(te,{style:{margin:"0 1rem"},key:l.id},{default:e(()=>[o(ne,null,{header:e(()=>[o(oe,{bordered:!1,class:"me-2"},{default:e(()=>[v(I(l.status),1)]),_:2},1024),v(" "+I(l.name)+" - "+I(l.course),1)]),default:e(()=>{var E,j,z;return[O("i",null,I((E=l.schedule)==null?void 0:E.days)+" - "+I((j=l.schedule)==null?void 0:j.startHour)+" a "+I((z=l.schedule)==null?void 0:z.endHour),1)]}),_:2},1024),o(R,{align:"center",justify:"end"},{default:e(()=>[o(G,{secondary:"",class:"ms-2",type:"error","render-icon":V(k)("document-download"),onClick:E=>x(l.id)},{default:e(()=>t[7]||(t[7]=[v(" PDF ")])),_:2},1032,["render-icon","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),ge=U({__name:"EnabledGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(h,{emit:w}){const g=w,b=h,u=N({get:()=>b.modelValue,set:c=>g("update:modelValue",c)}),_=r(!1),n=r(!1),f=r([]),d=r({periodId:null}),y=async()=>{_.value=!0,await pe({periodId:d.value.periodId}),_.value=!1},a=async c=>{n.value=!0,f.value=await D(c),n.value=!1},x=H(c=>{a(c)},400),i=()=>{a("")};return L(u,c=>{c&&i()}),(c,p)=>{const S=F,P=W,s=Q,t=K,G=ee,B=A,C=J;return $(),M(C,{show:u.value,"onUpdate:show":p[2]||(p[2]=m=>u.value=m)},{default:e(()=>[o(B,{style:{width:"800px"},title:"Generar Reporte - Grupos Aperturados",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(S,{"render-icon":V(k)("close-circle"),onClick:p[0]||(p[0]=m=>u.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(G,{justify:"center"},{default:e(()=>[o(S,{disabled:d.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:_.value,"render-icon":V(k)("document-download"),onClick:y},{default:e(()=>p[3]||(p[3]=[v(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(s,{span:"24"},{default:e(()=>[o(P,{class:"mx-auto",style:{width:"300px"},value:d.value.periodId,"onUpdate:value":p[1]||(p[1]=m=>d.value.periodId=m),placeholder:"Seleccionar Periodo Académico",filterable:"",options:f.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:V(x)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ue=U({__name:"GroupReportView",setup(h){const w=r([]),g=r(!1),b=r(!1);return(async()=>{w.value=await de()})(),(_,n)=>{const f=F,d=Z,y=Y,a=X,x=A;return $(),T(q,null,[o(x,{segmented:{header:!0,content:!0}},{header:e(()=>n[4]||(n[4]=[O("span",{class:"text-sm text-slate-500"}," Reportes ",-1),O("h5",{class:"text-lg font-bold text-slate-800"},"Reporte de grupos",-1)])),default:e(()=>[o(a,null,{default:e(()=>[o(y,null,{suffix:e(()=>[o(f,{onClick:n[0]||(n[0]=i=>g.value=!0)},{default:e(()=>n[5]||(n[5]=[v(" Generar reporte ")])),_:1})]),default:e(()=>[o(d,{title:"Matrículas",description:"Estudiantes matriculados en un grupo"})]),_:1}),o(y,null,{suffix:e(()=>[o(f,{onClick:n[1]||(n[1]=i=>b.value=!0)},{default:e(()=>n[6]||(n[6]=[v(" Generar reporte ")])),_:1})]),default:e(()=>[o(d,{title:"Grupos Aperturados",description:"Grupos aperturados por periodo"})]),_:1})]),_:1})]),_:1}),o(ve,{modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=i=>g.value=i),curriculumOptions:w.value},null,8,["modelValue","curriculumOptions"]),o(ge,{modelValue:b.value,"onUpdate:modelValue":n[3]||(n[3]=i=>b.value=i)},null,8,["modelValue"])],64)}}});export{Ue as default};
