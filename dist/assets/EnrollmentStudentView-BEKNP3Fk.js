import{d as Z,h as N,a as ve,z as O,A as W,B as M,x as S,W as Fe,V as ze,u as ie,r as I,e as q,D as oe,p as Be,f as ue,I as be,Q as Le,M as ae,aJ as Ue,G as ke,n as je,v as qe,a0 as We,a1 as Ge,Z as He,i as Ke,ar as Qe,ay as we,U as Ze,aK as Je,O as Y,aL as se,aM as Xe,aN as Ye,aD as ge,an as et,g as _e,a8 as he,a9 as k,a4 as K,a6 as e,aa as t,ae as E,aO as tt,ab as G,aP as ot,ag as ce,ai as pe,aj as xe,al as L,ac as s,ao as y,_ as Q,aG as te,aQ as nt,aR as lt,a5 as rt,aS as at,ad as de}from"./index-DYxGiGyZ.js";import{h as Ie,r as re}from"./DataTable.types-O1f2gI-n.js";import{u as st}from"./useBreakpoints-9dF7HQ25.js";import{_ as dt,a as it,b as ut,c as ct,d as pt,e as mt}from"./enrollment.services-B2kXsMop.js";import{h as ft}from"./student.services-CeVGBjsK.js";import{_ as gt}from"./selectables.services-CHFlFHJd.js";import{_ as vt,a as bt}from"./Spin-1pwTogqg.js";import{_ as _t,a as Pe,b as $e}from"./FormItem-khv4guBG.js";import{_ as me,c as ye,b as fe,N as Ne,a as Re}from"./Col-1P6V_qQb.js";import{_ as Ee,a as Te,b as Ve}from"./Thing-Cdw-_aHX.js";import{u as ht}from"./period.stores-C41wNZRV.js";import{u as xt}from"./get-B5_b6rDM.js";import{C as yt}from"./ChevronRight-Dw_frzul.js";const Ct=Z({name:"ChevronLeft",render(){return N("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}});function wt(n){const{fontWeight:l,textColor1:i,textColor2:a,textColorDisabled:f,dividerColor:u,fontSize:d}=n;return{titleFontSize:d,titleFontWeight:l,dividerColor:u,titleTextColor:i,titleTextColorDisabled:f,fontSize:d,textColor:a,arrowColor:a,arrowColorDisabled:f,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}}const It={name:"Collapse",common:ve,self:wt},St=O("collapse","width: 100%;",[O("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[W("disabled",[M("header","cursor: not-allowed;",[M("header-main",`
 color: var(--n-title-text-color-disabled);
 `),O("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),O("collapse-item","margin-left: 32px;"),S("&:first-child","margin-top: 0;"),S("&:first-child >",[M("header","padding-top: 0;")]),W("left-arrow-placement",[M("header",[O("collapse-item-arrow","margin-right: 4px;")])]),W("right-arrow-placement",[M("header",[O("collapse-item-arrow","margin-left: 4px;")])]),M("content-wrapper",[M("content-inner","padding-top: 16px;"),Fe({duration:"0.15s"})]),W("active",[M("header",[W("active",[O("collapse-item-arrow","transform: rotate(90deg);")])])]),S("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),ze("disabled",[W("trigger-area-main",[M("header",[M("header-main","cursor: pointer;"),O("collapse-item-arrow","cursor: default;")])]),W("trigger-area-arrow",[M("header",[O("collapse-item-arrow","cursor: pointer;")])]),W("trigger-area-extra",[M("header",[M("header-extra","cursor: pointer;")])])]),M("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 `,[M("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),M("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),O("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),zt=Object.assign(Object.assign({},oe.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},triggerAreas:{type:Array,default:()=>["main","extra","arrow"]},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),Me=Le("n-collapse"),kt=Z({name:"Collapse",props:zt,slots:Object,setup(n,{slots:l}){const{mergedClsPrefixRef:i,inlineThemeDisabled:a,mergedRtlRef:f}=ie(n),u=I(n.defaultExpandedNames),d=q(()=>n.expandedNames),p=xt(d,u),C=oe("Collapse","-collapse",St,It,n,i);function x(R){const{"onUpdate:expandedNames":h,onUpdateExpandedNames:P,onExpandedNamesChange:v}=n;P&&ae(P,R),h&&ae(h,R),v&&ae(v,R),u.value=R}function r(R){const{onItemHeaderClick:h}=n;h&&ae(h,R)}function c(R,h,P){const{accordion:v}=n,{value:m}=p;if(v)R?(x([h]),r({name:h,expanded:!0,event:P})):(x([]),r({name:h,expanded:!1,event:P}));else if(!Array.isArray(m))x([h]),r({name:h,expanded:!0,event:P});else{const o=m.slice(),g=o.findIndex($=>h===$);~g?(o.splice(g,1),x(o),r({name:h,expanded:!1,event:P})):(o.push(h),x(o),r({name:h,expanded:!0,event:P}))}}Be(Me,{props:n,mergedClsPrefixRef:i,expandedNamesRef:p,slots:l,toggleItem:c});const b=ue("Collapse",f,i),A=q(()=>{const{common:{cubicBezierEaseInOut:R},self:{titleFontWeight:h,dividerColor:P,titlePadding:v,titleTextColor:m,titleTextColorDisabled:o,textColor:g,arrowColor:$,fontSize:z,titleFontSize:D,arrowColorDisabled:T,itemMargin:U}}=C.value;return{"--n-font-size":z,"--n-bezier":R,"--n-text-color":g,"--n-divider-color":P,"--n-title-padding":v,"--n-title-font-size":D,"--n-title-text-color":m,"--n-title-text-color-disabled":o,"--n-title-font-weight":h,"--n-arrow-color":$,"--n-arrow-color-disabled":T,"--n-item-margin":U}}),V=a?be("collapse",void 0,A,n):void 0;return{rtlEnabled:b,mergedTheme:C,mergedClsPrefix:i,cssVars:a?void 0:A,themeClass:V==null?void 0:V.themeClass,onRender:V==null?void 0:V.onRender}},render(){var n;return(n=this.onRender)===null||n===void 0||n.call(this),N("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),Pt=Z({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(n){return{onceTrue:Ue(ke(n,"show"))}},render(){return N(We,null,{default:()=>{const{show:n,displayDirective:l,onceTrue:i,clsPrefix:a}=this,f=l==="show"&&i,u=N("div",{class:`${a}-collapse-item__content-wrapper`},N("div",{class:`${a}-collapse-item__content-inner`},this.$slots));return f?je(u,[[qe,n]]):n?u:null}})}}),$t={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},Nt=Z({name:"CollapseItem",props:$t,setup(n){const{mergedRtlRef:l}=ie(n),i=Ge(),a=He(()=>{var c;return(c=n.name)!==null&&c!==void 0?c:i}),f=Ke(Me);f||Qe("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:u,props:d,mergedClsPrefixRef:p,slots:C}=f,x=q(()=>{const{value:c}=u;if(Array.isArray(c)){const{value:b}=a;return!~c.findIndex(A=>A===b)}else if(c){const{value:b}=a;return b!==c}return!0});return{rtlEnabled:ue("Collapse",l,p),collapseSlots:C,randomName:i,mergedClsPrefix:p,collapsed:x,triggerAreas:ke(d,"triggerAreas"),mergedDisplayDirective:q(()=>{const{displayDirective:c}=n;return c||d.displayDirective}),arrowPlacement:q(()=>d.arrowPlacement),handleClick(c){let b="main";Ie(c,"arrow")&&(b="arrow"),Ie(c,"extra")&&(b="extra"),d.triggerAreas.includes(b)&&f&&!n.disabled&&f.toggleItem(x.value,a.value,c)}}},render(){const{collapseSlots:n,$slots:l,arrowPlacement:i,collapsed:a,mergedDisplayDirective:f,mergedClsPrefix:u,disabled:d,triggerAreas:p}=this,C=we(l.header,{collapsed:a},()=>[this.title]),x=l["header-extra"]||n["header-extra"],r=l.arrow||n.arrow;return N("div",{class:[`${u}-collapse-item`,`${u}-collapse-item--${i}-arrow-placement`,d&&`${u}-collapse-item--disabled`,!a&&`${u}-collapse-item--active`,p.map(c=>`${u}-collapse-item--trigger-area-${c}`)]},N("div",{class:[`${u}-collapse-item__header`,!a&&`${u}-collapse-item__header--active`]},N("div",{class:`${u}-collapse-item__header-main`,onClick:this.handleClick},i==="right"&&C,N("div",{class:`${u}-collapse-item-arrow`,key:this.rtlEnabled?0:1,"data-arrow":!0},we(r,{collapsed:a},()=>[N(Ze,{clsPrefix:u},{default:()=>this.rtlEnabled?N(Ct,null):N(yt,null)})])),i==="left"&&C),Je(x,{collapsed:a},c=>N("div",{class:`${u}-collapse-item__header-extra`,onClick:this.handleClick,"data-extra":!0},c))),N(Pt,{clsPrefix:u,displayDirective:f,show:!a},l))}});function Rt(n){const{textColor2:l,textColor3:i,fontSize:a,fontWeight:f}=n;return{labelFontSize:a,labelFontWeight:f,valueFontWeight:f,valueFontSize:"24px",labelTextColor:i,valuePrefixTextColor:l,valueSuffixTextColor:l,valueTextColor:l}}const Et={name:"Statistic",common:ve,self:Rt},Tt={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"};function Vt(n){const{dividerColor:l,cardColor:i,modalColor:a,popoverColor:f,tableHeaderColor:u,tableColorStriped:d,textColor1:p,textColor2:C,borderRadius:x,fontWeightStrong:r,lineHeight:c,fontSizeSmall:b,fontSizeMedium:A,fontSizeLarge:V}=n;return Object.assign(Object.assign({},Tt),{fontSizeSmall:b,fontSizeMedium:A,fontSizeLarge:V,lineHeight:c,borderRadius:x,borderColor:Y(i,l),borderColorModal:Y(a,l),borderColorPopover:Y(f,l),tdColor:i,tdColorModal:a,tdColorPopover:f,tdColorStriped:Y(i,d),tdColorStripedModal:Y(a,d),tdColorStripedPopover:Y(f,d),thColor:Y(i,u),thColorModal:Y(a,u),thColorPopover:Y(f,u),thTextColor:p,tdTextColor:C,thFontWeight:r})}const Mt={name:"Table",common:ve,self:Vt},At=O("statistic",[M("label",`
 font-weight: var(--n-label-font-weight);
 transition: .3s color var(--n-bezier);
 font-size: var(--n-label-font-size);
 color: var(--n-label-text-color);
 `),O("statistic-value",`
 margin-top: 4px;
 font-weight: var(--n-value-font-weight);
 `,[M("prefix",`
 margin: 0 4px 0 0;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-prefix-text-color);
 `,[O("icon",{verticalAlign:"-0.125em"})]),M("content",`
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-text-color);
 `),M("suffix",`
 margin: 0 0 0 4px;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-suffix-text-color);
 `,[O("icon",{verticalAlign:"-0.125em"})])])]),Dt=Object.assign(Object.assign({},oe.props),{tabularNums:Boolean,label:String,value:[String,Number]}),Ot=Z({name:"Statistic",props:Dt,slots:Object,setup(n){const{mergedClsPrefixRef:l,inlineThemeDisabled:i,mergedRtlRef:a}=ie(n),f=oe("Statistic","-statistic",At,Et,n,l),u=ue("Statistic",a,l),d=q(()=>{const{self:{labelFontWeight:C,valueFontSize:x,valueFontWeight:r,valuePrefixTextColor:c,labelTextColor:b,valueSuffixTextColor:A,valueTextColor:V,labelFontSize:R},common:{cubicBezierEaseInOut:h}}=f.value;return{"--n-bezier":h,"--n-label-font-size":R,"--n-label-font-weight":C,"--n-label-text-color":b,"--n-value-font-weight":r,"--n-value-font-size":x,"--n-value-prefix-text-color":c,"--n-value-suffix-text-color":A,"--n-value-text-color":V}}),p=i?be("statistic",void 0,d,n):void 0;return{rtlEnabled:u,mergedClsPrefix:l,cssVars:i?void 0:d,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var n;const{mergedClsPrefix:l,$slots:{default:i,label:a,prefix:f,suffix:u}}=this;return(n=this.onRender)===null||n===void 0||n.call(this),N("div",{class:[`${l}-statistic`,this.themeClass,this.rtlEnabled&&`${l}-statistic--rtl`],style:this.cssVars},se(a,d=>N("div",{class:`${l}-statistic__label`},this.label||d)),N("div",{class:`${l}-statistic-value`,style:{fontVariantNumeric:this.tabularNums?"tabular-nums":""}},se(f,d=>d&&N("span",{class:`${l}-statistic-value__prefix`},d)),this.value!==void 0?N("span",{class:`${l}-statistic-value__content`},this.value):se(i,d=>d&&N("span",{class:`${l}-statistic-value__content`},d)),se(u,d=>d&&N("span",{class:`${l}-statistic-value__suffix`},d))))}}),Ft=S([O("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[S("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[S("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),S("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[S("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),W("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[S("tr",[S("&:last-child",[S("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),W("single-line",[S("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),S("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),W("single-column",[S("tr",[S("&:not(:last-child)",[S("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),W("striped",[S("tr:nth-of-type(even)",[S("td","background-color: var(--n-td-color-striped)")])]),ze("bottom-bordered",[S("tr",[S("&:last-child",[S("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),Xe(O("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[S("th",`
 background-color: var(--n-th-color-modal);
 `),S("td",`
 background-color: var(--n-td-color-modal);
 `)])),Ye(O("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[S("th",`
 background-color: var(--n-th-color-popover);
 `),S("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),Bt=Object.assign(Object.assign({},oe.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),Lt=Z({name:"Table",props:Bt,setup(n){const{mergedClsPrefixRef:l,inlineThemeDisabled:i,mergedRtlRef:a}=ie(n),f=oe("Table","-table",Ft,Mt,n,l),u=ue("Table",a,l),d=q(()=>{const{size:C}=n,{self:{borderColor:x,tdColor:r,tdColorModal:c,tdColorPopover:b,thColor:A,thColorModal:V,thColorPopover:R,thTextColor:h,tdTextColor:P,borderRadius:v,thFontWeight:m,lineHeight:o,borderColorModal:g,borderColorPopover:$,tdColorStriped:z,tdColorStripedModal:D,tdColorStripedPopover:T,[ge("fontSize",C)]:U,[ge("tdPadding",C)]:J,[ge("thPadding",C)]:X},common:{cubicBezierEaseInOut:ee}}=f.value;return{"--n-bezier":ee,"--n-td-color":r,"--n-td-color-modal":c,"--n-td-color-popover":b,"--n-td-text-color":P,"--n-border-color":x,"--n-border-color-modal":g,"--n-border-color-popover":$,"--n-border-radius":v,"--n-font-size":U,"--n-th-color":A,"--n-th-color-modal":V,"--n-th-color-popover":R,"--n-th-font-weight":m,"--n-th-text-color":h,"--n-line-height":o,"--n-td-padding":J,"--n-th-padding":X,"--n-td-color-striped":z,"--n-td-color-striped-modal":D,"--n-td-color-striped-popover":T}}),p=i?be("table",q(()=>n.size[0]),d,n):void 0;return{rtlEnabled:u,mergedClsPrefix:l,cssVars:i?void 0:d,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var n;const{mergedClsPrefix:l}=this;return(n=this.onRender)===null||n===void 0||n.call(this),N("table",{class:[`${l}-table`,this.themeClass,{[`${l}-table--rtl`]:this.rtlEnabled,[`${l}-table--bottom-bordered`]:this.bottomBordered,[`${l}-table--bordered`]:this.bordered,[`${l}-table--single-line`]:this.singleLine,[`${l}-table--single-column`]:this.singleColumn,[`${l}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),Ut=()=>({studentId:null,groupId:null,payments:[]}),jt=async n=>{try{return(await et().post("/payment/validate",n)).data.data}catch{return{token:null}}},qt=()=>({studentId:null,amount:null,date:null,sequenceNumber:null,paymentTypeId:7}),Wt=n=>({studentId:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}],amount:[{required:!0,trigger:["blur","input"],message:"Obligatorio"},{message:"Debe ser un número",trigger:["blur","input"],validator:(l,i)=>{if(i){if(!/^\d*\.?\d*$/.test(i))return new Error("Debe ser un número")}else return new Error("Obligatorio");return!0}}],date:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}],sequenceNumber:[{required:!0,trigger:["blur","input"],message:"Obligatorio"},{message:n===7?"Debe tener 7 digitos":"Debe tener 6 digitos",trigger:["blur","input"],validator:(l,i)=>{if(i)if(/^\d*$/.test(i)){if(n===7&&i.length!==7)return new Error("Debe tener 7 digitos");if(n===9&&i.length!==6)return new Error("Debe tener 6 digitos")}else return new Error("Debe ser un número");else return new Error("Obligatorio");return!0}}],paymentTypeId:[{type:"number",required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),Ae=Z({__name:"PaymentForm",props:{modelValue:{type:Boolean},studentId:{}},emits:["update:modelValue","success"],setup(n,{emit:l}){const i=l,a=n,f=I(!1),u=q({get:()=>a.modelValue,set:c=>i("update:modelValue",c)}),d=I(null),p=I({}),C=q(()=>Wt(p.value.paymentTypeId)),x=async()=>{if(d.value&&!await d.value.validate())return;p.value.studentId=a.studentId,f.value=!0;const c=await jt(p.value);c.token!==null&&(u.value=!1,i("success",{token:c.token,payment:p.value})),f.value=!1,console.log("Validando pago",c)},r=()=>{console.log("Inicializando formulario"),p.value=Object.assign({},qt())};return _e(u,c=>{c&&r()}),(c,b)=>{const A=he("LnxIcon"),V=ot,R=vt,h=_t,P=Pe,v=me,m=ye,o=ce,g=fe,$=$e,z=pe,D=xe;return k(),K(D,{show:u.value,"onUpdate:show":b[4]||(b[4]=T=>u.value=T)},{default:e(()=>[t(z,{style:{width:"500px"},title:"REGISTRAR PAGO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{default:e(()=>[t(R,{title:"¡Importante!",type:"default",class:"mb-4"},{icon:e(()=>[t(V,null,{default:e(()=>[t(A,{"icon-name":"information",size:"20"})]),_:1})]),default:e(()=>[b[5]||(b[5]=E(" Solo se validan pagos realizados, con un día de anticipación. "))]),_:1}),t($,{ref_key:"formRef",ref:d,model:p.value,rules:C.value,size:"large",onKeydown:tt(x,["enter"])},{default:e(()=>[t(g,{gutter:[16,16]},{default:e(()=>[t(v,{span:"12"},{default:e(()=>[t(P,{path:"amount",label:"Monto"},{default:e(()=>[t(h,{value:p.value.amount,"onUpdate:value":b[0]||(b[0]=T=>p.value.amount=T)},null,8,["value"])]),_:1})]),_:1}),t(v,{span:"12"},{default:e(()=>[t(P,{path:"date",label:"Fecha de pago"},{default:e(()=>[t(h,{placeholder:"",type:"date",value:p.value.date,"onUpdate:value":b[1]||(b[1]=T=>p.value.date=T)},null,8,["value"])]),_:1})]),_:1}),t(v,{span:"12"},{default:e(()=>[t(P,{path:"sequenceNumber",label:"Secuencia"},{default:e(()=>[t(h,{value:p.value.sequenceNumber,"onUpdate:value":b[2]||(b[2]=T=>p.value.sequenceNumber=T)},null,8,["value"])]),_:1})]),_:1}),t(v,{span:"12"},{default:e(()=>[t(P,{path:"paymentTypeId",label:"Metodo de pago"},{default:e(()=>[t(m,{"virtual-scroll":!1,value:p.value.paymentTypeId,"onUpdate:value":b[3]||(b[3]=T=>p.value.paymentTypeId=T),placeholder:"Metodo de pago",options:[{label:"BN - VENTANILLA",value:7},{label:"BN - PAGALO.PE",value:9}]},null,8,["value"])]),_:1})]),_:1}),t(v,{span:"24"},{default:e(()=>[t(o,{loading:f.value,secondary:"",type:"primary",onClick:x,block:"","render-icon":G(re)("money-tick")},{default:e(()=>b[6]||(b[6]=[E(" Validar Pago ")])),_:1},8,["loading","render-icon"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"])}}}),Gt={class:"wrapper-list-groups"},Ht={class:"table-auto w-full"},Kt={class:"px-4 py-2 flex items-center"},Qt={class:"ms-2"},Zt={class:"text-end px-4 py-2"},Jt={class:"border-b-2 border-gray-500"},Xt={class:"px-4 py-2 font-bold text-lg text-end"},Yt={class:"px-4 py-2 font-bold text-lg text-end"},eo={class:"text-red-500 text-sm text-end text-sm"},to=Z({__name:"EnrollmentGroupForm",props:{modelValue:{type:Boolean},studentId:{},curriculumId:{},courseId:{}},emits:["update:modelValue","success"],setup(n,{emit:l}){const i=l,a=n,f=I(!1),u=q({get:()=>a.modelValue,set:v=>i("update:modelValue",v)}),d=I(!1),p=I([]),C=I([]),x=I(0),r=I(Object.assign({},{...Ut()})),c=v=>{console.log("Pago validado",v),r.value.payments.push(v.token),C.value.push({token:v.token,amount:v.payment.amount,sequenceNumber:v.payment.sequenceNumber})},b=v=>{r.value.groupId&&r.value.groupId!=v.id&&(r.value.groupId=v.id,x.value=v.price),r.value.groupId==v.id?(r.value.groupId=null,x.value=0):(r.value.groupId=v.id,x.value=v.price)},A=async()=>{const v=await it({studentId:a.studentId,curriculumId:a.curriculumId,courseId:a.courseId});p.value=v.data},V=v=>{let o=C.value[v].token;C.value.splice(v,1);let g=r.value.payments.find(z=>z.token==o);if(!g)return;let $=r.value.payments.indexOf(g);r.value.payments.splice($,1)},R=()=>C.value.reduce((m,o)=>m+parseInt(o.amount),0)>=x.value?null:"El monto pagado es menor al total",h=async()=>{r.value.studentId=a.studentId,f.value=!0,(await dt(r.value)).status&&(i("success"),u.value=!1),f.value=!1,console.log("Guardando matricula",r.value)},P=async()=>{await A(),console.log("Inicializando formulario")};return _e(u,v=>{v&&P()}),(v,m)=>{const o=ce,g=Ne,$=Re,z=Te,D=Ve,T=Ee,U=me,J=he("LnxIcon"),X=fe,ee=pe,ne=xe;return k(),L(Q,null,[t(ne,{show:u.value,"onUpdate:show":m[1]||(m[1]=_=>u.value=_)},{default:e(()=>[t(ee,{style:{width:"500px"},title:"MATRICULA EN GRUPO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{default:e(()=>[t(X,{gutter:[16,16]},{default:e(()=>[t(U,{span:"24"},{default:e(()=>[s("div",Gt,[t(T,{hoverable:"",clickable:""},{header:e(()=>[E(" Grupos aperturados ("+y(p.value.length)+") ",1)]),default:e(()=>[(k(!0),L(Q,null,te(p.value,_=>(k(),K(D,{key:_.id,class:nt({"item-selected":r.value.groupId==_.id}),extra:_.price},{default:e(()=>[t(z,{title:`${_.group} - S/. ${_.price}`,onClick:F=>b(_)},lt({description:e(()=>[t($,{size:"small",style:{"margin-top":"4px"}},{default:e(()=>[t(g,{bordered:!1,type:"info",size:"small"},{default:e(()=>[E(y(_.modality),1)]),_:2},1024)]),_:2},1024)]),default:e(()=>[m[3]||(m[3]=E(" Docente: ")),s("b",null,y(_.teacher),1),m[4]||(m[4]=s("br",null,null,-1)),m[5]||(m[5]=E(" Laboratorio: ")),s("b",null,y(_.laboratory),1),m[6]||(m[6]=s("br",null,null,-1)),(k(!0),L(Q,null,te(_.schedules,(F,le)=>(k(),K(g,{key:le,bordered:!1,type:"info",size:"small"},{default:e(()=>[E(y(F.day)+" - "+y(F.startHour)+" - "+y(F.endHour),1)]),_:2},1024))),128))]),_:2},[r.value.groupId==_.id?{name:"header-extra",fn:e(()=>[t(o,{circle:"",type:"warning","render-icon":G(re)("verify")},null,8,["render-icon"])]),key:"0"}:void 0]),1032,["title","onClick"])]),_:2},1032,["class","extra"]))),128))]),_:1})])]),_:1}),t(U,{span:"24"},{default:e(()=>[s("span",{role:"button",onClick:m[0]||(m[0]=_=>d.value=!0),class:"border border-dashed border-gray-300 p-4 rounded-sm flex items-center justify-center cursor-pointer text-gray-400 hover:bg-gray-50 font-bold hover:text-gray-500 mb-4"},[t(J,{class:"me-3","icon-name":"money-add",size:"20"}),m[7]||(m[7]=E(" Agregar pago "))]),s("table",Ht,[s("tbody",null,[(k(!0),L(Q,null,te(C.value,(_,F)=>(k(),L("tr",{key:F,class:"border-b border-gray-300 border-dashed px-4 py-2"},[s("td",Kt,[t(o,{type:"error",size:"small",secondary:"",onClick:le=>V(F),"render-icon":G(re)("trash")},null,8,["onClick","render-icon"]),s("i",Qt,y(_.sequenceNumber),1)]),s("td",Zt,"S/. "+y(_.amount),1)]))),128)),s("tr",Jt,[m[8]||(m[8]=s("td",{class:"px-4 py-2"},"Total pagado",-1)),s("td",Xt," S/. "+y(C.value.reduce((_,F)=>_+parseInt(F.amount),0)),1)]),s("tr",null,[m[9]||(m[9]=s("td",{class:"px-4 py-2"},"Total a pagar",-1)),s("td",Yt," S/. "+y(x.value),1)])])]),s("div",eo,y(R()),1)]),_:1}),t(U,{span:"24"},{default:e(()=>[t(o,{size:"large",type:"primary",onClick:h,block:"",loading:f.value},{default:e(()=>m[10]||(m[10]=[E(" Realizar Matricula ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),t(Ae,{modelValue:d.value,"onUpdate:modelValue":m[2]||(m[2]=_=>d.value=_),studentId:a.studentId,onSuccess:c},null,8,["modelValue","studentId"])],64)}}}),Se=()=>({studentId:null,curriculumId:null,moduleId:null,payments:[]}),oo=()=>({studentId:[],curriculumId:[],moduleId:[{type:"number",required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),no={class:"table-auto w-full"},lo={class:"px-4 py-2 flex items-center"},ro={class:"ms-2"},ao={class:"text-end px-4 py-2"},so={class:"border-b-2 border-gray-500"},io={class:"px-4 py-2 font-bold text-lg text-end"},uo={class:"px-4 py-2 font-bold text-lg text-end"},co={class:"text-red-500 text-sm text-end text-sm"},po=Z({__name:"EnrollmentModuleForm",props:{modelValue:{type:Boolean},studentId:{},curriculumId:{}},emits:["update:modelValue","success"],setup(n,{emit:l}){const i=l,a=n,f=q({get:()=>a.modelValue,set:o=>i("update:modelValue",o)}),u=I(!1),d=I(!1),p=I([]),C=I(null),x=q(()=>oo()),r=I(Se()),c=I([]),b=I(0),A=o=>{console.log("Pago validado",o),r.value.payments.push(o.token),c.value.push({token:o.token,amount:o.payment.amount,sequenceNumber:o.payment.sequenceNumber})},V=o=>{let $=c.value[o].token;c.value.splice(o,1);let z=r.value.payments.find(T=>T.token==$);if(!z)return;let D=r.value.payments.indexOf(z);r.value.payments.splice(D,1)},R=o=>{console.log("Seleccionando modulo",o),r.value.payments=[],p.value.forEach(g=>{g.value==o&&(b.value=g.price)})},h=async()=>{const o=await ct(a.studentId,a.curriculumId);p.value=o.data},P=()=>c.value.reduce((g,$)=>g+parseInt($.amount),0)>=b.value?null:"El monto pagado es menor al total",v=async()=>{r.value.studentId=a.studentId,r.value.curriculumId=a.curriculumId,u.value=!0,(await ut(r.value)).status&&(i("success"),f.value=!1),u.value=!1,console.log("Guardando matricula",r.value)},m=()=>{h(),console.log("Inicializando formulario")};return _e(f,o=>{o&&(r.value=Object.assign({},{...Se()}),c.value=[],m())}),(o,g)=>{const $=ye,z=Pe,D=me,T=he("LnxIcon"),U=ce,J=fe,X=$e,ee=pe,ne=xe;return k(),L(Q,null,[t(ne,{show:f.value,"onUpdate:show":g[2]||(g[2]=_=>f.value=_)},{default:e(()=>[t(ee,{style:{width:"600px"},title:"MATRICULA EN MODULO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{default:e(()=>[t(X,{ref_key:"formRef",ref:C,model:r.value,rules:x.value,size:"large"},{default:e(()=>[t(J,{gutter:[16,16]},{default:e(()=>[t(D,{span:"24"},{default:e(()=>[t(z,{path:"moduleId",label:"Modulo"},{default:e(()=>[t($,{value:r.value.moduleId,"onUpdate:value":[g[0]||(g[0]=_=>r.value.moduleId=_),R],placeholder:"Seleccionar modulo",options:p.value,"virtual-scroll":!1,clearable:"",filterable:""},null,8,["value","options"])]),_:1})]),_:1}),t(D,{span:"24"},{default:e(()=>[s("span",{role:"button",onClick:g[1]||(g[1]=_=>d.value=!0),class:"border border-dashed border-gray-300 p-4 rounded-sm flex items-center justify-center cursor-pointer text-gray-400 hover:bg-gray-50 font-bold hover:text-gray-500 mb-4"},[t(T,{class:"me-3","icon-name":"money-add",size:"20"}),g[4]||(g[4]=E(" Agregar pago "))]),s("table",no,[s("tbody",null,[(k(!0),L(Q,null,te(c.value,(_,F)=>(k(),L("tr",{key:F,class:"border-b border-gray-300 border-dashed px-4 py-2"},[s("td",lo,[t(U,{type:"error",size:"small",secondary:"",onClick:le=>V(F),"render-icon":G(re)("trash")},null,8,["onClick","render-icon"]),s("i",ro,y(_.sequenceNumber),1)]),s("td",ao,"S/. "+y(_.amount),1)]))),128)),s("tr",so,[g[5]||(g[5]=s("td",{class:"px-4 py-2"},"Total pagado",-1)),s("td",io," S/. "+y(c.value.reduce((_,F)=>_+parseInt(F.amount),0)),1)]),s("tr",null,[g[6]||(g[6]=s("td",{class:"px-4 py-2"},"Total a pagar",-1)),s("td",uo," S/. "+y(b.value),1)])])]),s("div",co,y(P()),1)]),_:1}),t(D,{span:"24"},{default:e(()=>[t(U,{size:"large",type:"primary",onClick:v,block:"",loading:u.value},{default:e(()=>g[7]||(g[7]=[E(" Realizar matricula ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show"]),t(Ae,{modelValue:d.value,"onUpdate:modelValue":g[3]||(g[3]=_=>d.value=_),studentId:a.studentId,onSuccess:A},null,8,["modelValue","studentId"])],64)}}}),mo={class:"p-4"},fo={class:"flex justify-end bg-gray-100 p-4 -mx-6 -mt-6 mb-4"},go={class:"text-lg font-semibold w-full text-blue-800 p-2"},vo={key:1},Ro=Z({__name:"EnrollmentStudentView",setup(n){const{screenSize:l}=st(),i=rt(),a=ht(),f=I(!1),u=I(!1),d=I(null),p=I(null),C=I([]),x=I(!0),r=I({}),c=I(!0),b=I(null),A=I(null),V=async m=>{let o=await mt({id:m}),g=new Blob([o],{type:"application/pdf"}),$=window.URL.createObjectURL(g),z=document.getElementById("printFrame");z.src=$,z.onload=function(){var D;(D=z.contentWindow)==null||D.print()}},R=async()=>{const m=i.params.id;x.value=!0,r.value=await ft(m),x.value=!1},h=async()=>{var g;const m=i.params.id,o=(g=p.value)==null?void 0:g.id;c.value=!0,b.value=await pt(m,d.value,o),c.value=!1},P=m=>{A.value=m,u.value=!0},v=async()=>{C.value=await gt(),d.value=C.value[0].value,R(),h()};return at(()=>{v()}),(m,o)=>{const g=ye,$=pe,z=Ot,D=Re,T=bt,U=me,J=Ne,X=ce,ee=Lt,ne=Te,_=Ve,F=Ee,le=Nt,De=kt,Oe=fe;return k(),L(Q,null,[t($,{segmented:{header:!0,footer:!0,content:!0}},{header:e(()=>o[4]||(o[4]=[s("h6",{style:{color:"#999",margin:"0"}},"Matricular estudiante",-1),E(" Nombre del estudiante ")])),"header-extra":e(()=>[t(g,{value:d.value,"onUpdate:value":[o[0]||(o[0]=w=>d.value=w),h],placeholder:"Seleccionar Plan de estudio",filterable:"",options:C.value,"virtual-scroll":!1,"default-value":1},null,8,["value","options"])]),action:e(()=>o[5]||(o[5]=[])),_:1}),s("div",mo,[t(Oe,{gutter:16},{default:e(()=>[t(U,{span:G(l)=="lg"?6:24},{default:e(()=>[t($,{segmented:{header:!0,content:!0},title:"Información Personal",subtitle:"Datos del estudiante"},{default:e(()=>[t(T,{show:x.value},{default:e(()=>[t(D,{vertical:""},{default:e(()=>[t(z,{class:"small",label:"Tipo de estudiante"},{default:e(()=>{var w;return[E(y((w=r.value)==null?void 0:w.studentType),1)]}),_:1}),t(z,{class:"small",label:"Documento"},{default:e(()=>{var w,j;return[E(y((w=r.value)!=null&&w.documentNumber?(j=r.value)==null?void 0:j.documentNumber:"No registrado"),1)]}),_:1}),t(z,{class:"small",label:"Nombres"},{default:e(()=>{var w;return[E(y((w=r.value)==null?void 0:w.fullName),1)]}),_:1}),t(z,{class:"small",label:"Correo electronico"},{default:e(()=>{var w,j;return[E(y((w=r.value)!=null&&w.email?(j=r.value)==null?void 0:j.email:"No registrado"),1)]}),_:1}),t(z,{class:"small",label:"Telefono"},{default:e(()=>{var w,j;return[E(y((w=r.value)!=null&&w.phone?(j=r.value)==null?void 0:j.phone:"No registrado"),1)]}),_:1})]),_:1})]),_:1},8,["show"])]),_:1})]),_:1},8,["span"]),t(U,{span:G(l)=="lg"?18:24},{default:e(()=>[t($,{segmented:{header:!0,content:!0},title:"Matricula"},{"header-extra":e(()=>[t(J,{bordered:!1,type:G(a).enrollment?"info":"error"},{default:e(()=>{var w;return[s("strong",null,y(G(a).enrollment?(w=G(a).enrollment)==null?void 0:w.name:"No habilitado"),1)]}),_:1},8,["type"])]),default:e(()=>[s("div",fo,[t(X,{type:"primary",onClick:o[1]||(o[1]=w=>f.value=!0),disabled:!G(a).enrollment},{default:e(()=>o[6]||(o[6]=[E(" Agregar Modulo ")])),_:1},8,["disabled"])]),t(De,null,{default:e(()=>{var w;return[(k(!0),L(Q,null,te((w=b.value)==null?void 0:w.enrollments,j=>(k(),K(le,{key:j.moduleId,name:j.moduleId},{header:e(()=>[s("h2",go,y(j.moduleName),1)]),default:e(()=>[t(F,{hoverable:"",clickable:""},{default:e(()=>[(k(!0),L(Q,null,te(j.courses,H=>(k(),K(_,{key:H.id},{default:e(()=>[t(ne,{title:`${H.code} - ${H.name}`},{"header-extra":e(()=>[H.enrollmentGroups.length==0||Math.max(...H.enrollmentGroups.map(B=>B.grade))<11&&H.enrollmentGroups.filter(B=>B.groupStatus=="ABIERTO").length==0?(k(),K(X,{key:0,type:"primary",onClick:B=>P(H.id)},{default:e(()=>o[7]||(o[7]=[E(" Matricular ")])),_:2},1032,["onClick"])):de("",!0)]),description:e(()=>[t(D,{size:"small"},{default:e(()=>[t(J,{bordered:!1,size:"small"},{default:e(()=>[E(" Area: "+y(H.area),1)]),_:2},1024)]),_:2},1024)]),default:e(()=>[H.enrollmentGroups.length>0?(k(),K(ee,{key:0,"single-line":!1},{default:e(()=>[o[9]||(o[9]=s("thead",null,[s("tr",null,[s("th",null,"Periodo"),s("th",null,"Grupo"),s("th",null,"Modalidad"),s("th",null,"Estado"),s("th",null,"Nota"),s("th",null,"Acciones")])],-1)),s("tbody",null,[(k(!0),L(Q,null,te(H.enrollmentGroups,B=>{var Ce;return k(),L("tr",null,[s("td",null,[((Ce=G(a).enrollment)==null?void 0:Ce.name)==B.period?(k(),K(J,{key:0,type:"info"},{default:e(()=>[E(y(B.period),1)]),_:2},1024)):(k(),L("span",vo,y(B.period),1))]),s("td",null,y(B.groupName),1),s("td",null,y(B.groupModality),1),s("td",null,y(B.groupStatus),1),s("td",null,y(B.grade),1),s("td",null,[B.groupStatus==="ABIERTO"||B.groupStatus==="CERRADO"?(k(),K(X,{key:0,"render-icon":G(re)("printer"),onClick:bo=>V(B.id)},{default:e(()=>o[8]||(o[8]=[E(" Imprimir ficha ")])),_:2},1032,["render-icon","onClick"])):de("",!0)])])}),256))])]),_:2},1024)):de("",!0)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]}),_:1})]),_:1})]),_:1},8,["span"])]),_:1})]),o[10]||(o[10]=s("iframe",{id:"printFrame",style:{display:"none"}},null,-1)),r.value?(k(),K(po,{key:0,modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=w=>f.value=w),studentId:r.value.id,curriculumId:d.value,onSuccess:h},null,8,["modelValue","studentId","curriculumId"])):de("",!0),t(to,{modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=w=>u.value=w),studentId:r.value.id,curriculumId:d.value,courseId:A.value,onSuccess:h},null,8,["modelValue","studentId","curriculumId","courseId"])],64)}}});export{Ro as default};
