import{d as j,a3 as D,a6 as I,r as u,j as P,a8 as R,aG as x,a9 as i,ae as m,aa as s,ac as n,ad as b,ab as a,aA as r,ag as L,af as p,aB as q,_ as $,aU as G,ah as S}from"./index-BOyx2DGO.js";import{r as H}from"./icon.utils-BZ_5fGn6.js";import{d as J}from"./debounce.utils-DqPPCsFD.js";import{_ as K}from"./StudentForm.vue_vue_type_script_setup_true_lang-Bs_6UbLX.js";import{c as O}from"./student.services-AZcb6zHl.js";import{c as Q}from"./studentType.services-Dv6g504T.js";import{c as W}from"./documentType.services-CuAw_OVC.js";import{_ as X}from"./Divider-Ceu9VMhh.js";import{_ as Y,a as Z}from"./ListItem-Dxt3JRC8.js";import{_ as ee}from"./Thing-BxYJ11Ic.js";import{_ as te,a as ae}from"./Col-Ddh-mtwO.js";import{_ as ne}from"./Input-CA42N3nM.js";import{_ as oe}from"./Tag-DM5krFKW.js";import{_ as le}from"./Space-Bq9hZ6L8.js";import"./genders.constans-BK559Fh_.js";import"./useBreakpoints-DhNa-nJn.js";import"./Select-CP6PIrTl.js";import"./Popover-C3xoDLDW.js";import"./get-BgSbcy5X.js";import"./use-merged-state-PebSr71T.js";import"./Suffix-3kzIsxrs.js";import"./FormItem-BNNBpqpK.js";import"./Switch-BLmH_3Zr.js";import"./DataTable.types-BEg5m_To.js";const se={style:{"text-align":"end"}},re={style:{padding:"0 1rem",color:"#999","font-size":"0.8rem"}},ue={class:"pt-3 text-end"},Ue=j({__name:"EnrollmentView",setup(me){const{hasPermission:c}=D(),k=I(),v=u(!1),f=u({}),o=u({code:"",documentNumber:"",name:"",lastNameFather:"",lastNameMother:""}),g=u([]),y=u(!0),h=u(!1),w=l=>{o.value.documentNumber=l.documentNumber,o.value.name=l.name,o.value.lastNameFather=l.lastNameFather,o.value.lastNameMother=l.lastNameMother};return P(o.value,J(async l=>{console.log(l),h.value=!0,g.value=await O(l),h.value=!1},500)),(async()=>{y.value=!0,f.value.studentTypesItems=await Q(),f.value.documentTypesItems=await W(),y.value=!1})(),(l,e)=>{const N=L,V=X,_=ne,d=ae,M=te,C=q,T=oe,F=ee,A=le,B=Y,E=Z,U=R("AppNotAuthorization");return m(c)(["enrollment.create","enrollment.create-special","enrollment.edit","enrollment.print-record"])?(s(),x($,{key:0},[n(C,{segmented:{header:!0,footer:!0,content:!0}},{header:a(()=>e[6]||(e[6]=[p("h6",{class:"text-sm text-gray-500"},"Matriculas",-1),r(" Realizar la matricula de los estudiantes ")])),"header-extra":a(()=>[n(N,{"render-icon":m(H)("additem"),type:"primary",onClick:e[0]||(e[0]=t=>v.value=!0)},{default:a(()=>e[7]||(e[7]=[r(" Estudiante ")])),_:1},8,["render-icon"])]),action:a(()=>[n(V,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:a(()=>e[8]||(e[8]=[r(" Buscar estudiantes ")])),_:1}),n(M,{gutter:"16"},{default:a(()=>[n(d,{span:"5"},{default:a(()=>[n(_,{type:"text",value:o.value.documentNumber,"onUpdate:value":e[1]||(e[1]=t=>o.value.documentNumber=t),placeholder:"NÂ° de Documento"},null,8,["value"])]),_:1}),n(d,{span:"7"},{default:a(()=>[n(_,{type:"text",value:o.value.name,"onUpdate:value":e[2]||(e[2]=t=>o.value.name=t),placeholder:"Nombre"},null,8,["value"])]),_:1}),n(d,{span:"6"},{default:a(()=>[n(_,{type:"text",value:o.value.lastNameFather,"onUpdate:value":e[3]||(e[3]=t=>o.value.lastNameFather=t),placeholder:"Apellido Paterno"},null,8,["value"])]),_:1}),n(d,{span:"6"},{default:a(()=>[n(_,{type:"text",value:o.value.lastNameMother,"onUpdate:value":e[4]||(e[4]=t=>o.value.lastNameMother=t),placeholder:"Apellido Materno"},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(E,{hoverable:"",clickable:""},{header:a(()=>[p("div",se,[p("i",re,[e[9]||(e[9]=r(" Se muestran los 10 mejores resultados de la busqueda | ")),p("strong",null," Total de resultados: "+S(g.value.length),1)])])]),default:a(()=>[(s(!0),x($,null,G(g.value,t=>(s(),i(B,{style:{margin:"0 1rem"},key:t.id},{default:a(()=>[n(F,{title:`${t.name} ${t.lastName}`,description:`${t.documentType?t.documentType:"-"}    ${t.documentNumber?t.documentNumber:"-"}`},{default:a(()=>[n(T,{bordered:!1},{default:a(()=>[r(S(t.studentType),1)]),_:2},1024)]),_:2},1032,["title","description"]),p("div",ue,[n(A,{align:"center",justify:"end"},{default:a(()=>[m(c)(["enrollment.create"])?(s(),i(N,{key:0,class:"ms-2",onClick:z=>m(k).push({name:"EnrollmentStudent",params:{id:t.id}})},{default:a(()=>e[10]||(e[10]=[r(" Matricular ")])),_:2},1032,["onClick"])):b("",!0),m(c)(["enrollment.create-special"])?(s(),i(N,{key:1,onClick:z=>m(k).push({name:"EnrollmentSpecialStudent",params:{id:t.id}})},{default:a(()=>e[11]||(e[11]=[r(" Matriculas Especiales ")])),_:2},1032,["onClick"])):b("",!0)]),_:2},1024)])]),_:2},1024))),128))]),_:1}),y.value?b("",!0):(s(),i(K,{key:0,modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value=t),item:null,selectables:f.value,onSuccess:w},null,8,["modelValue","selectables"]))],64)):(s(),i(U,{key:1}))}}});export{Ue as default};
