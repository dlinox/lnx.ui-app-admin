import{d as ue,a as F,_ as de}from"./selectables.services-C8JJYSBR.js";import{b as ie,c as ce,d as pe,e as me}from"./report.services-DhBs9PeZ.js";import{r as k}from"./icon.utils-72mRZSRr.js";import{d as z}from"./debounce.utils-DqPPCsFD.js";import{d as A,e as j,r as d,j as N,a9 as U,aa as h,ab as e,ac as o,aB as M,aA as f,ae as v,aG as W,_ as X,aU as _e,af as R,ah as P,ag as E,aI as D,a3 as fe,a8 as ve}from"./index-CTX32WvQ.js";import{_ as ge}from"./Divider-DufV4_kY.js";import{_ as H,a as L}from"./Col-BZe6vIUY.js";import{_ as T}from"./Select-DwwM8esp.js";import{a as Y,_ as Z}from"./ListItem-D5_apZVG.js";import{_ as ee}from"./Thing-BJQyNM1u.js";import{_ as be}from"./Tag-vB_kF6B0.js";import{_ as q}from"./Space-Cg-Z5G16.js";import"./Popover-D4J2dXPN.js";import"./get-B5VZIcfe.js";import"./use-merged-state-xCl8VPUK.js";import"./Suffix-CZHvrjpx.js";const ye=A({__name:"Enrollments",props:{modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(C,{emit:x}){const I=x,g=C,r=j({get:()=>g.modelValue,set:c=>I("update:modelValue",c)}),p=d(!1),b=d(!1),y=d([]),n=d([]),_=d([]),s=d({periodId:null,curriculumId:null,moduleId:null}),w=async c=>{p.value=!0,await ie({groupId:c}),p.value=!1},V=async c=>{b.value=!0,n.value=await F(c),b.value=!1},l=z(c=>{V(c)},400),a=async c=>{_.value=await ue(c)},i=async()=>{y.value=await ce(s.value)},$=()=>{V("")};return N(r,c=>{c&&$()}),(c,t)=>{const S=E,B=ge,G=T,m=L,oe=be,ne=ee,J=q,te=Z,le=Y,ae=H,se=M,re=D;return h(),U(re,{show:r.value,"onUpdate:show":t[5]||(t[5]=u=>r.value=u)},{default:e(()=>[o(se,{style:{width:"800px"},title:"Generar Reporte - Matrículas",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(S,{"render-icon":v(k)("close-circle"),onClick:t[0]||(t[0]=u=>r.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(J,{justify:"end"},{default:e(()=>[o(S,{tertiary:"",size:"large",onClick:t[4]||(t[4]=u=>r.value=!1),disabled:p.value},{default:e(()=>t[8]||(t[8]=[f(" Cancelar ")])),_:1},8,["disabled"])]),_:1})]),default:e(()=>[o(B,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:e(()=>t[6]||(t[6]=[f(" Buscar estudiantes ")])),_:1}),o(ae,{gutter:"16"},{default:e(()=>[o(m,{span:"8"},{default:e(()=>[o(G,{value:s.value.periodId,"onUpdate:value":[t[1]||(t[1]=u=>s.value.periodId=u),i],placeholder:"Seleccionar Periodo Académico",filterable:"",options:n.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:v(l)},null,8,["value","options","onSearch"])]),_:1}),o(m,{span:"8"},{default:e(()=>[o(G,{disabled:s.value.periodId===null,value:s.value.curriculumId,"onUpdate:value":[t[2]||(t[2]=u=>s.value.curriculumId=u),a],placeholder:"Seleccionar Plan de estudio",filterable:"",options:c.curriculumOptions,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(m,{span:"8"},{default:e(()=>[o(G,{disabled:s.value.curriculumId===null||s.value.periodId===null,value:s.value.moduleId,"onUpdate:value":[t[3]||(t[3]=u=>s.value.moduleId=u),i],placeholder:"Seleccionar Módulo",filterable:"",options:_.value,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(m,{span:"24",class:"border-t border-t-gray-200 mt-2"},{default:e(()=>[o(le,{hoverable:"",clickable:"",style:{"max-height":"300px","overflow-y":"auto"}},{default:e(()=>[(h(!0),W(X,null,_e(y.value,u=>(h(),U(te,{style:{margin:"0 1rem"},key:u.id},{default:e(()=>[o(ne,null,{header:e(()=>[o(oe,{bordered:!1,class:"me-2"},{default:e(()=>[f(P(u.status),1)]),_:2},1024),f(" "+P(u.name)+" - "+P(u.course),1)]),default:e(()=>{var O,K,Q;return[R("i",null,P((O=u.schedule)==null?void 0:O.days)+" - "+P((K=u.schedule)==null?void 0:K.startHour)+" a "+P((Q=u.schedule)==null?void 0:Q.endHour),1)]}),_:2},1024),o(J,{align:"center",justify:"end"},{default:e(()=>[o(S,{secondary:"",class:"ms-2",type:"error","render-icon":v(k)("document-download"),onClick:O=>w(u.id)},{default:e(()=>t[7]||(t[7]=[f(" PDF ")])),_:2},1032,["render-icon","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),we=A({__name:"EnabledGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(C,{emit:x}){const I=x,g=C,r=j({get:()=>g.modelValue,set:l=>I("update:modelValue",l)}),p=d(!1),b=d(!1),y=d([]),n=d({periodId:null}),_=async()=>{p.value=!0,await pe({periodId:n.value.periodId}),p.value=!1},s=async l=>{b.value=!0,y.value=await F(l),b.value=!1},w=z(l=>{s(l)},400),V=()=>{s("")};return N(r,l=>{l&&V()}),(l,a)=>{const i=E,$=T,c=L,t=H,S=q,B=M,G=D;return h(),U(G,{show:r.value,"onUpdate:show":a[2]||(a[2]=m=>r.value=m)},{default:e(()=>[o(B,{style:{width:"800px"},title:"Generar Reporte - Grupos Aperturados",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(i,{"render-icon":v(k)("close-circle"),onClick:a[0]||(a[0]=m=>r.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(S,{justify:"center"},{default:e(()=>[o(i,{disabled:n.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:p.value,"render-icon":v(k)("document-download"),onClick:_},{default:e(()=>a[3]||(a[3]=[f(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(c,{span:"24"},{default:e(()=>[o($,{class:"mx-auto",style:{width:"300px"},value:n.value.periodId,"onUpdate:value":a[1]||(a[1]=m=>n.value.periodId=m),placeholder:"Seleccionar Periodo Académico",filterable:"",options:y.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:v(w)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ie=A({__name:"CollectionGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(C,{emit:x}){const I=x,g=C,r=j({get:()=>g.modelValue,set:l=>I("update:modelValue",l)}),p=d(!1),b=d(!1),y=d([]),n=d({periodId:null}),_=async()=>{p.value=!0,await me({periodId:n.value.periodId}),p.value=!1},s=async l=>{b.value=!0,y.value=await F(l),b.value=!1},w=z(l=>{s(l)},400),V=()=>{s("")};return N(r,l=>{l&&V()}),(l,a)=>{const i=E,$=T,c=L,t=H,S=q,B=M,G=D;return h(),U(G,{show:r.value,"onUpdate:show":a[2]||(a[2]=m=>r.value=m)},{default:e(()=>[o(B,{style:{width:"800px"},title:"Generar Reporte - Recaudación por grupo",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(i,{"render-icon":v(k)("close-circle"),onClick:a[0]||(a[0]=m=>r.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(S,{justify:"center"},{default:e(()=>[o(i,{disabled:n.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:p.value,"render-icon":v(k)("document-download"),onClick:_},{default:e(()=>a[3]||(a[3]=[f(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(c,{span:"24"},{default:e(()=>[o($,{class:"mx-auto",style:{width:"300px"},value:n.value.periodId,"onUpdate:value":a[1]||(a[1]=m=>n.value.periodId=m),placeholder:"Seleccionar Periodo Académico",filterable:"",options:y.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:v(w)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Fe=A({__name:"GroupReportView",setup(C){const{hasPermission:x}=fe(),I=d([]),g=d(!1),r=d(!1),p=d(!1);return(async()=>{I.value=await de()})(),(y,n)=>{const _=E,s=ee,w=Z,V=Y,l=M,a=ve("AppNotAuthorization");return v(x)(["report.group"])?(h(),W(X,{key:0},[o(l,{segmented:{header:!0,content:!0}},{header:e(()=>n[6]||(n[6]=[R("span",{class:"text-sm text-slate-500"}," Reportes ",-1),R("h5",{class:"text-lg font-bold text-slate-800"},"Reporte de grupos",-1)])),default:e(()=>[o(V,null,{default:e(()=>[o(w,null,{suffix:e(()=>[o(_,{onClick:n[0]||(n[0]=i=>g.value=!0)},{default:e(()=>n[7]||(n[7]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(s,{title:"Matrículas",description:"Estudiantes matriculados en un grupo"})]),_:1}),o(w,null,{suffix:e(()=>[o(_,{onClick:n[1]||(n[1]=i=>r.value=!0)},{default:e(()=>n[8]||(n[8]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(s,{title:"Grupos Aperturados",description:"Grupos aperturados por periodo"})]),_:1}),o(w,null,{suffix:e(()=>[o(_,{onClick:n[2]||(n[2]=i=>p.value=!0)},{default:e(()=>n[9]||(n[9]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(s,{title:"Recaudación por grupo",description:"Recaudación por grupo en un periodo"})]),_:1})]),_:1})]),_:1}),o(ye,{modelValue:g.value,"onUpdate:modelValue":n[3]||(n[3]=i=>g.value=i),curriculumOptions:I.value},null,8,["modelValue","curriculumOptions"]),o(we,{modelValue:r.value,"onUpdate:modelValue":n[4]||(n[4]=i=>r.value=i)},null,8,["modelValue"]),o(Ie,{modelValue:p.value,"onUpdate:modelValue":n[5]||(n[5]=i=>p.value=i)},null,8,["modelValue"])],64)):(h(),U(a,{key:1}))}}});export{Fe as default};
