import{G}from"./genders.constans-ZqlXwVVz.js";import{u as O}from"./useBreakpoints-CvjILNu3.js";import{c as D,d as h,e as w,f as j,g as A}from"./student.services-DkRmIpYp.js";import{c as x,_ as H,a as P,b as q}from"./Col-HCWaYKjr.js";import{d as J,e as K,r as _,g as L,a9 as Q,a4 as W,a6 as l,aa as a,ae as U,ab as m,ag as X,ai as Y,aj as Z}from"./index-CuctqQ8B.js";import{a as ee,_ as ae,b as le}from"./FormItem-B4x8FwVv.js";import{_ as te}from"./Switch-GUvqzs87.js";const me=J({__name:"StudentForm",props:{item:{},modelValue:{type:Boolean},selectables:{}},emits:["update:modelValue","success"],setup(F,{emit:S}){const I=S,c=F,{screenSize:i}=O(),f=K({get:()=>c.modelValue,set:d=>I("update:modelValue",d)}),b=_(!1),g=_(null),t=_(w()),u=_(null),E=_({...j()}),y=async()=>{if(g.value){const d=await g.value.validate();let e=null;d?(b.value=!0,t.value.id?e=await D(t.value):e=await h(t.value),e.status?(I("success",t.value),f.value=!1):u.value=e.data):console.log("Formulario inválido")}b.value=!1},R=async()=>{var d;return(d=c.item)!=null&&d.id?t.value=await A(c.item.id):t.value=w(),t.value},$=async()=>{console.log("Inicializando formulario"),await R()};return L(f,d=>{d&&$()}),(d,e)=>{const N=x,p=ee,r=H,v=ae,C=te,k=P,M=q,V=le,T=X,B=Y,z=Z;return Q(),W(z,{show:f.value,"onUpdate:show":e[18]||(e[18]=n=>f.value=n)},{default:l(()=>[a(B,{style:{width:"1024px"},title:d.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:l(()=>[a(k,{justify:"end"},{default:l(()=>[a(T,{tertiary:"",size:"large",onClick:e[17]||(e[17]=n=>f.value=!1),disabled:b.value},{default:l(()=>e[19]||(e[19]=[U(" Cancelar ")])),_:1},8,["disabled"]),a(T,{size:"large",type:"primary",onClick:y,loading:b.value},{default:l(()=>e[20]||(e[20]=[U("Guardar")])),_:1},8,["loading"])]),_:1})]),default:l(()=>[a(V,{ref_key:"formRef",ref:g,model:t.value,rules:E.value,size:"large",onSubmit:y},{default:l(()=>[a(M,{gutter:16},{default:l(()=>[a(r,{span:m(i)==="sm"?12:6},{default:l(()=>[a(p,{path:"studentTypeId",label:"Tipo de Estudiante"},{default:l(()=>[a(N,{value:t.value.studentTypeId,"onUpdate:value":e[0]||(e[0]=n=>t.value.studentTypeId=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:d.selectables.studentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:6},{default:l(()=>{var n;return[a(p,{path:"code",label:"Código",feedback:(n=u.value)==null?void 0:n.code},{default:l(()=>{var o;return[a(v,{value:t.value.code,"onUpdate:value":e[1]||(e[1]=s=>t.value.code=s),status:((o=u.value)==null?void 0:o.code)!=null?"error":"",onInput:e[2]||(e[2]=s=>u.value!=null?u.value.code=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:6},{default:l(()=>[a(p,{path:"documentTypeId",label:"Tipo de Documento"},{default:l(()=>[a(N,{value:t.value.documentTypeId,"onUpdate:value":e[3]||(e[3]=n=>t.value.documentTypeId=n),clearable:"","virtual-scroll":!1,placeholder:"Seleccione",options:d.selectables.documentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:6},{default:l(()=>{var n;return[a(p,{path:"documentNumber",label:"Número de Documento",feedback:(n=u.value)==null?void 0:n.documentNumber},{default:l(()=>{var o;return[a(v,{value:t.value.documentNumber,"onUpdate:value":e[4]||(e[4]=s=>t.value.documentNumber=s),status:((o=u.value)==null?void 0:o.documentNumber)!=null?"error":"",onInput:e[5]||(e[5]=s=>u.value!=null?u.value.documentNumber=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(r,{span:m(i)==="sm"?24:8},{default:l(()=>{var n;return[a(p,{path:"name",label:"Nombre",feedback:(n=u.value)==null?void 0:n.name},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.name)!=null?"error":"",value:t.value.name,"onUpdate:value":e[6]||(e[6]=s=>t.value.name=s),onInput:e[7]||(e[7]=s=>u.value!=null?u.value.name=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:8},{default:l(()=>{var n;return[a(p,{path:"lastNameFather",label:"Apellido Paterno",feedback:(n=u.value)==null?void 0:n.lastNameFather},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.lastNameFather)!=null?"error":"",value:t.value.lastNameFather,"onUpdate:value":e[8]||(e[8]=s=>t.value.lastNameFather=s),onInput:e[9]||(e[9]=s=>u.value!=null?u.value.lastNameFather=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:8},{default:l(()=>{var n;return[a(p,{path:"lastNameMother",label:"Apellido Materno",feedback:(n=u.value)==null?void 0:n.lastNameMother},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.lastNameMother)!=null?"error":"",value:t.value.lastNameMother,"onUpdate:value":e[10]||(e[10]=s=>t.value.lastNameMother=s),onInput:e[11]||(e[11]=s=>u.value!=null?u.value.lastNameMother=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:6},{default:l(()=>[a(p,{path:"gender",label:"Genero"},{default:l(()=>[a(N,{value:t.value.gender,"onUpdate:value":e[12]||(e[12]=n=>t.value.gender=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:m(G)},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:6},{default:l(()=>[a(p,{path:"birthDate",label:"Fecha de Nacimiento"},{default:l(()=>[a(v,{value:t.value.dateOfBirth,"onUpdate:value":e[13]||(e[13]=n=>t.value.dateOfBirth=n),type:"date",clearable:"",placeholder:""},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:6},{default:l(()=>[a(p,{path:"email",label:"Correo Electrónico"},{default:l(()=>[a(v,{value:t.value.email,"onUpdate:value":e[14]||(e[14]=n=>t.value.email=n)},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(r,{span:m(i)==="sm"?12:6},{default:l(()=>[a(p,{path:"phone",label:"Teléfono"},{default:l(()=>[a(v,{value:t.value.phone,"onUpdate:value":e[15]||(e[15]=n=>t.value.phone=n)},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(r,{span:"24"},{default:l(()=>[a(k,{justify:"end"},{default:l(()=>[a(p,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:l(()=>[a(C,{value:t.value.isEnabled,"onUpdate:value":e[16]||(e[16]=n=>t.value.isEnabled=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}});export{me as _};
