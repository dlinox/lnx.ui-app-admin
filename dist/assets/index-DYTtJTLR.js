import{b as q,r as H}from"./LnxIcon.vue_vue_type_script_setup_true_lang-TYfemrMA.js";import{_ as B,a as L,b as Z,c as J}from"./form.configs-CYATX8Jp.js";import{_ as K,a as Q,b as W,c as X}from"./curriculum.services-DklNfMqw.js";import{d as R,e as Y,r as i,g as ee,a3 as ae,a4 as a,ae as ne,a7 as E,a8 as e,ab as I,ad as h,af as F,ag as te,ah as M,ai as N,aj as oe,Z as G,a9 as V}from"./index-DJ1jHABu.js";import{_ as P,a as le,b as j,c as se,d as ue,e as O,f as ie,i as re,g as de,h as _e}from"./debounce.utils-JXFV_6GD.js";const A=R({__name:"CurriculumForm",props:{item:{},modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(z,{emit:_}){const c=_,o=z,d=Y({get:()=>o.modelValue,set:u=>c("update:modelValue",u)}),l=i(!1),s=i(null),t=i(B()),f=i(null),U=i({...L()}),x=async()=>{if(s.value){const u=await s.value.validate();let n=null;u?(l.value=!0,t.value.id?n=await K(t.value):n=await Q(t.value),n.status?(c("success"),d.value=!1):f.value=n.data):console.log("Formulario inválido")}l.value=!1},v=()=>{console.log("Inicializando formulario"),t.value=o.item?{...o.item}:B()};return ee(d,u=>{u&&v()}),(u,n)=>{const C=P,y=le,S=j,r=se,m=ue,g=O,k=ie,b=h,T=F,w=ne;return E(),ae(w,{show:d.value,"onUpdate:show":n[4]||(n[4]=p=>d.value=p)},{default:a(()=>[e(T,{style:{width:"500px"},title:u.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:a(()=>[e(m,{justify:"end"},{default:a(()=>[e(b,{tertiary:"",size:"large",onClick:n[3]||(n[3]=p=>d.value=!1),disabled:l.value},{default:a(()=>n[5]||(n[5]=[I(" Cancelar ")])),_:1},8,["disabled"]),e(b,{size:"large",type:"primary",onClick:x,loading:l.value},{default:a(()=>n[6]||(n[6]=[I("Guardar")])),_:1},8,["loading"])]),_:1})]),default:a(()=>[e(k,{ref_key:"formRef",ref:s,model:t.value,rules:U.value,size:"large"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,{span:"24"},{default:a(()=>{var p;return[e(y,{path:"name",label:"Nombre",feedback:(p=f.value)==null?void 0:p.name},{default:a(()=>{var $;return[e(C,{value:t.value.name,"onUpdate:value":n[0]||(n[0]=D=>t.value.name=D),status:(($=f.value)==null?void 0:$.name)!=null?"error":"",onInput:n[1]||(n[1]=D=>f.value!=null?f.value.name=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1}),e(S,{span:"24"},{default:a(()=>[e(m,{justify:"end"},{default:a(()=>[e(y,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:a(()=>[e(r,{value:t.value.isEnabled,"onUpdate:value":n[2]||(n[2]=p=>t.value.isEnabled=p)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),me={style:{"border-bottom":"1px solid #e9e9e9"}},pe=R({__name:"DataTable",setup(z){const _=i(!1),c=i([]),o=i(!1),d=i(null),l=te({...re()}),s=i({search:null,page:l.page,pageSize:l.pageSize}),t=i({}),x=J(r=>{d.value=r,o.value=!0},async r=>{await X(r),await v()}),v=async()=>{s.value.page=1,await u()},u=async()=>{_.value=!0,t.value=await W(s.value),c.value=t.value.data,l.total=t.value.total,l.pageSize=t.value.per_page,l.page=t.value.current_page,l.pageCount=t.value.last_page,_.value=!1},n=de(()=>{v()},400),C=async r=>{s.value.page=r,await u()},y=async r=>{s.value.page=1,s.value.pageSize=r,await u()};return(async()=>{await u()})(),(r,m)=>{const g=j,k=P,b=O,T=_e;return E(),M(G,null,[N("div",me,[e(b,{gutter:12,style:{padding:"12px 16px"}},{default:a(()=>[e(g,{span:12}),e(g,{span:12},{default:a(()=>[e(k,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":m[0]||(m[0]=w=>s.value.search=w),onInput:V(n),clearable:""},{suffix:a(()=>[e(q,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(g,{span:24},{default:a(()=>[e(T,{key:"id",remote:"","single-line":!1,columns:V(x),data:c.value,pagination:V(Z)(l),"pagination-show-size-picker":!0,loading:_.value,"onUpdate:page":C,"onUpdate:pageSize":y},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),oe(r.$slots,"extra",{reLoadDataTable:v})]),e(A,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=w=>o.value=w),item:d.value,onSuccess:v},null,8,["modelValue","item"])],64)}}}),we=R({__name:"index",setup(z){const _=i(!1);return(c,o)=>{const d=h,l=F;return E(),M(G,null,[e(l,{segmented:{header:!0,content:!0}},{header:a(()=>o[2]||(o[2]=[N("h6",{style:{color:"#999",margin:"0"}},"Gestión de Tipos de Documentos",-1),I(" Tipos de Documentos ")])),"header-extra":a(()=>[e(d,{"render-icon":V(H)("additem"),onClick:o[0]||(o[0]=s=>_.value=!0)},{default:a(()=>o[3]||(o[3]=[I(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),e(pe,null,{extra:a(({reLoadDataTable:s})=>[e(A,{modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=t=>_.value=t),item:null,onSuccess:s},null,8,["modelValue","onSuccess"])]),_:1})],64)}}});export{we as default};
