import{d as se}from"./debounce.utils-DqPPCsFD.js";import{a as De,b as Oe,_ as Te,c as ze}from"./selectables.services-Dh18oZu3.js";import{r as ne}from"./icon.utils-BzaQiRL0.js";import{u as Ee}from"./useBreakpoints-3aRiryBT.js";import{d as E,h as p,c as je,a as Fe,ap as Me,Q as Ne,i as ie,z as M,x as ge,B as Le,A as He,u as Ie,r as C,G as K,D as Y,e as F,p as Ge,f as Pe,I as Ke,ag as j,aq as _e,ar as ve,as as We,at as le,au as oe,a1 as qe,U as H,M as re,av as Je,aw as Qe,ax as Ye,ay as ye,an as X,g as ue,a9 as N,a4 as J,a6 as l,aa as a,ae as z,aj as de,az as Xe,ab as P,_ as ce,al as pe,am as Se,ah as Ve,ac as Q,ai as Ze,ak as et,ad as tt}from"./index-BDy3jz-R.js";import{a as at,i as xe}from"./DataTable.types-DKc2i3jV.js";import{_ as nt}from"./Divider-D7JIxVyu.js";import{A as lt,a as ot,b as rt,_ as st}from"./DataTable-BjnUjyJ9.js";import{i as it,_ as L,u as ut,a as we,b as dt}from"./FormItem-DAU9UqDA.js";import{g as ct,_ as Z,a as ee,b as pt,c as Ce,N as W}from"./Col-C2AyWxkb.js";import{_ as mt}from"./Alert-BTRVvkM7.js";import{u as ft}from"./get-I814HMgj.js";import{A as he,R as gt,_ as _t}from"./InputNumber-B6n7P9Iy.js";import{_ as ke}from"./ButtonGroup-1rx1ZqCK.js";import{_ as vt}from"./Spin-RpCxu1RK.js";import{u as yt}from"./composables-D20BIpNr.js";import"./Tooltip-BC78MQpo.js";import"./Dropdown-DschnT-y.js";const ht=E({name:"ArrowUp",render(){return p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},p("g",{fill:"none"},p("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),bt={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"};function It(){return bt}const Pt=je({name:"DynamicInput",common:Fe,peers:{Input:it,Button:Me},self:It}),me=Ne("n-dynamic-input"),St=E({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:t}=ie(me);return{mergedTheme:e,placeholder:t}},render(){const{mergedTheme:e,placeholder:t,value:c,clsPrefix:r,onUpdateValue:s,disabled:u}=this;return p("div",{class:`${r}-dynamic-input-preset-input`},p(L,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:c,placeholder:t,onUpdateValue:s,disabled:u}))}}),Vt=E({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:t,keyPlaceholderRef:c,valuePlaceholderRef:r}=ie(me);return{mergedTheme:t,keyPlaceholder:c,valuePlaceholder:r,handleKeyInput(s){e.onUpdateValue({key:s,value:e.value.value})},handleValueInput(s){e.onUpdateValue({key:e.value.key,value:s})}}},render(){const{mergedTheme:e,keyPlaceholder:t,valuePlaceholder:c,value:r,clsPrefix:s,disabled:u}=this;return p("div",{class:`${s}-dynamic-input-preset-pair`},p(L,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:r.key,class:`${s}-dynamic-input-pair-input`,placeholder:t,onUpdateValue:this.handleKeyInput,disabled:u}),p(L,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:r.value,class:`${s}-dynamic-input-pair-input`,placeholder:c,onUpdateValue:this.handleValueInput,disabled:u}))}}),xt=M("dynamic-input",{width:"100%"},[M("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[M("dynamic-input-preset-input",{flex:1,alignItems:"center"}),M("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[M("dynamic-input-pair-input",[ge("&:first-child",{"margin-right":"12px"})])]),Le("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[He("icon",{cursor:"pointer"})]),ge("&:last-child",{marginBottom:0})]),M("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[M("form-item-blank",{paddingTop:"0 !important"})])]),q=new WeakMap,wt=Object.assign(Object.assign({},Y.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Ct=E({name:"DynamicInput",props:wt,setup(e,{slots:t}){const{mergedComponentPropsRef:c,mergedClsPrefixRef:r,mergedRtlRef:s,inlineThemeDisabled:u}=Ie(),m=ie(We,null),g=C(e.defaultValue),h=K(e,"value"),_=ft(h,g),I=Y("DynamicInput","-dynamic-input",xt,Pt,e,r),d=F(()=>{const{value:n}=_;if(Array.isArray(n)){const{max:i}=e;return i!==void 0&&n.length>=i}return!1}),w=F(()=>{const{value:n}=_;return Array.isArray(n)?n.length<=e.min:!0}),A=F(()=>{var n,i;return(i=(n=c==null?void 0:c.value)===null||n===void 0?void 0:n.DynamicInput)===null||i===void 0?void 0:i.buttonSize});function S(n){const{onInput:i,"onUpdate:value":b,onUpdateValue:v}=e;i&&re(i,n),b&&re(b,n),v&&re(v,n),g.value=n}function O(n,i){if(n==null||typeof n!="object")return i;const b=le(n)?oe(n):n;let v=q.get(b);return v===void 0&&q.set(b,v=qe()),v}function D(n,i){const{value:b}=_,v=Array.from(b??[]),$=v[n];if(v[n]=i,$&&i&&typeof $=="object"&&typeof i=="object"){const te=le($)?oe($):$,ae=le(i)?oe(i):i,G=q.get(te);G!==void 0&&q.set(ae,G)}S(v)}function B(){k(-1)}function k(n){const{value:i}=_,{onCreate:b}=e,v=Array.from(i??[]);if(b)v.splice(n+1,0,b(n+1)),S(v);else if(t.default)v.splice(n+1,0,null),S(v);else switch(e.preset){case"input":v.splice(n+1,0,""),S(v);break;case"pair":v.splice(n+1,0,{key:"",value:""}),S(v);break}}function x(n){const{value:i}=_;if(!Array.isArray(i))return;const{min:b}=e;if(i.length<=b)return;const{onRemove:v}=e;v&&v(n);const $=Array.from(i);$.splice(n,1),S($)}function o(n,i,b){if(i<0||b<0||i>=n.length||b>=n.length||i===b)return;const v=n[i];n[i]=n[b],n[b]=v}function f(n,i){const{value:b}=_;if(!Array.isArray(b))return;const v=Array.from(b);n==="up"&&o(v,i,i-1),n==="down"&&o(v,i,i+1),S(v)}Ge(me,{mergedThemeRef:I,keyPlaceholderRef:K(e,"keyPlaceholder"),valuePlaceholderRef:K(e,"valuePlaceholder"),placeholderRef:K(e,"placeholder")});const R=Pe("DynamicInput",s,r),T=F(()=>{const{self:{actionMargin:n,actionMarginRtl:i}}=I.value;return{"--action-margin":n,"--action-margin-rtl":i}}),y=u?Ke("dynamic-input",void 0,T,e):void 0;return{locale:ut("DynamicInput").localeRef,rtlEnabled:R,buttonSize:A,mergedClsPrefix:r,NFormItem:m,uncontrolledValue:g,mergedValue:_,insertionDisabled:d,removeDisabled:w,handleCreateClick:B,ensureKey:O,handleValueChange:D,remove:x,move:f,createItem:k,mergedTheme:I,cssVars:u?void 0:T,themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender}},render(){const{$slots:e,itemClass:t,buttonSize:c,mergedClsPrefix:r,mergedValue:s,locale:u,mergedTheme:m,keyField:g,itemStyle:h,preset:_,showSortButton:I,NFormItem:d,ensureKey:w,handleValueChange:A,remove:S,createItem:O,move:D,onRender:B,disabled:k}=this;return B==null||B(),p("div",{class:[`${r}-dynamic-input`,this.rtlEnabled&&`${r}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(s)||s.length===0?p(j,Object.assign({block:!0,ghost:!0,dashed:!0,size:c},this.createButtonProps,{disabled:this.insertionDisabled||k,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>_e(e["create-button-default"],()=>[u.create]),icon:()=>_e(e["create-button-icon"],()=>[p(H,{clsPrefix:r},{default:()=>p(he,null)})])}):s.map((x,o)=>p("div",{key:g?x[g]:w(x,o),"data-key":g?x[g]:w(x,o),class:[`${r}-dynamic-input-item`,t],style:h},ve(e.default,{value:s[o],index:o},()=>[_==="input"?p(St,{disabled:k,clsPrefix:r,value:s[o],parentPath:d?d.path.value:void 0,path:d!=null&&d.path.value?`${d.path.value}[${o}]`:void 0,onUpdateValue:f=>{A(o,f)}}):_==="pair"?p(Vt,{disabled:k,clsPrefix:r,value:s[o],parentPath:d?d.path.value:void 0,path:d!=null&&d.path.value?`${d.path.value}[${o}]`:void 0,onUpdateValue:f=>{A(o,f)}}):null]),ve(e.action,{value:s[o],index:o,create:O,remove:S,move:D},()=>[p("div",{class:`${r}-dynamic-input-item__action`},p(ke,{size:c},{default:()=>[p(j,{disabled:this.removeDisabled||k,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,circle:!0,onClick:()=>{S(o)}},{icon:()=>p(H,{clsPrefix:r},{default:()=>p(gt,null)})}),p(j,{disabled:this.insertionDisabled||k,circle:!0,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,onClick:()=>{O(o)}},{icon:()=>p(H,{clsPrefix:r},{default:()=>p(he,null)})}),I?p(j,{disabled:o===0||k,circle:!0,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,onClick:()=>{D("up",o)}},{icon:()=>p(H,{clsPrefix:r},{default:()=>p(ht,null)})}):null,I?p(j,{disabled:o===s.length-1||k,circle:!0,theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,onClick:()=>{D("down",o)}},{icon:()=>p(H,{clsPrefix:r},{default:()=>p(lt,null)})}):null]}))]))))}}),kt={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};function At(){return kt}const Rt={name:"Flex",self:At},Ut=Object.assign(Object.assign({},Y.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),Bt=E({name:"Flex",props:Ut,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:c}=Ie(e),r=Y("Flex","-flex",void 0,Rt,e,t);return{rtlEnabled:Pe("Flex",c,t),mergedClsPrefix:t,margin:F(()=>{const{size:u}=e;if(Array.isArray(u))return{horizontal:u[0],vertical:u[1]};if(typeof u=="number")return{horizontal:u,vertical:u};const{self:{[Qe("gap",u)]:m}}=r.value,{row:g,col:h}=Ye(m);return{horizontal:ye(h),vertical:ye(g)}})}},render(){const{vertical:e,reverse:t,align:c,inline:r,justify:s,margin:u,wrap:m,mergedClsPrefix:g,rtlEnabled:h}=this,_=Je(ct(this),!1);return _.length?p("div",{role:"none",class:[`${g}-flex`,h&&`${g}-flex--rtl`],style:{display:r?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:s,flexWrap:!m||e?"nowrap":"wrap",alignItems:c,gap:`${u.vertical}px ${u.horizontal}px`}},_):null}}),be=()=>({id:null,name:null,courseId:null,teacherId:null,laboratoryId:null,schedule:{days:[],startHour:null,endHour:null},maxStudents:0,minStudents:0,modality:null,status:"ABIERTO"}),$t=async e=>{try{return(await X().post("/group/load-data-table",e)).data.data}catch{return at()}},Dt=async e=>{try{return(await X().post("/group/load-form",e)).data.data}catch{return null}},Ot=async(e,t,c)=>{try{return{status:!0,data:(await X().post("/group/save",{groups:e,periodId:t,courseId:c})).data.data}}catch(r){return r.response.status===422?{status:!1,data:r.response.data.errors}:{status:!1,data:null}}},Tt=async e=>{try{return await X().delete("/group",{data:{id:e.id}}),!0}catch{return!1}},zt=[{label:"PRESENCIAL",value:"PRESENCIAL"},{label:"VIRTUAL",value:"VIRTUAL"}],Et=[{value:"LUN",label:"LUNES"},{value:"MAR",label:"MARTES"},{value:"MIE",label:"MIÉRCOLES"},{value:"JUE",label:"JUEVES"},{value:"VIE",label:"VIERNES"},{value:"SAB",label:"SÁBADO"},{value:"DOM",label:"DOMINGO"}],jt=E({__name:"ScheduleForm",props:{modelValue:{type:Boolean},groupSelect:{}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const c=t,r=e,s=F({get:()=>r.modelValue,set:I=>c("update:modelValue",I)}),u=C(null),m={days:[],startHour:null,endHour:null},g=C(Object.assign({},m)),h=()=>{var I;(I=u.value)==null||I.validate().then(d=>{d&&(c("submit",g.value,r.groupSelect.id),s.value=!1)})},_=()=>{g.value=Object.assign(m,r.groupSelect.schedule)};return ue(()=>r.modelValue,I=>{I&&r.groupSelect&&(console.log("initForm"),_())}),(I,d)=>{const w=nt,A=rt,S=ot,O=we,D=Z,B=L,k=ee,x=dt,o=j,f=pt,R=pe,T=Se;return N(),J(T,{show:s.value,"onUpdate:show":d[4]||(d[4]=y=>s.value=y)},{default:l(()=>[a(R,{style:{width:"650px"},title:"Horarios del grupo",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:l(()=>[a(f,{justify:"end"},{default:l(()=>[a(o,{onClick:d[3]||(d[3]=y=>s.value=!1)},{default:l(()=>d[6]||(d[6]=[z("Cancelar")])),_:1}),a(o,{type:"primary",onClick:h},{default:l(()=>d[7]||(d[7]=[z(" Aceptar ")])),_:1})]),_:1})]),default:l(()=>[a(w,{dashed:"","title-placement":"left"},{default:l(()=>d[5]||(d[5]=[z(" Horarios ")])),_:1}),a(x,{ref_key:"formRef",ref:u,model:g.value},{default:l(()=>[a(k,{gutter:16},{default:l(()=>[a(D,{span:24},{default:l(()=>[a(O,{label:"Días"},{default:l(()=>[a(S,{value:g.value.days,"onUpdate:value":d[0]||(d[0]=y=>g.value.days=y)},{default:l(()=>[(N(!0),de(ce,null,Xe(P(Et),(y,n)=>(N(),J(A,{key:n,label:y.label,value:y.value},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),a(D,{span:12},{default:l(()=>[a(O,{label:"Hora de inicio"},{default:l(()=>[a(B,{clearable:"",type:"time",value:g.value.startHour,"onUpdate:value":d[1]||(d[1]=y=>g.value.startHour=y),placeholder:"",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),a(D,{span:12},{default:l(()=>[a(O,{label:"Hora de fin"},{default:l(()=>[a(B,{clearable:"",type:"time",value:g.value.endHour,"onUpdate:value":d[2]||(d[2]=y=>g.value.endHour=y),placeholder:"",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),Ft={class:"border-b border-t border-l border-dashed border-gray-300 py-4 ps-4"},Mt={style:{width:"140px",display:"flex","justify-content":"space-evenly","flex-direction":"column"},class:"border-b border-t border-r border-dashed border-gray-300 p-4"},Nt=E({__name:"GroupForm",props:{modelValue:{type:Boolean},item:{},periodId:{},laboratoryOptions:{}},emits:["update:modelValue","success"],setup(e,{emit:t}){const c=yt(),r=t,s=e,{screenSize:u}=Ee(),m=F({get:()=>s.modelValue,set:o=>r("update:modelValue",o)}),g=C(!1),h=C(!1),_=C(null),I=C(!1),d=C([]),w=C([]),A=()=>Object.assign({},{...be(),name:s.item.code+(w.value.length+1)}),S=o=>{_.value=Object.assign({},{...o}),I.value=!0},O=(o,f)=>{w.value=w.value.map(R=>(R.id===f&&(R.schedule=o),R))},D=async()=>{console.log("Enviando formulario"),console.log(w.value),console.log(s.item),h.value=!0,(await Ot(w.value,s.periodId,s.item.id)).status&&(r("success"),m.value=!1),h.value=!1},B=async({search:o=null,id:f=null})=>{d.value=await De({search:o,id:f})},k=se(async o=>{await B({search:o})},400),x=async()=>{if(console.log("Inicializando formulario"),s.item){const o=await Dt({id:s.item.id,periodId:s.periodId});if(o){const f=o.map(R=>R.teacherId).filter(R=>R!=null).join(",");console.log(f),await B({id:f}),w.value=o}else w.value=[{...be(),name:s.item.code}],B({search:""})}};return ue(m,async o=>{o&&(g.value=!0,await x(),g.value=!1)}),(o,f)=>{const R=mt,T=L,y=we,n=Z,i=Ce,b=_t,v=ee,$=j,te=ke,ae=Ct,G=vt,Ae=Bt,Re=pe,Ue=Se;return N(),J(Ue,{show:m.value,"onUpdate:show":f[3]||(f[3]=V=>m.value=V)},{default:l(()=>[a(Re,{style:{width:"1200px"},title:"Registro de grupos",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:l(()=>[a(Ae,{justify:"end"},{default:l(()=>[a($,{onClick:f[1]||(f[1]=()=>m.value=!1)},{default:l(()=>f[7]||(f[7]=[z("Cancelar")])),_:1}),a($,{type:"primary",onClick:D},{default:l(()=>f[8]||(f[8]=[z("Guardar")])),_:1})]),_:1})]),default:l(()=>[a(R,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:l(()=>[a(Ve,{iconName:"information"})]),default:l(()=>[f[4]||(f[4]=z(" Antes de crear un grupo, asegúrese de que el curso tenga los precios asignados para la modalidad y tipo de estudiante correspondientes. "))]),_:1}),a(G,{show:g.value,description:"Cargando formulario"},{default:l(()=>[a(ae,{value:w.value,"onUpdate:value":f[0]||(f[0]=V=>w.value=V),"on-create":A},{"create-button-default":l(()=>f[5]||(f[5]=[z(" Nuevo grupo ")])),default:l(({value:V})=>[Q("div",Ft,[a(v,{gutter:"16"},{default:l(()=>[a(n,{span:P(u)==="lg"||P(u)==="md"?4:24},{default:l(()=>[a(y,{label:"Grupo",path:"name","default-value":"Grupo"},{default:l(()=>[a(T,{value:V.name,"onUpdate:value":U=>V.name=U},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),a(n,{span:P(u)==="lg"?8:P(u)==="md"?10:24},{default:l(()=>[a(y,{label:"Docente",path:"teacher"},{default:l(()=>[a(i,{value:V.teacherId,"onUpdate:value":U=>V.teacherId=U,options:d.value,filterable:"",clearable:"",remote:"","virtual-scroll":!1,onSearch:P(k)},null,8,["value","onUpdate:value","options","onSearch"])]),_:2},1024)]),_:2},1032,["span"]),a(n,{span:P(u)=="lg"?8:P(u)==="md"?10:24},{default:l(()=>[a(y,{label:"Laboratorio",path:"laboratory"},{default:l(()=>[a(i,{value:V.laboratoryId,"onUpdate:value":U=>V.laboratoryId=U,options:s.laboratoryOptions,filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),a(n,{span:P(u)=="lg"?4:P(u)==="md"?8:24},{default:l(()=>[a(y,{label:"Modalidad",path:"modality"},{default:l(()=>[a(i,{value:V.modality,"onUpdate:value":U=>V.modality=U,options:P(zt),filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),a(n,{span:P(u)==="lg"||P(u)==="md"?6:12},{default:l(()=>[a(y,{label:"Cupos máximos",path:"maxStudents"},{default:l(()=>[a(b,{value:V.maxStudents,"onUpdate:value":U=>V.maxStudents=U,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),a(n,{span:P(u)==="lg"||P(u)==="md"?6:12},{default:l(()=>[a(y,{label:"Cupos mínimos",path:"minStudents"},{default:l(()=>[a(b,{value:V.minStudents,"onUpdate:value":U=>V.minStudents=U,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"])]),_:2},1024)])]),action:l(({value:V,index:U,create:Be,remove:fe})=>[Q("div",Mt,[a($,{secondary:"",type:"primary",renderIcon:P(ne)("calendar-add"),onClick:$e=>S(V)},{default:l(()=>f[6]||(f[6]=[z(" Horarios ")])),_:2},1032,["renderIcon","onClick"]),a(te,null,{default:l(()=>[a($,{"render-icon":P(ne)("element-plus"),onClick:()=>{Be(U)}},null,8,["render-icon","onClick"]),a($,{type:"error","render-icon":P(ne)("trash"),onClick:()=>{P(c).warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:V.id?"Eliminar":"Quitar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:async()=>{V.id?await P(Tt)(V)&&fe(U):fe(U)}})}},null,8,["render-icon","onClick"])]),_:2},1024)])]),_:1},8,["value"])]),_:1},8,["show"]),a(jt,{modelValue:I.value,"onUpdate:modelValue":f[2]||(f[2]=V=>I.value=V),groupSelect:_.value,onSubmit:O},null,8,["modelValue","groupSelect"])]),_:1})]),_:1},8,["show"])}}}),Lt=e=>[{title:"Grupos",key:"ops",width:"80px",fixed:"left",render(t){const c=t;return p(j,{type:"tertiary",onClick:()=>e(c)},{default:()=>`${c.countGroups} Grupo(s) `})}},{title:"Area",key:"area",minWidth:"200px"},{title:"Codigo",key:"code",minWidth:"80px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Precios Virtual",key:"virtualPrice",minWidth:"100px",render:t=>p("div",{class:Array.isArray(t.virtualPrice)&&t.virtualPrice.length>0&&t.virtualPrice[0]!==""?"":"text-red-500 relative px-2 py-1 bg-red-100 text-sm font-semibold text-center"},Array.isArray(t.virtualPrice)&&t.virtualPrice.length>0&&t.virtualPrice[0]!==""?t.virtualPrice.map(c=>p(W,{class:"me-1 mb-1",tertiary:!0,bordered:!1,strong:!0},{default:()=>`S/.${c}`})):"Sin definir.")},{title:"Precios Presencial",key:"presentialPrice",minWidth:"100px",render:t=>p("div",{class:Array.isArray(t.presentialPrice)&&t.presentialPrice.length>0&&t.presentialPrice[0]!==""?"":"text-red-500 px-2 py-1 bg-red-100 text-sm font-semibold text-center"},Array.isArray(t.presentialPrice)&&t.presentialPrice.length>0&&t.presentialPrice[0]!==""?t.presentialPrice.map(c=>p(W,{class:"me-1 mb-1",tertiary:!0,bordered:!1,strong:!0},{default:()=>`S/.${c}`})):"Sin definir.")},{title:"Modulo",key:"module",minWidth:"200px"},{title:"Precio Modulo",key:"modulePrice",minWidth:"100px",render:t=>p("div",{class:Array.isArray(t.modulePrice)&&t.modulePrice.length>0&&t.modulePrice[0]!==""?"":"text-red-500 px-2 py-1 bg-red-100 text-sm font-semibold text-center"},Array.isArray(t.modulePrice)&&t.modulePrice.length>0&&t.modulePrice[0]!==""?t.modulePrice.map(c=>p(W,{class:"me-1 mb-1",tertiary:!0,bordered:!1,strong:!0},{default:()=>`S/.${c}`})):"Sin definir.")},{title:"Habilitado",key:"isEnabled",width:"150px",render:t=>p(W,{type:t.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>t.isEnabled?"	Habilitado":"Deshabilitado"})}],Ht=(e=xe())=>({page:e.page,total:e.total,pageSize:e.pageSize,pageCount:e.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${e.total} registros`}}),Gt={style:{"border-bottom":"1px solid #e9e9e9"}},Kt=E({__name:"DataTable",props:{periodId:{},curriculumId:{}},setup(e){const t=e,c=F(()=>({periodId:t.periodId,curriculumId:t.curriculumId})),r=C(!1),s=C([]),u=C(!1),m=C(null),g=Ze({...xe()}),h=C({search:null,page:g.page,pageSize:g.pageSize,filters:{...c.value}}),_=C({}),I=C([]),w=Lt(x=>{m.value=x,u.value=!0}),A=async()=>{h.value.page=1,await S()},S=async()=>{r.value=!0,_.value=await $t(h.value),s.value=_.value.data,g.total=_.value.total,g.pageSize=_.value.per_page,g.page=_.value.current_page,g.pageCount=_.value.last_page,r.value=!1},O=se(()=>{A()},400),D=async x=>{h.value.page=x,await S()},B=async x=>{h.value.page=1,h.value.pageSize=x,await S()},k=async()=>{I.value=await Oe(""),await S()};return ue(c,async(x,o)=>{h.value.filters=x,await A()},{deep:!0}),k(),(x,o)=>{const f=Z,R=L,T=ee,y=st;return N(),de(ce,null,[Q("div",Gt,[a(T,{gutter:12,style:{padding:"12px 16px"}},{default:l(()=>[a(f,{span:12}),a(f,{span:12},{default:l(()=>[a(R,{size:"large",placeholder:"Buscar",value:h.value.search,"onUpdate:value":o[0]||(o[0]=n=>h.value.search=n),onInput:P(O),clearable:""},{suffix:l(()=>[a(Ve,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),a(T,null,{default:l(()=>[a(f,{span:24},{default:l(()=>[a(y,{key:"id",remote:"","single-line":!1,columns:P(w),data:s.value,pagination:P(Ht)(g),"pagination-show-size-picker":!0,loading:r.value,"onUpdate:page":D,"onUpdate:pageSize":B},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),et(x.$slots,"extra",{reLoadDataTable:A})]),a(Nt,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=n=>u.value=n),item:m.value,periodId:x.periodId,laboratoryOptions:I.value,onSuccess:A},null,8,["modelValue","item","periodId","laboratoryOptions"])],64)}}}),ca=E({__name:"index",setup(e){const t=C(!1),c=C([]),r=async h=>{t.value=!0,c.value=await ze(h),t.value=!1},s=se(h=>{r(h)},400),u=C([]),m=C({period:null,curriculumId:null});return(async()=>{await r(""),u.value=await Te()})(),(h,_)=>{const I=Ce,d=Z,w=ee,A=pe;return N(),de(ce,null,[a(A,{segmented:{header:!0,content:!0}},{header:l(()=>_[2]||(_[2]=[Q("h6",{style:{color:"#999",margin:"0"}},"Carga Académica",-1),z(" Apertura de grupos ")])),action:l(()=>[a(w,{gutter:"16",style:{display:"flex","justify-content":"center"}},{default:l(()=>[a(d,{span:"10"},{default:l(()=>[a(I,{value:m.value.curriculumId,"onUpdate:value":_[0]||(_[0]=S=>m.value.curriculumId=S),placeholder:"Seleccionar Plan de estudio",filterable:"",options:u.value,clearable:"","virtual-scroll":!1},null,8,["value","options"])]),_:1}),a(d,{span:"10"},{default:l(()=>[a(I,{value:m.value.period,"onUpdate:value":_[1]||(_[1]=S=>m.value.period=S),placeholder:"Seleccionar Periodo Académico",filterable:"",options:c.value,loading:t.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:P(s)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1}),m.value.period&&m.value.curriculumId?(N(),J(Kt,{key:0,periodId:m.value.period,curriculumId:m.value.curriculumId},null,8,["periodId","curriculumId"])):tt("",!0)],64)}}});export{ca as default};
