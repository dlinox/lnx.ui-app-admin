import{b as M,r as D,_ as J}from"./LnxIcon.vue_vue_type_script_setup_true_lang-TYfemrMA.js";import{_ as K,a as Q,b as X,c as Y}from"./studentType.services-STNexl36.js";import{d as k,a7 as z,a3 as R,a4 as a,a8 as e,ad as $,h as O,e as ee,r as _,g as ae,ae as te,ab as T,af as F,ag as ne,ah as j,ai as q,aj as oe,Z as H,a9 as E}from"./index-DJ1jHABu.js";import{u as le,i as A,N as se,_ as G,a as ue,b as L,c as ie,d as re,e as W,f as de,g as pe,h as _e}from"./debounce.utils-JXFV_6GD.js";const ce=k({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(r,{emit:i}){const u=i,t=le(),d=[{label:"Editar",key:"edit",icon:D("edit-2"),props:{onClick:()=>u("edit")}},{label:"Eliminar",key:"delete",icon:D("trash","red"),props:{style:{color:"red"},onClick:()=>{t.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{u("delete")}})}}}];return(l,s)=>{const o=$,m=J;return z(),R(m,{options:d,placement:"bottom-start"},{default:a(()=>[e(o,null,{default:a(()=>[e(M,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),me=(r,i)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(u){const t=u;return O(ce,{onEdit:()=>{r(t)},onDelete:()=>{i(t)},item:t},{default:()=>"Editar"})}},{title:"Nombre",key:"name",minWidth:"300px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:u=>O(se,{type:u.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>u.isEnabled?"	Habilitado":"Deshabilitado"})}],ge=(r=A())=>({page:r.page,total:r.total,pageSize:r.pageSize,pageCount:r.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${r.total} registros`}}),P=()=>({id:null,name:null,isEnabled:!0}),fe=()=>({name:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),Z=k({__name:"StudentTypeForm",props:{item:{},modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(r,{emit:i}){const u=i,t=r,d=ee({get:()=>t.modelValue,set:p=>u("update:modelValue",p)}),l=_(!1),s=_(null),o=_(P()),m=_(null),U=_({...fe()}),C=async()=>{if(s.value){const p=await s.value.validate();let n=null;p?(l.value=!0,o.value.id?n=await K(o.value):n=await Q(o.value),n.status?(u("success"),d.value=!1):m.value=n.data):console.log("Formulario inválido")}l.value=!1},v=()=>{console.log("Inicializando formulario"),o.value=t.item?{...t.item}:P()};return ae(d,p=>{p&&v()}),(p,n)=>{const S=G,x=ue,I=L,c=ie,g=re,b=W,h=de,y=$,V=F,w=te;return z(),R(w,{show:d.value,"onUpdate:show":n[4]||(n[4]=f=>d.value=f)},{default:a(()=>[e(V,{style:{width:"500px"},title:p.item?"EDITAR TIPO DE DOCUMENTO":"NUEVO TIPO DE DOCUMENTO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:a(()=>[e(g,{justify:"end"},{default:a(()=>[e(y,{tertiary:"",size:"large",onClick:n[3]||(n[3]=f=>d.value=!1),disabled:l.value},{default:a(()=>n[5]||(n[5]=[T(" Cancelar ")])),_:1},8,["disabled"]),e(y,{size:"large",type:"primary",onClick:C,loading:l.value},{default:a(()=>n[6]||(n[6]=[T("Guardar")])),_:1},8,["loading"])]),_:1})]),default:a(()=>[e(h,{ref_key:"formRef",ref:s,model:o.value,rules:U.value,size:"large"},{default:a(()=>[e(b,null,{default:a(()=>[e(I,{span:"24"},{default:a(()=>{var f;return[e(x,{path:"name",label:"Nombre",feedback:(f=m.value)==null?void 0:f.name},{default:a(()=>{var B;return[e(S,{status:((B=m.value)==null?void 0:B.name)!=null?"error":"",value:o.value.name,"onUpdate:value":n[0]||(n[0]=N=>o.value.name=N),onInput:n[1]||(n[1]=N=>m.value!=null?m.value.name=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1}),e(I,{span:"24"},{default:a(()=>[e(g,{justify:"end"},{default:a(()=>[e(x,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:a(()=>[e(c,{value:o.value.isEnabled,"onUpdate:value":n[2]||(n[2]=f=>o.value.isEnabled=f)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),ve={style:{"border-bottom":"1px solid #e9e9e9"}},be=k({__name:"DataTable",setup(r){const i=_(!1),u=_([]),t=_(!1),d=_(null),l=ne({...A()}),s=_({search:null,page:l.page,pageSize:l.pageSize}),o=_({}),C=me(c=>{d.value=c,t.value=!0},async c=>{await Y(c),await v()}),v=async()=>{s.value.page=1,await p()},p=async()=>{i.value=!0,o.value=await X(s.value),u.value=o.value.data,l.total=o.value.total,l.pageSize=o.value.per_page,l.page=o.value.current_page,l.pageCount=o.value.last_page,i.value=!1},n=pe(()=>{v()},400),S=async c=>{s.value.page=c,await p()},x=async c=>{s.value.page=1,s.value.pageSize=c,await p()};return(async()=>{await p()})(),(c,g)=>{const b=L,h=G,y=W,V=_e;return z(),j(H,null,[q("div",ve,[e(y,{gutter:12,style:{padding:"12px 16px"}},{default:a(()=>[e(b,{span:12}),e(b,{span:12},{default:a(()=>[e(h,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":g[0]||(g[0]=w=>s.value.search=w),onInput:E(n),clearable:""},{suffix:a(()=>[e(M,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(b,{span:24},{default:a(()=>[e(V,{key:"id",remote:"","single-line":!1,columns:E(C),data:u.value,pagination:E(ge)(l),"pagination-show-size-picker":!0,loading:i.value,"onUpdate:page":S,"onUpdate:pageSize":x},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),oe(c.$slots,"extra",{reLoadDataTable:v})]),e(Z,{modelValue:t.value,"onUpdate:modelValue":g[1]||(g[1]=w=>t.value=w),item:d.value,onSuccess:v},null,8,["modelValue","item"])],64)}}}),Te=k({__name:"index",setup(r){const i=_(!1);return(u,t)=>{const d=$,l=F;return z(),j(H,null,[e(l,{segmented:{header:!0,content:!0}},{header:a(()=>t[2]||(t[2]=[q("h6",{style:{color:"#999",margin:"0"}},"Gestión de Tipos de Estudiantes",-1),T(" Tipos de Estudiantes ")])),"header-extra":a(()=>[e(d,{"render-icon":E(D)("additem"),onClick:t[0]||(t[0]=s=>i.value=!0)},{default:a(()=>t[3]||(t[3]=[T(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),e(be,null,{extra:a(({reLoadDataTable:s})=>[e(Z,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=o=>i.value=o),item:null,onSuccess:s},null,8,["modelValue","onSuccess"])]),_:1})],64)}}});export{Te as default};
