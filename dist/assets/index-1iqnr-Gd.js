import{d as Y}from"./debounce.utils-DqPPCsFD.js";import{a as Re,b as ye,c as Ue,_ as Be}from"./selectables.services-C9LRGVu0.js";import{r as he}from"./icon.utils-BQfYQcDe.js";import{u as $e}from"./useBreakpoints-CNKOgd3Z.js";import{d as M,h as m,c as De,a as Oe,ap as Te,Q as ze,i as re,z as F,x as pe,B as Ee,A as Me,u as be,r as C,G as K,D as X,e as j,p as je,f as Ie,I as Fe,af as E,aq as me,ar as fe,as as Ne,at as ne,au as le,a1 as Le,U as L,M as oe,av as Ge,aw as He,ax as qe,ay as ge,an as Ke,g as se,aa as N,a5 as Q,a8 as n,ab as a,ah as z,ag as Pe,ad as G,ac as h,ae as Se,ai as ie,aj as we,a9 as We,ak as Je,al as Ve,am as Qe,_ as xe}from"./index-BOXL2TiF.js";import{a as Ye,i as Ce}from"./DataTable.types-B90ErchY.js";import{_ as Ae}from"./Alert-CDPhDIy8.js";import{i as Xe,_ as H,u as Ze}from"./Input-C8gwYOc9.js";import{u as et}from"./get-DOtZouVG.js";import{A as ve,R as tt,_ as at}from"./InputNumber-CfRIz8LN.js";import{_ as nt}from"./ButtonGroup-B_7OBABk.js";import{A as lt,_ as ot}from"./DataTable-D2zYKQJM.js";import{_ as rt}from"./Spin-vUny-_Sr.js";import{g as st,_ as Z,a as ee}from"./Col-BTffZrwQ.js";import{u as it}from"./composables-DOSSxa7-.js";import{_ as ke,a as ut}from"./FormItem-C4wDlZap.js";import{_ as ue,N as W}from"./Select-Biy6SjtC.js";import{_ as dt}from"./Space-CbJKgSxe.js";import"./index-ChN7EhXt.js";import"./Tooltip-BHYxHC_t.js";import"./Dropdown-d17eZhwV.js";const ct=M({name:"ArrowUp",render(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m("g",{fill:"none"},m("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),pt={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"};function mt(){return pt}const ft=De({name:"DynamicInput",common:Oe,peers:{Input:Xe,Button:Te},self:mt}),de=ze("n-dynamic-input"),gt=M({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:t}=re(de);return{mergedTheme:e,placeholder:t}},render(){const{mergedTheme:e,placeholder:t,value:c,clsPrefix:s,onUpdateValue:i,disabled:o}=this;return m("div",{class:`${s}-dynamic-input-preset-input`},m(H,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:c,placeholder:t,onUpdateValue:i,disabled:o}))}}),vt=M({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:t,keyPlaceholderRef:c,valuePlaceholderRef:s}=re(de);return{mergedTheme:t,keyPlaceholder:c,valuePlaceholder:s,handleKeyInput(i){e.onUpdateValue({key:i,value:e.value.value})},handleValueInput(i){e.onUpdateValue({key:e.value.key,value:i})}}},render(){const{mergedTheme:e,keyPlaceholder:t,valuePlaceholder:c,value:s,clsPrefix:i,disabled:o}=this;return m("div",{class:`${i}-dynamic-input-preset-pair`},m(H,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:s.key,class:`${i}-dynamic-input-pair-input`,placeholder:t,onUpdateValue:this.handleKeyInput,disabled:o}),m(H,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:s.value,class:`${i}-dynamic-input-pair-input`,placeholder:c,onUpdateValue:this.handleValueInput,disabled:o}))}}),_t=F("dynamic-input",{width:"100%"},[F("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[F("dynamic-input-preset-input",{flex:1,alignItems:"center"}),F("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[F("dynamic-input-pair-input",[pe("&:first-child",{"margin-right":"12px"})])]),Ee("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[Me("icon",{cursor:"pointer"})]),pe("&:last-child",{marginBottom:0})]),F("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[F("form-item-blank",{paddingTop:"0 !important"})])]),J=new WeakMap,yt=Object.assign(Object.assign({},X.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),ht=M({name:"DynamicInput",props:yt,setup(e,{slots:t}){const{mergedComponentPropsRef:c,mergedClsPrefixRef:s,mergedRtlRef:i,inlineThemeDisabled:o}=be(),p=re(Ne,null),V=C(e.defaultValue),P=K(e,"value"),f=et(P,V),_=X("DynamicInput","-dynamic-input",_t,ft,e,s),x=j(()=>{const{value:l}=f;if(Array.isArray(l)){const{max:r}=e;return r!==void 0&&l.length>=r}return!1}),A=j(()=>{const{value:l}=f;return Array.isArray(l)?l.length<=e.min:!0}),D=j(()=>{var l,r;return(r=(l=c==null?void 0:c.value)===null||l===void 0?void 0:l.DynamicInput)===null||r===void 0?void 0:r.buttonSize});function v(l){const{onInput:r,"onUpdate:value":g,onUpdateValue:y}=e;r&&oe(r,l),g&&oe(g,l),y&&oe(y,l),V.value=l}function S(l,r){if(l==null||typeof l!="object")return r;const g=ne(l)?le(l):l;let y=J.get(g);return y===void 0&&J.set(g,y=Le()),y}function O(l,r){const{value:g}=f,y=Array.from(g??[]),T=y[l];if(y[l]=r,T&&r&&typeof T=="object"&&typeof r=="object"){const te=ne(T)?le(T):T,ae=ne(r)?le(r):r,I=J.get(te);I!==void 0&&J.set(ae,I)}v(y)}function w(){u(-1)}function u(l){const{value:r}=f,{onCreate:g}=e,y=Array.from(r??[]);if(g)y.splice(l+1,0,g(l+1)),v(y);else if(t.default)y.splice(l+1,0,null),v(y);else switch(e.preset){case"input":y.splice(l+1,0,""),v(y);break;case"pair":y.splice(l+1,0,{key:"",value:""}),v(y);break}}function R(l){const{value:r}=f;if(!Array.isArray(r))return;const{min:g}=e;if(r.length<=g)return;const{onRemove:y}=e;y&&y(l);const T=Array.from(r);T.splice(l,1),v(T)}function d(l,r,g){if(r<0||g<0||r>=l.length||g>=l.length||r===g)return;const y=l[r];l[r]=l[g],l[g]=y}function b(l,r){const{value:g}=f;if(!Array.isArray(g))return;const y=Array.from(g);l==="up"&&d(y,r,r-1),l==="down"&&d(y,r,r+1),v(y)}je(de,{mergedThemeRef:_,keyPlaceholderRef:K(e,"keyPlaceholder"),valuePlaceholderRef:K(e,"valuePlaceholder"),placeholderRef:K(e,"placeholder")});const U=Ie("DynamicInput",i,s),B=j(()=>{const{self:{actionMargin:l,actionMarginRtl:r}}=_.value;return{"--action-margin":l,"--action-margin-rtl":r}}),$=o?Fe("dynamic-input",void 0,B,e):void 0;return{locale:Ze("DynamicInput").localeRef,rtlEnabled:U,buttonSize:D,mergedClsPrefix:s,NFormItem:p,uncontrolledValue:V,mergedValue:f,insertionDisabled:x,removeDisabled:A,handleCreateClick:w,ensureKey:S,handleValueChange:O,remove:R,move:b,createItem:u,mergedTheme:_,cssVars:o?void 0:B,themeClass:$==null?void 0:$.themeClass,onRender:$==null?void 0:$.onRender}},render(){const{$slots:e,itemClass:t,buttonSize:c,mergedClsPrefix:s,mergedValue:i,locale:o,mergedTheme:p,keyField:V,itemStyle:P,preset:f,showSortButton:_,NFormItem:x,ensureKey:A,handleValueChange:D,remove:v,createItem:S,move:O,onRender:w,disabled:u}=this;return w==null||w(),m("div",{class:[`${s}-dynamic-input`,this.rtlEnabled&&`${s}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(i)||i.length===0?m(E,Object.assign({block:!0,ghost:!0,dashed:!0,size:c},this.createButtonProps,{disabled:this.insertionDisabled||u,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>me(e["create-button-default"],()=>[o.create]),icon:()=>me(e["create-button-icon"],()=>[m(L,{clsPrefix:s},{default:()=>m(ve,null)})])}):i.map((R,d)=>m("div",{key:V?R[V]:A(R,d),"data-key":V?R[V]:A(R,d),class:[`${s}-dynamic-input-item`,t],style:P},fe(e.default,{value:i[d],index:d},()=>[f==="input"?m(gt,{disabled:u,clsPrefix:s,value:i[d],parentPath:x?x.path.value:void 0,path:x!=null&&x.path.value?`${x.path.value}[${d}]`:void 0,onUpdateValue:b=>{D(d,b)}}):f==="pair"?m(vt,{disabled:u,clsPrefix:s,value:i[d],parentPath:x?x.path.value:void 0,path:x!=null&&x.path.value?`${x.path.value}[${d}]`:void 0,onUpdateValue:b=>{D(d,b)}}):null]),fe(e.action,{value:i[d],index:d,create:S,remove:v,move:O},()=>[m("div",{class:`${s}-dynamic-input-item__action`},m(nt,{size:c},{default:()=>[m(E,{disabled:this.removeDisabled||u,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,circle:!0,onClick:()=>{v(d)}},{icon:()=>m(L,{clsPrefix:s},{default:()=>m(tt,null)})}),m(E,{disabled:this.insertionDisabled||u,circle:!0,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:()=>{S(d)}},{icon:()=>m(L,{clsPrefix:s},{default:()=>m(ve,null)})}),_?m(E,{disabled:d===0||u,circle:!0,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:()=>{O("up",d)}},{icon:()=>m(L,{clsPrefix:s},{default:()=>m(ct,null)})}):null,_?m(E,{disabled:d===i.length-1||u,circle:!0,theme:p.peers.Button,themeOverrides:p.peerOverrides.Button,onClick:()=>{O("down",d)}},{icon:()=>m(L,{clsPrefix:s},{default:()=>m(lt,null)})}):null]}))]))))}}),bt={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};function It(){return bt}const Pt={name:"Flex",self:It},St=Object.assign(Object.assign({},X.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),wt=M({name:"Flex",props:St,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:c}=be(e),s=X("Flex","-flex",void 0,Pt,e,t);return{rtlEnabled:Ie("Flex",c,t),mergedClsPrefix:t,margin:j(()=>{const{size:o}=e;if(Array.isArray(o))return{horizontal:o[0],vertical:o[1]};if(typeof o=="number")return{horizontal:o,vertical:o};const{self:{[He("gap",o)]:p}}=s.value,{row:V,col:P}=qe(p);return{horizontal:ge(P),vertical:ge(V)}})}},render(){const{vertical:e,reverse:t,align:c,inline:s,justify:i,margin:o,wrap:p,mergedClsPrefix:V,rtlEnabled:P}=this,f=Ge(st(this),!1);return f.length?m("div",{role:"none",class:[`${V}-flex`,P&&`${V}-flex--rtl`],style:{display:s?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:i,flexWrap:!p||e?"nowrap":"wrap",alignItems:c,gap:`${o.vertical}px ${o.horizontal}px`}},f):null}}),Vt=[{value:"LUN",label:"LUNES"},{value:"MAR",label:"MARTES"},{value:"MIE",label:"MIÉRCOLES"},{value:"JUE",label:"JUEVES"},{value:"VIE",label:"VIERNES"},{value:"SAB",label:"SÁBADO"},{value:"DOM",label:"DOMINGO"}],_e=()=>({id:null,name:null,courseId:null,teacherId:null,laboratoryId:null,schedule:{days:[],startHour:null,endHour:null},maxStudents:0,minStudents:0,modality:null,status:"ABIERTO"}),q=Ke(),xt=async e=>{try{return(await q.post("/group/load-data-table",e)).data.data}catch{return Ye()}},Ct=async e=>{try{return(await q.post("/group/load-form",e)).data.data}catch{return null}},At=async(e,t,c)=>{try{return{status:!0,data:(await q.post("/group/save",{groups:e,periodId:t,courseId:c})).data.data}}catch(s){return s.response.status===422?{status:!1,data:s.response.data.errors}:{status:!1,data:null}}},kt=async e=>{try{return await q.delete("/group",{data:{id:e.id}}),!0}catch{return!1}},Rt=async e=>{try{return await q.post("/group/clone",e),!0}catch{return!1}},Ut=[{label:"PRESENCIAL",value:"PRESENCIAL"},{label:"VIRTUAL",value:"VIRTUAL"}],Bt={class:"border border-dashed border-gray-400 p-4 rounded relative hover:bg-gray-50"},$t={class:"absolute top-0 right-0"},Dt=M({__name:"GroupForm",props:{modelValue:{type:Boolean},item:{},periodId:{},laboratoryOptions:{}},emits:["update:modelValue","success"],setup(e,{emit:t}){const c=it(),s=t,i=e,{screenSize:o}=$e(),p=j({get:()=>i.modelValue,set:w=>s("update:modelValue",w)}),V=C(!1),P=C(!1),f=C([]),_=C([]),x=()=>Object.assign({},{..._e(),name:i.item.code+(_.value.length+1)}),A=w=>{_.value.splice(w,1)},D=async()=>{console.log("Enviando formulario"),console.log(_.value),console.log(i.item),P.value=!0,(await At(_.value,i.periodId,i.item.id)).status&&(s("success"),p.value=!1),P.value=!1},v=async({search:w=null,id:u=null})=>{f.value=await Re({search:w,id:u})},S=Y(async w=>{await v({search:w})},400),O=async()=>{if(console.log("Inicializando formulario"),i.item){const w=await Ct({id:i.item.id,periodId:i.periodId});if(w){const u=w.map(R=>R.teacherId).filter(R=>R!=null).join(",");console.log(u),await v({id:u}),_.value=w}else _.value=[{..._e(),name:i.item.code}],v({search:""})}};return se(p,async w=>{w&&(V.value=!0,await O(),V.value=!1)}),(w,u)=>{const R=Ae,d=H,b=ke,U=Z,B=ue,$=at,l=ee,r=E,g=ht,y=rt,T=wt,te=ie,ae=we;return N(),Q(ae,{show:p.value,"onUpdate:show":u[3]||(u[3]=I=>p.value=I)},{default:n(()=>[a(te,{style:{width:"1200px"},title:"Registro de grupos",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:n(()=>[a(T,{justify:"end"},{default:n(()=>[a(r,{onClick:u[2]||(u[2]=()=>p.value=!1)},{default:n(()=>u[8]||(u[8]=[z("Cancelar")])),_:1}),a(r,{type:"primary",onClick:D},{default:n(()=>u[9]||(u[9]=[z("Guardar")])),_:1})]),_:1})]),default:n(()=>[a(R,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:n(()=>[a(Pe,{iconName:"information"})]),default:n(()=>[u[4]||(u[4]=z(" Antes de crear un grupo, asegúrese de que el curso tenga los precios asignados para la modalidad y tipo de estudiante correspondientes. "))]),_:1}),a(y,{show:V.value,description:"Cargando formulario"},{default:n(()=>[a(g,{value:_.value,"onUpdate:value":u[0]||(u[0]=I=>_.value=I),"on-create":x,class:"mb-4"},{"create-button-default":n(()=>u[5]||(u[5]=[z(" Nuevo grupo ")])),default:n(({value:I,index:ce})=>[G("div",Bt,[a(l,{gutter:"16"},{default:n(()=>[a(U,{span:h(o)==="lg"||h(o)==="md"?4:24},{default:n(()=>[a(b,{label:"Grupo",path:"name","default-value":"Grupo"},{default:n(()=>[a(d,{value:I.name,"onUpdate:value":k=>I.name=k},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)==="lg"?8:h(o)==="md"?10:24},{default:n(()=>[a(b,{label:"Docente",path:"teacher"},{default:n(()=>[a(B,{value:I.teacherId,"onUpdate:value":k=>I.teacherId=k,options:f.value,filterable:"",clearable:"",remote:"","virtual-scroll":!1,onSearch:h(S)},null,8,["value","onUpdate:value","options","onSearch"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)=="lg"?8:h(o)==="md"?10:24},{default:n(()=>[a(b,{label:"Laboratorio",path:"laboratory"},{default:n(()=>[a(B,{value:I.laboratoryId,"onUpdate:value":k=>I.laboratoryId=k,options:i.laboratoryOptions,filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)=="lg"?4:h(o)==="md"?8:24},{default:n(()=>[a(b,{label:"Modalidad",path:"modality"},{default:n(()=>[a(B,{value:I.modality,"onUpdate:value":k=>I.modality=k,options:h(Ut),filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)==="lg"||h(o)==="md"?4:6},{default:n(()=>[a(b,{label:"Cupos máximos",path:"maxStudents"},{default:n(()=>[a($,{value:I.maxStudents,"onUpdate:value":k=>I.maxStudents=k,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)==="lg"||h(o)==="md"?4:6},{default:n(()=>[a(b,{label:"Cupos mínimos",path:"minStudents"},{default:n(()=>[a($,{value:I.minStudents,"onUpdate:value":k=>I.minStudents=k,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)==="lg"||h(o)==="md"?8:12},{default:n(()=>[a(b,{label:"Horario - Días",path:"availableStudents"},{default:n(()=>[a(B,{value:I.schedule.days,"onUpdate:value":k=>I.schedule.days=k,multiple:"","fallback-option":!1,options:h(Vt)},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)==="lg"||h(o)==="md"?4:6},{default:n(()=>[a(b,{label:"Hora de inicio"},{default:n(()=>[a(d,{clearable:"",type:"time",value:I.schedule.startHour,"onUpdate:value":k=>I.schedule.startHour=k,placeholder:"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),a(U,{span:h(o)==="lg"||h(o)==="md"?4:6},{default:n(()=>[a(b,{label:"Hora de fin"},{default:n(()=>[a(d,{clearable:"",type:"time",value:I.schedule.endHour,"onUpdate:value":k=>I.schedule.endHour=k,placeholder:"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"])]),_:2},1024),G("div",$t,[a(r,{secondary:"",type:"error","render-icon":h(he)("trash"),onClick:()=>{h(c).warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:I.id?"Eliminar":"Quitar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:async()=>{I.id?await h(kt)(I)&&A(ce):A(ce)}})}},null,8,["render-icon","onClick"])])])]),action:n(({})=>u[6]||(u[6]=[G("div",null,null,-1)])),_:1},8,["value"]),_.value.length>0?(N(),Q(r,{key:0,block:"",secondary:"",type:"primary",class:"mt-4",onClick:u[1]||(u[1]=()=>_.value.push(x()))},{default:n(()=>u[7]||(u[7]=[z(" Agregar grupo ")])),_:1})):Se("",!0)]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}}),Ot=M({__name:"GroupCloneForm",props:{modelValue:{type:Boolean},curriculumId:{},periodId:{}},emits:["update:modelValue","success","cancel"],setup(e,{emit:t}){const c=t,s=e,i={periodReferenceId:{trigger:["change","blur"],type:"number",required:!0,message:"Este campo es requerido"}},o=C(!1),p=C([]),V=async v=>{o.value=!0,p.value=await ye(v),o.value=!1},P=Y(v=>{V(v)},400),f=j({get:()=>s.modelValue,set:v=>c("update:modelValue",v)}),_=C(null),A=C(Object.assign({},{periodId:null,periodReferenceId:null,curriculumId:null})),D=async()=>{_.value&&await _.value.validate()&&(A.value.curriculumId=s.curriculumId,A.value.periodId=s.periodId,console.log("form",A.value),await Rt(A.value)&&(c("success"),f.value=!1))};return se(()=>s.modelValue,async v=>{v&&await V("")}),(v,S)=>{const O=We("LnxIcon"),w=Ae,u=ue,R=ke,d=Z,b=ee,U=ut,B=E,$=dt,l=ie,r=we;return N(),Q(r,{show:f.value,"onUpdate:show":S[2]||(S[2]=g=>f.value=g)},{default:n(()=>[a(l,{style:{width:"500px"},title:"Clonar Grupos de un Periodo a Otro",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:n(()=>[a($,{justify:"end"},{default:n(()=>[a(B,{onClick:S[1]||(S[1]=g=>f.value=!1)},{default:n(()=>S[4]||(S[4]=[z("Cancelar")])),_:1}),a(B,{type:"primary",onClick:D},{default:n(()=>S[5]||(S[5]=[z(" Aceptar ")])),_:1})]),_:1})]),default:n(()=>[a(w,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:n(()=>[a(O,{iconName:"information"})]),default:n(()=>[S[3]||(S[3]=z(" Para evitar problemas, la clonación solo está disponible si no hay matrículas en este periodo académico. Antes de continuar, verifica esta condición. "))]),_:1}),a(U,{ref_key:"formRef",ref:_,model:A.value,rules:i},{default:n(()=>[a(b,{gutter:16},{default:n(()=>[a(d,{span:24},{default:n(()=>[a(R,{label:"Periodo Académico de referencia",path:"periodReferenceId"},{default:n(()=>[a(u,{value:A.value.periodReferenceId,"onUpdate:value":S[0]||(S[0]=g=>A.value.periodReferenceId=g),placeholder:"Seleccionar Periodo Académico",filterable:"",options:p.value,loading:o.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:h(P)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),Tt=e=>[{title:"Grupos",key:"ops",width:"80px",fixed:"left",render(t){const c=t;return m(E,{type:"tertiary",onClick:()=>e(c)},{default:()=>`${c.countGroups} Grupo(s) `})}},{title:"Area",key:"area",minWidth:"200px"},{title:"Codigo",key:"code",minWidth:"80px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Precios Virtual",key:"virtualPrice",minWidth:"100px",render:t=>m("div",{class:Array.isArray(t.virtualPrice)&&t.virtualPrice.length>0&&t.virtualPrice[0]!==""?"":"text-red-500 relative px-2 py-1 bg-red-100 text-sm font-semibold text-center"},Array.isArray(t.virtualPrice)&&t.virtualPrice.length>0&&t.virtualPrice[0]!==""?t.virtualPrice.map(c=>m(W,{class:"me-1 mb-1",tertiary:!0,bordered:!1,strong:!0},{default:()=>`S/.${c}`})):"Sin definir.")},{title:"Precios Presencial",key:"presentialPrice",minWidth:"100px",render:t=>m("div",{class:Array.isArray(t.presentialPrice)&&t.presentialPrice.length>0&&t.presentialPrice[0]!==""?"":"text-red-500 px-2 py-1 bg-red-100 text-sm font-semibold text-center"},Array.isArray(t.presentialPrice)&&t.presentialPrice.length>0&&t.presentialPrice[0]!==""?t.presentialPrice.map(c=>m(W,{class:"me-1 mb-1",tertiary:!0,bordered:!1,strong:!0},{default:()=>`S/.${c}`})):"Sin definir.")},{title:"Modulo",key:"module",minWidth:"200px"},{title:"Precio Modulo",key:"modulePrice",minWidth:"100px",render:t=>m("div",{class:Array.isArray(t.modulePrice)&&t.modulePrice.length>0&&t.modulePrice[0]!==""?"":"text-red-500 px-2 py-1 bg-red-100 text-sm font-semibold text-center"},Array.isArray(t.modulePrice)&&t.modulePrice.length>0&&t.modulePrice[0]!==""?t.modulePrice.map(c=>m(W,{class:"me-1 mb-1",tertiary:!0,bordered:!1,strong:!0},{default:()=>`S/.${c}`})):"Sin definir.")},{title:"Habilitado",key:"isEnabled",width:"150px",render:t=>m(W,{type:t.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>t.isEnabled?"	Habilitado":"Deshabilitado"})}],zt=(e=Ce())=>({page:e.page,total:e.total,pageSize:e.pageSize,pageCount:e.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${e.total} registros`}}),Et={style:{"border-bottom":"1px solid #e9e9e9"}},Mt=M({__name:"DataTable",props:{periodId:{},curriculumId:{}},setup(e){const t=e,c=j(()=>({periodId:t.periodId,curriculumId:t.curriculumId})),s=C(!1),i=C([]),o=C(!1),p=C(!1),V=C(null),P=Je({...Ce()}),f=C({search:null,page:P.page,pageSize:P.pageSize,filters:{...c.value}}),_=C({}),x=C([]),D=Tt(d=>{V.value=d,o.value=!0}),v=async()=>{f.value.page=1,await S()},S=async()=>{s.value=!0,_.value=await xt(f.value),i.value=_.value.data,P.total=_.value.total,P.pageSize=_.value.per_page,P.page=_.value.current_page,P.pageCount=_.value.last_page,s.value=!1},O=Y(()=>{v()},400),w=async d=>{f.value.page=d,await S()},u=async d=>{f.value.page=1,f.value.pageSize=d,await S()},R=async()=>{x.value=await Ue(""),await S()};return se(c,async(d,b)=>{f.value.filters=d,await v()},{deep:!0}),R(),(d,b)=>{const U=E,B=Z,$=H,l=ee,r=ot;return N(),Ve(xe,null,[G("div",Et,[a(l,{gutter:12,style:{padding:"12px 16px"}},{default:n(()=>[a(B,{span:12,class:"self-center"},{default:n(()=>[a(U,{"render-icon":h(he)("convertshape"),onClick:b[0]||(b[0]=g=>p.value=!0)},{default:n(()=>b[4]||(b[4]=[z(" Clonar ")])),_:1},8,["render-icon"])]),_:1}),a(B,{span:12},{default:n(()=>[a($,{size:"large",placeholder:"Buscar",value:f.value.search,"onUpdate:value":b[1]||(b[1]=g=>f.value.search=g),onInput:h(O),clearable:""},{suffix:n(()=>[a(Pe,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),a(l,null,{default:n(()=>[a(B,{span:24},{default:n(()=>[a(r,{key:"id",remote:"","single-line":!1,columns:h(D),data:i.value,pagination:h(zt)(P),"pagination-show-size-picker":!0,loading:s.value,"onUpdate:page":w,"onUpdate:pageSize":u},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),Qe(d.$slots,"extra",{reLoadDataTable:v})]),a(Dt,{modelValue:o.value,"onUpdate:modelValue":b[2]||(b[2]=g=>o.value=g),item:V.value,periodId:d.periodId,laboratoryOptions:x.value,onSuccess:v},null,8,["modelValue","item","periodId","laboratoryOptions"]),a(Ot,{modelValue:p.value,"onUpdate:modelValue":b[3]||(b[3]=g=>p.value=g),periodId:d.periodId,curriculumId:d.curriculumId,onSuccess:v},null,8,["modelValue","periodId","curriculumId"])],64)}}}),sa=M({__name:"index",setup(e){const t=C(!1),c=C([]),s=async P=>{t.value=!0,c.value=await ye(P),t.value=!1},i=Y(P=>{s(P)},400),o=C([]),p=C({period:null,curriculumId:null});return(async()=>{await s(""),o.value=await Be()})(),(P,f)=>{const _=ue,x=Z,A=ee,D=ie;return N(),Ve(xe,null,[a(D,{segmented:{header:!0,content:!0}},{header:n(()=>f[2]||(f[2]=[G("h6",{style:{color:"#999",margin:"0"}},"Carga Académica",-1),z(" Apertura de grupos ")])),action:n(()=>[a(A,{gutter:"16",style:{display:"flex","justify-content":"center"}},{default:n(()=>[a(x,{span:"10"},{default:n(()=>[a(_,{value:p.value.curriculumId,"onUpdate:value":f[0]||(f[0]=v=>p.value.curriculumId=v),placeholder:"Seleccionar Plan de estudio",filterable:"",options:o.value,clearable:"","virtual-scroll":!1},null,8,["value","options"])]),_:1}),a(x,{span:"10"},{default:n(()=>[a(_,{value:p.value.period,"onUpdate:value":f[1]||(f[1]=v=>p.value.period=v),placeholder:"Seleccionar Periodo Académico",filterable:"",options:c.value,loading:t.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:h(i)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1}),p.value.period&&p.value.curriculumId?(N(),Q(Mt,{key:0,periodId:p.value.period,curriculumId:p.value.curriculumId},null,8,["periodId","curriculumId"])):Se("",!0)],64)}}});export{sa as default};
