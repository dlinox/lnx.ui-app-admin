import{d as ne}from"./debounce.utils-DqPPCsFD.js";import{a as ve,b as Re,_ as Be}from"./selectables.services-BXwSu-ds.js";import{r as he}from"./icon.utils-upfZx_ME.js";import{u as Ae}from"./useBreakpoints-BUIf66wm.js";import{_ as Ue,a as $e,b as ze,c as Te,d as De,e as Oe}from"./group.services-DvwWytaV.js";import{d as F,h as n,c as Fe,aM as Me,a as _e,Q as Ee,i as le,z as M,B as Ne,x as ce,A as L,af as T,aN as pe,aO as me,u as ye,aP as We,r as w,H as q,G as Q,e as O,p as Le,f as je,K as be,U as W,aQ as Z,aR as ee,a2 as He,N as te,aS as Ge,j as re,a8 as J,a9 as N,aH as xe,aa as r,ab as t,aA as ie,az as D,aG as Ce,ac as Ie,ae as j,ad as C,a7 as qe,aI as Ke,aF as Pe,_ as Se,aJ as Je}from"./index-C2oNslvg.js";import{_ as Ve}from"./Alert-DOocvq-e.js";import{_ as Qe}from"./Spin-CdACqLxD.js";import{i as Ye,_ as H}from"./Input-BQ3poveX.js";import{u as Xe}from"./use-merged-state-CDxsXcm8.js";import{u as Ze}from"./Suffix-DF6h_xjA.js";import{A as fe,R as et,_ as tt}from"./InputNumber-CH5ypLym.js";import{_ as ot}from"./ButtonGroup-DePZMpCl.js";import{A as at,_ as nt}from"./DataTable-ByPH7O8r.js";import{u as lt}from"./composables-CkauXcFl.js";import{_ as Y,a as X}from"./Col-BtUCTmqt.js";import{a as we,_ as rt}from"./FormItem-DXyfdPQq.js";import{_ as se}from"./Select-DaUiqjpd.js";import{_ as it}from"./Space-G3ZiPI5e.js";import{i as ke}from"./DataTable.types-BEg5m_To.js";import{u as st,N as oe}from"./Popover-C-qVBvl0.js";import{_ as ut}from"./Tag-Dwx6Rgco.js";import"./Tooltip-DX3_NcDh.js";import"./get-2__u8Ul3.js";import"./Dropdown-tA5u1ub_.js";const dt=F({name:"ArrowUp",render(){return n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n("g",{fill:"none"},n("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),ct={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"};function pt(){return ct}const mt=Fe({name:"DynamicInput",common:_e,peers:{Input:Ye,Button:Me},self:pt}),ue=Ee("n-dynamic-input"),ft=F({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:a}=le(ue);return{mergedTheme:e,placeholder:a}},render(){const{mergedTheme:e,placeholder:a,value:s,clsPrefix:o,onUpdateValue:u,disabled:i}=this;return n("div",{class:`${o}-dynamic-input-preset-input`},n(H,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:s,placeholder:a,onUpdateValue:u,disabled:i}))}}),gt=F({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:a,keyPlaceholderRef:s,valuePlaceholderRef:o}=le(ue);return{mergedTheme:a,keyPlaceholder:s,valuePlaceholder:o,handleKeyInput(u){e.onUpdateValue({key:u,value:e.value.value})},handleValueInput(u){e.onUpdateValue({key:e.value.key,value:u})}}},render(){const{mergedTheme:e,keyPlaceholder:a,valuePlaceholder:s,value:o,clsPrefix:u,disabled:i}=this;return n("div",{class:`${u}-dynamic-input-preset-pair`},n(H,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:o.key,class:`${u}-dynamic-input-pair-input`,placeholder:a,onUpdateValue:this.handleKeyInput,disabled:i}),n(H,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:o.value,class:`${u}-dynamic-input-pair-input`,placeholder:s,onUpdateValue:this.handleValueInput,disabled:i}))}}),vt=M("dynamic-input",{width:"100%"},[M("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[M("dynamic-input-preset-input",{flex:1,alignItems:"center"}),M("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[M("dynamic-input-pair-input",[ce("&:first-child",{"margin-right":"12px"})])]),Ne("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[L("icon",{cursor:"pointer"})]),ce("&:last-child",{marginBottom:0})]),M("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[M("form-item-blank",{paddingTop:"0 !important"})])]),K=new WeakMap,ht=Object.assign(Object.assign({},Q.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),_t=F({name:"DynamicInput",props:ht,setup(e,{slots:a}){const{mergedComponentPropsRef:s,mergedClsPrefixRef:o,mergedRtlRef:u,inlineThemeDisabled:i}=ye(),f=le(We,null),I=w(e.defaultValue),x=q(e,"value"),d=Xe(x,I),b=Q("DynamicInput","-dynamic-input",vt,mt,e,o),y=O(()=>{const{value:l}=d;if(Array.isArray(l)){const{max:m}=e;return m!==void 0&&l.length>=m}return!1}),P=O(()=>{const{value:l}=d;return Array.isArray(l)?l.length<=e.min:!0}),R=O(()=>{var l,m;return(m=(l=s==null?void 0:s.value)===null||l===void 0?void 0:l.DynamicInput)===null||m===void 0?void 0:m.buttonSize});function p(l){const{onInput:m,"onUpdate:value":v,onUpdateValue:h}=e;m&&te(m,l),v&&te(v,l),h&&te(h,l),I.value=l}function c(l,m){if(l==null||typeof l!="object")return m;const v=Z(l)?ee(l):l;let h=K.get(v);return h===void 0&&K.set(v,h=He()),h}function U(l,m){const{value:v}=d,h=Array.from(v??[]),_=h[l];if(h[l]=m,_&&m&&typeof _=="object"&&typeof m=="object"){const G=Z(_)?ee(_):_,B=Z(m)?ee(m):m,de=K.get(G);de!==void 0&&K.set(B,de)}p(h)}function $(){S(-1)}function S(l){const{value:m}=d,{onCreate:v}=e,h=Array.from(m??[]);if(v)h.splice(l+1,0,v(l+1)),p(h);else if(a.default)h.splice(l+1,0,null),p(h);else switch(e.preset){case"input":h.splice(l+1,0,""),p(h);break;case"pair":h.splice(l+1,0,{key:"",value:""}),p(h);break}}function k(l){const{value:m}=d;if(!Array.isArray(m))return;const{min:v}=e;if(m.length<=v)return;const{onRemove:h}=e;h&&h(l);const _=Array.from(m);_.splice(l,1),p(_)}function g(l,m,v){if(m<0||v<0||m>=l.length||v>=l.length||m===v)return;const h=l[m];l[m]=l[v],l[v]=h}function V(l,m){const{value:v}=d;if(!Array.isArray(v))return;const h=Array.from(v);l==="up"&&g(h,m,m-1),l==="down"&&g(h,m,m+1),p(h)}Le(ue,{mergedThemeRef:b,keyPlaceholderRef:q(e,"keyPlaceholder"),valuePlaceholderRef:q(e,"valuePlaceholder"),placeholderRef:q(e,"placeholder")});const E=je("DynamicInput",u,o),A=O(()=>{const{self:{actionMargin:l,actionMarginRtl:m}}=b.value;return{"--action-margin":l,"--action-margin-rtl":m}}),z=i?be("dynamic-input",void 0,A,e):void 0;return{locale:Ze("DynamicInput").localeRef,rtlEnabled:E,buttonSize:R,mergedClsPrefix:o,NFormItem:f,uncontrolledValue:I,mergedValue:d,insertionDisabled:y,removeDisabled:P,handleCreateClick:$,ensureKey:c,handleValueChange:U,remove:k,move:V,createItem:S,mergedTheme:b,cssVars:i?void 0:A,themeClass:z==null?void 0:z.themeClass,onRender:z==null?void 0:z.onRender}},render(){const{$slots:e,itemClass:a,buttonSize:s,mergedClsPrefix:o,mergedValue:u,locale:i,mergedTheme:f,keyField:I,itemStyle:x,preset:d,showSortButton:b,NFormItem:y,ensureKey:P,handleValueChange:R,remove:p,createItem:c,move:U,onRender:$,disabled:S}=this;return $==null||$(),n("div",{class:[`${o}-dynamic-input`,this.rtlEnabled&&`${o}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(u)||u.length===0?n(T,Object.assign({block:!0,ghost:!0,dashed:!0,size:s},this.createButtonProps,{disabled:this.insertionDisabled||S,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>pe(e["create-button-default"],()=>[i.create]),icon:()=>pe(e["create-button-icon"],()=>[n(W,{clsPrefix:o},{default:()=>n(fe,null)})])}):u.map((k,g)=>n("div",{key:I?k[I]:P(k,g),"data-key":I?k[I]:P(k,g),class:[`${o}-dynamic-input-item`,a],style:x},me(e.default,{value:u[g],index:g},()=>[d==="input"?n(ft,{disabled:S,clsPrefix:o,value:u[g],parentPath:y?y.path.value:void 0,path:y!=null&&y.path.value?`${y.path.value}[${g}]`:void 0,onUpdateValue:V=>{R(g,V)}}):d==="pair"?n(gt,{disabled:S,clsPrefix:o,value:u[g],parentPath:y?y.path.value:void 0,path:y!=null&&y.path.value?`${y.path.value}[${g}]`:void 0,onUpdateValue:V=>{R(g,V)}}):null]),me(e.action,{value:u[g],index:g,create:c,remove:p,move:U},()=>[n("div",{class:`${o}-dynamic-input-item__action`},n(ot,{size:s},{default:()=>[n(T,{disabled:this.removeDisabled||S,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,circle:!0,onClick:()=>{p(g)}},{icon:()=>n(W,{clsPrefix:o},{default:()=>n(et,null)})}),n(T,{disabled:this.insertionDisabled||S,circle:!0,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:()=>{c(g)}},{icon:()=>n(W,{clsPrefix:o},{default:()=>n(fe,null)})}),b?n(T,{disabled:g===0||S,circle:!0,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:()=>{U("up",g)}},{icon:()=>n(W,{clsPrefix:o},{default:()=>n(dt,null)})}):null,b?n(T,{disabled:g===u.length-1||S,circle:!0,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:()=>{U("down",g)}},{icon:()=>n(W,{clsPrefix:o},{default:()=>n(at,null)})}):null]}))]))))}}),yt={headerFontSize1:"30px",headerFontSize2:"22px",headerFontSize3:"18px",headerFontSize4:"16px",headerFontSize5:"16px",headerFontSize6:"16px",headerMargin1:"28px 0 20px 0",headerMargin2:"28px 0 20px 0",headerMargin3:"28px 0 20px 0",headerMargin4:"28px 0 18px 0",headerMargin5:"28px 0 18px 0",headerMargin6:"28px 0 18px 0",headerPrefixWidth1:"16px",headerPrefixWidth2:"16px",headerPrefixWidth3:"12px",headerPrefixWidth4:"12px",headerPrefixWidth5:"12px",headerPrefixWidth6:"12px",headerBarWidth1:"4px",headerBarWidth2:"4px",headerBarWidth3:"3px",headerBarWidth4:"3px",headerBarWidth5:"3px",headerBarWidth6:"3px",pMargin:"16px 0 16px 0",liMargin:".25em 0 0 0",olPadding:"0 0 0 2em",ulPadding:"0 0 0 2em"};function bt(e){const{primaryColor:a,textColor2:s,borderColor:o,lineHeight:u,fontSize:i,borderRadiusSmall:f,dividerColor:I,fontWeightStrong:x,textColor1:d,textColor3:b,infoColor:y,warningColor:P,errorColor:R,successColor:p,codeColor:c}=e;return Object.assign(Object.assign({},yt),{aTextColor:a,blockquoteTextColor:s,blockquotePrefixColor:o,blockquoteLineHeight:u,blockquoteFontSize:i,codeBorderRadius:f,liTextColor:s,liLineHeight:u,liFontSize:i,hrColor:I,headerFontWeight:x,headerTextColor:d,pTextColor:s,pTextColor1Depth:d,pTextColor2Depth:s,pTextColor3Depth:b,pLineHeight:u,pFontSize:i,headerBarColor:a,headerBarColorPrimary:a,headerBarColorInfo:y,headerBarColorError:R,headerBarColorWarning:P,headerBarColorSuccess:p,textColor:s,textColor1Depth:d,textColor2Depth:s,textColor3Depth:b,textColorPrimary:a,textColorInfo:y,textColorSuccess:p,textColorWarning:P,textColorError:R,codeTextColor:s,codeColor:c,codeBorder:"1px solid #0000"})}const xt={common:_e,self:bt},Ct=M("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[L("strong",`
 font-weight: var(--n-font-weight-strong);
 `),L("italic",{fontStyle:"italic"}),L("underline",{textDecoration:"underline"}),L("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),It=Object.assign(Object.assign({},Q.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),ae=F({name:"Text",props:It,setup(e){const{mergedClsPrefixRef:a,inlineThemeDisabled:s}=ye(e),o=Q("Typography","-text",Ct,xt,e,a),u=O(()=>{const{depth:f,type:I}=e,x=I==="default"?f===void 0?"textColor":`textColor${f}Depth`:Ge("textColor",I),{common:{fontWeightStrong:d,fontFamilyMono:b,cubicBezierEaseInOut:y},self:{codeTextColor:P,codeBorderRadius:R,codeColor:p,codeBorder:c,[x]:U}}=o.value;return{"--n-bezier":y,"--n-text-color":U,"--n-font-weight-strong":d,"--n-font-famliy-mono":b,"--n-code-border-radius":R,"--n-code-text-color":P,"--n-code-color":p,"--n-code-border":c}}),i=s?be("text",O(()=>`${e.type[0]}${e.depth||""}`),u,e):void 0;return{mergedClsPrefix:a,compitableTag:st(e,["as","tag"]),cssVars:s?void 0:u,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var e,a,s;const{mergedClsPrefix:o}=this;(e=this.onRender)===null||e===void 0||e.call(this);const u=[`${o}-text`,this.themeClass,{[`${o}-text--code`]:this.code,[`${o}-text--delete`]:this.delete,[`${o}-text--strong`]:this.strong,[`${o}-text--italic`]:this.italic,[`${o}-text--underline`]:this.underline}],i=(s=(a=this.$slots).default)===null||s===void 0?void 0:s.call(a);return this.code?n("code",{class:u,style:this.cssVars},this.delete?n("del",null,i):i):this.delete?n("del",{class:u,style:this.cssVars},i):n(this.compitableTag||"span",{class:u,style:this.cssVars},i)}}),Pt=[{value:"LUN",label:"LUNES"},{value:"MAR",label:"MARTES"},{value:"MIE",label:"MIÉRCOLES"},{value:"JUE",label:"JUEVES"},{value:"VIE",label:"VIERNES"},{value:"SAB",label:"SÁBADO"},{value:"DOM",label:"DOMINGO"}],ge=()=>({id:null,name:null,courseId:null,teacherId:null,laboratoryId:null,schedule:{days:[],startHour:null,endHour:null},maxStudents:0,minStudents:0,modality:null,status:"ABIERTO"}),St=[{label:"PRESENCIAL",value:"PRESENCIAL"},{label:"VIRTUAL",value:"VIRTUAL"}],Vt={class:"border border-dashed border-gray-400 p-4 rounded relative hover:bg-gray-50"},wt={class:"absolute top-0 right-0"},kt=F({__name:"GroupForm",props:{modelValue:{type:Boolean},item:{},periodId:{}},emits:["update:modelValue","success"],setup(e,{emit:a}){const s=lt(),o=a,u=e,{screenSize:i}=Ae(),f=O({get:()=>u.modelValue,set:p=>o("update:modelValue",p)}),I=w(!1),x=w(!1),d=w([]),b=()=>Object.assign({},{...ge(),name:u.item.code+(d.value.length+1)}),y=p=>{d.value.splice(p,1)},P=async()=>{console.log("Enviando formulario"),console.log(d.value),console.log(u.item),x.value=!0,(await ze(d.value,u.periodId,u.item.id)).status&&(o("success"),f.value=!1),x.value=!1},R=async()=>{if(console.log("Inicializando formulario"),u.item){const p=await Te({id:u.item.id,periodId:u.periodId});p?d.value=p:d.value=[{...ge(),name:u.item.code}]}};return re(f,async p=>{p&&(I.value=!0,await R(),I.value=!1)}),(p,c)=>{const U=Ve,$=H,S=we,k=X,g=se,V=tt,E=Y,A=T,z=_t,l=Qe,m=$e,v=ie,h=xe;return N(),J(h,{show:f.value,"onUpdate:show":c[3]||(c[3]=_=>f.value=_)},{default:r(()=>[t(v,{style:{width:"1200px"},title:"Registro de grupos",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:r(()=>[t(m,{justify:"end"},{default:r(()=>[t(A,{onClick:c[2]||(c[2]=()=>f.value=!1)},{default:r(()=>c[8]||(c[8]=[D("Cancelar")])),_:1}),t(A,{type:"primary",onClick:P},{default:r(()=>c[9]||(c[9]=[D("Guardar")])),_:1})]),_:1})]),default:r(()=>[t(U,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:r(()=>[t(Ce,{iconName:"information"})]),default:r(()=>[c[4]||(c[4]=D(" Antes de crear un grupo, asegúrese de que el curso tenga los precios asignados para la modalidad y tipo de estudiante correspondientes. "))]),_:1}),t(l,{show:I.value,description:"Cargando formulario"},{default:r(()=>[t(z,{value:d.value,"onUpdate:value":c[0]||(c[0]=_=>d.value=_),"on-create":b,class:"mb-4"},{"create-button-default":r(()=>c[5]||(c[5]=[D(" Nuevo grupo ")])),default:r(({value:_,index:G})=>[j("div",Vt,[t(E,{gutter:"16"},{default:r(()=>[t(k,{span:C(i)==="lg"?3:C(i)==="md"?4:12},{default:r(()=>[t(S,{label:"Grupo",path:"name","default-value":"Grupo"},{default:r(()=>[t($,{value:_.name,"onUpdate:value":B=>_.name=B},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(k,{span:C(i)=="lg"||C(i)==="md"?4:12},{default:r(()=>[t(S,{label:"Modalidad",path:"modality"},{default:r(()=>[t(g,{value:_.modality,"onUpdate:value":B=>_.modality=B,options:C(St),filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),t(k,{span:C(i)==="lg"?3:C(i)==="md"?4:12},{default:r(()=>[t(S,{label:"Cupos máx.",path:"maxStudents"},{default:r(()=>[t(V,{value:_.maxStudents,"onUpdate:value":B=>_.maxStudents=B,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(k,{span:C(i)==="lg"?3:C(i)==="md"?4:12},{default:r(()=>[t(S,{label:"Cupos mín.",path:"minStudents"},{default:r(()=>[t(V,{value:_.minStudents,"onUpdate:value":B=>_.minStudents=B,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(k,{span:C(i)==="lg"?11:C(i)==="md"?8:24},{default:r(()=>[t(S,{label:"Horario - Días",path:"schedule.days"},{default:r(()=>[t(g,{value:_.schedule.days,"onUpdate:value":B=>_.schedule.days=B,multiple:"","fallback-option":!1,options:C(Pt)},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),t(k,{span:C(i)==="lg"||C(i)==="md"?4:12},{default:r(()=>[t(S,{label:"Hora de inicio"},{default:r(()=>[t($,{clearable:"",type:"time",value:_.schedule.startHour,"onUpdate:value":B=>_.schedule.startHour=B,placeholder:"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(k,{span:C(i)==="lg"||C(i)==="md"?4:12},{default:r(()=>[t(S,{label:"Hora de fin"},{default:r(()=>[t($,{clearable:"",type:"time",value:_.schedule.endHour,"onUpdate:value":B=>_.schedule.endHour=B,placeholder:"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"])]),_:2},1024),j("div",wt,[t(A,{secondary:"",type:"error","render-icon":C(he)("trash"),onClick:()=>{C(s).warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:_.id?"Eliminar":"Quitar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:async()=>{_.id?await C(Ue)(_)&&y(G):y(G)}})}},null,8,["render-icon","onClick"])])])]),action:r(({})=>c[6]||(c[6]=[j("div",null,null,-1)])),_:1},8,["value"]),d.value.length>0?(N(),J(A,{key:0,block:"",secondary:"",type:"primary",class:"mt-4",onClick:c[1]||(c[1]=()=>d.value.push(b()))},{default:r(()=>c[7]||(c[7]=[D(" Agregar grupo ")])),_:1})):Ie("",!0)]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}}),Rt=F({__name:"GroupCloneForm",props:{modelValue:{type:Boolean},curriculumId:{},periodId:{}},emits:["update:modelValue","success","cancel"],setup(e,{emit:a}){const s=a,o=e,u={periodReferenceId:{trigger:["change","blur"],type:"number",required:!0,message:"Este campo es requerido"}},i=w(!1),f=w([]),I=async p=>{i.value=!0,f.value=await ve(p),i.value=!1},x=ne(p=>{I(p)},400),d=O({get:()=>o.modelValue,set:p=>s("update:modelValue",p)}),b=w(null),P=w(Object.assign({},{periodId:null,periodReferenceId:null,curriculumId:null})),R=async()=>{b.value&&await b.value.validate()&&(P.value.curriculumId=o.curriculumId,P.value.periodId=o.periodId,console.log("form",P.value),await De(P.value)&&(s("success"),d.value=!1))};return re(()=>o.modelValue,async p=>{p&&await I("")}),(p,c)=>{const U=qe("LnxIcon"),$=Ve,S=se,k=we,g=X,V=Y,E=rt,A=T,z=it,l=ie,m=xe;return N(),J(m,{show:d.value,"onUpdate:show":c[2]||(c[2]=v=>d.value=v)},{default:r(()=>[t(l,{style:{width:"500px"},title:"Clonar Grupos de un Periodo a Otro",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:r(()=>[t(z,{justify:"end"},{default:r(()=>[t(A,{onClick:c[1]||(c[1]=v=>d.value=!1)},{default:r(()=>c[4]||(c[4]=[D("Cancelar")])),_:1}),t(A,{type:"primary",onClick:R},{default:r(()=>c[5]||(c[5]=[D(" Aceptar ")])),_:1})]),_:1})]),default:r(()=>[t($,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:r(()=>[t(U,{iconName:"information"})]),default:r(()=>[c[3]||(c[3]=D(" Para evitar problemas, la clonación solo está disponible si no hay matrículas en este periodo académico. Antes de continuar, verifica esta condición. "))]),_:1}),t(E,{ref_key:"formRef",ref:b,model:P.value,rules:u},{default:r(()=>[t(V,{gutter:16},{default:r(()=>[t(g,{span:24},{default:r(()=>[t(k,{label:"Periodo Académico de referencia",path:"periodReferenceId"},{default:r(()=>[t(S,{value:P.value.periodReferenceId,"onUpdate:value":c[0]||(c[0]=v=>P.value.periodReferenceId=v),placeholder:"Seleccionar Periodo Académico",filterable:"",options:f.value,loading:i.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:C(x)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),Bt=e=>[{title:"Grupos",key:"ops",width:"80px",fixed:"left",render(a){const s=a;return n(T,{type:"tertiary",onClick:()=>e(s)},{default:()=>`${s.countGroups} Grupo(s) `})}},{title:"Modulo",key:"module-group",minWidth:"200px",children:[{title:"Nombre",key:"module",minWidth:"180px"},{title:"Precios",key:"modulePrice",minWidth:"100px",render:a=>n(oe,{trigger:"click"},{trigger:()=>n(T,null,{default:()=>`Ver precios (${Array.isArray(a.modulePrice)?a.modulePrice.length:0})`}),header:()=>n(ae,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var s;return n("ul",{},Array.isArray(a.modulePrice)?(s=a.modulePrice)==null?void 0:s.map(o=>n("li",{},`S/. ${o}`)):n("li",{},"No hay precios definidos"))}})}]},{title:"Curso",key:"course-group",children:[{title:"Codigo",key:"code",minWidth:"80px"},{title:"Nombre",key:"course",minWidth:"180px"},{title:"Precios Virtual",key:"virtualPrice",minWidth:"100px",render:a=>n(oe,{trigger:"click"},{trigger:()=>n(T,null,{default:()=>`Ver precios (${Array.isArray(a.virtualPrice)?a.virtualPrice.length:0})`}),header:()=>n(ae,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var s;return n("ul",{},Array.isArray(a.virtualPrice)?(s=a.virtualPrice)==null?void 0:s.map(o=>n("li",{},`S/. ${o}`)):n("li",{},"No hay precios definidos"))}})},{title:"Precios Presencial",key:"presentialPrice",minWidth:"100px",render:a=>n(oe,{trigger:"click"},{trigger:()=>n(T,null,{default:()=>`Ver precios (${Array.isArray(a.presentialPrice)?a.presentialPrice.length:0})`}),header:()=>n(ae,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var s;return n("ul",{},Array.isArray(a.presentialPrice)?(s=a.presentialPrice)==null?void 0:s.map(o=>n("li",{},`S/. ${o}`)):n("li",{},"No hay precios definidos"))}})},{title:"Estado",key:"isEnabled",width:"150px",render:a=>n(ut,{type:a.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>a.isEnabled?"	Habilitado":"Deshabilitado"})}]}],At=(e=ke())=>({page:e.page,total:e.total,pageSize:e.pageSize,pageCount:e.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${e.total} registros`}}),Ut={style:{"border-bottom":"1px solid #e9e9e9"}},$t=F({__name:"DataTable",props:{periodId:{},curriculumId:{}},setup(e){const a=e,s=O(()=>({periodId:a.periodId,curriculumId:a.curriculumId})),o=w(!1),u=w([]),i=w(!1),f=w(!1),I=w(null),x=Ke({...ke()}),d=w({search:null,page:x.page,pageSize:x.pageSize,filters:{...s.value}}),b=w({}),y=w([]),R=Bt(g=>{I.value=g,i.value=!0}),p=async()=>{d.value.page=1,await c()},c=async()=>{o.value=!0,b.value=await Oe(d.value),u.value=b.value.data,x.total=b.value.total,x.pageSize=b.value.per_page,x.page=b.value.current_page,x.pageCount=b.value.last_page,o.value=!1},U=ne(()=>{p()},400),$=async g=>{d.value.page=g,await c()},S=async g=>{d.value.page=1,d.value.pageSize=g,await c()},k=async()=>{y.value=await Re(""),await c()};return re(s,async(g,V)=>{d.value.filters=g,await p()},{deep:!0}),k(),(g,V)=>{const E=T,A=X,z=H,l=Y,m=nt;return N(),Pe(Se,null,[j("div",Ut,[t(l,{gutter:12,style:{padding:"12px 16px"}},{default:r(()=>[t(A,{span:12,class:"self-center"},{default:r(()=>[t(E,{"render-icon":C(he)("convertshape"),onClick:V[0]||(V[0]=v=>f.value=!0)},{default:r(()=>V[4]||(V[4]=[D(" Clonar grupos ")])),_:1},8,["render-icon"])]),_:1}),t(A,{span:12},{default:r(()=>[t(z,{size:"large",placeholder:"Buscar",value:d.value.search,"onUpdate:value":V[1]||(V[1]=v=>d.value.search=v),onInput:C(U),clearable:""},{suffix:r(()=>[t(Ce,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),t(l,null,{default:r(()=>[t(A,{span:24},{default:r(()=>[t(m,{key:"id",remote:"","single-line":!1,columns:C(R),data:u.value,pagination:C(At)(x),"pagination-show-size-picker":!0,loading:o.value,"onUpdate:page":$,"onUpdate:pageSize":S},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),Je(g.$slots,"extra",{reLoadDataTable:p})]),t(kt,{modelValue:i.value,"onUpdate:modelValue":V[2]||(V[2]=v=>i.value=v),item:I.value,periodId:g.periodId,laboratoryOptions:y.value,onSuccess:p},null,8,["modelValue","item","periodId","laboratoryOptions"]),t(Rt,{modelValue:f.value,"onUpdate:modelValue":V[3]||(V[3]=v=>f.value=v),periodId:g.periodId,curriculumId:g.curriculumId,onSuccess:p},null,8,["modelValue","periodId","curriculumId"])],64)}}}),lo=F({__name:"index",setup(e){const a=w(!1),s=w([]),o=async x=>{a.value=!0,s.value=await ve(x),a.value=!1},u=ne(x=>{o(x)},400),i=w([]),f=w({period:null,curriculumId:null});return(async()=>{await o(""),i.value=await Be()})(),(x,d)=>{const b=se,y=X,P=Y,R=ie;return N(),Pe(Se,null,[t(R,{segmented:{header:!0,content:!0}},{header:r(()=>d[2]||(d[2]=[j("h6",{class:"text-sm text-gray-400"},"Carga Académica",-1),D(" Apertura de grupos ")])),action:r(()=>[t(P,{gutter:"16",style:{display:"flex","justify-content":"center"}},{default:r(()=>[t(y,{span:"10"},{default:r(()=>[t(b,{value:f.value.curriculumId,"onUpdate:value":d[0]||(d[0]=p=>f.value.curriculumId=p),placeholder:"Seleccionar Plan de estudio",filterable:"",options:i.value,clearable:"","virtual-scroll":!1},null,8,["value","options"])]),_:1}),t(y,{span:"10"},{default:r(()=>[t(b,{value:f.value.period,"onUpdate:value":d[1]||(d[1]=p=>f.value.period=p),placeholder:"Seleccionar Periodo Académico",filterable:"",options:s.value,loading:a.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:C(u)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1}),f.value.period&&f.value.curriculumId?(N(),J($t,{key:0,periodId:f.value.period,curriculumId:f.value.curriculumId},null,8,["periodId","curriculumId"])):Ie("",!0)],64)}}});export{lo as default};
