import{r as x}from"./icon.utils-CvbdSYhW.js";import{_ as C}from"./StudentForm.vue_vue_type_script_setup_true_lang-y2HRrgu4.js";import{d as O}from"./debounce.utils-DqPPCsFD.js";import{d as h,aa as k,a5 as U,a8 as l,ab as t,ag as E,af as z,h as b,r as d,ak as A,al as I,ad as N,ac as f,am as q,_ as D,ah as S,ai as G}from"./index-B1moMmGf.js";import{i as P}from"./DataTable.types-BIkVFYV7.js";import{u as H}from"./composables-Dzo7p1MU.js";import{_ as L}from"./Dropdown-56SzW5B2.js";import{N as T}from"./Select-CFNlPL_t.js";import{_ as R,a as j}from"./student.services-DO6Mfu2X.js";import{c as J}from"./studentType.services-CR2hGnl7.js";import{c as K}from"./documentType.services-DC9Pg81f.js";import{_ as Q,a as X}from"./Col-Jp9hAiy_.js";import{_ as Y}from"./Input-CnTYTM92.js";import{_ as Z}from"./DataTable-CmGk2gV6.js";import"./genders.constans-ZqlXwVVz.js";import"./useBreakpoints-CTSinSsP.js";import"./FormItem-Dinphbxr.js";import"./get-DK0dPHvI.js";import"./Switch-BmkbJoFt.js";import"./Space-DLhth_1u.js";import"./index-Z2j9nM23.js";import"./Tooltip-BxjKzuTH.js";const ee=h({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(s,{emit:n}){const a=n,e=H(),m=[{label:"Editar",key:"edit",icon:x("edit-2"),props:{onClick:()=>a("edit")}},{label:"Eliminar",key:"delete",icon:x("trash","red"),props:{style:{color:"red"},onClick:()=>{e.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{a("delete")}})}}}];return(i,o)=>{const r=z,u=L;return k(),U(u,{options:m,placement:"bottom-start"},{default:l(()=>[t(r,null,{default:l(()=>[t(E,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),te=(s,n)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(a){const e=a;return b(ee,{onEdit:()=>{s(e)},onDelete:()=>{n(e)},item:e},{default:()=>"Editar"})}},{title:"Codigo",key:"code",minWidth:"120px"},{title:"Número de documento",key:"documentNumber",minWidth:"120px"},{title:"Nombre",key:"name",minWidth:"120px"},{title:"Apellido Paterno",key:"lastNameFather",minWidth:"120px"},{title:"Apellido Materno",key:"lastNameMother",minWidth:"120px"},{title:"Género",key:"gender",minWidth:"150px",render:a=>b(T,{tertiary:!0,bordered:!1,strong:!0},{default:()=>a.gender===1?"MASCULINO":a.gender===2?"FEMENINO":"NO ESPECIFICADO"})},{title:"Email",key:"email",minWidth:"80px"},{title:"Teléfono",key:"phone",minWidth:"100px"},{title:"Tipo de estudiante",key:"studentType",minWidth:"150px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:a=>b(T,{type:a.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>a.isEnabled?"	Habilitado":"Deshabilitado"})}],ae=(s=P())=>({page:s.page,total:s.total,pageSize:s.pageSize,pageCount:s.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${s.total} registros`}}),ne={style:{"border-bottom":"1px solid #e9e9e9"}},oe=h({__name:"DataTable",setup(s){const n=d(!1),a=d([]),e=d(!1),m=d(null),i=A({...P()}),o=d({search:null,page:i.page,pageSize:i.pageSize}),r=d({}),u=d({}),V=te(p=>{m.value=p,e.value=!0},async p=>{await j(p),await c()}),c=async()=>{o.value.page=1,await _()},_=async()=>{n.value=!0,r.value=await R(o.value),a.value=r.value.data,i.total=r.value.total,i.pageSize=r.value.per_page,i.page=r.value.current_page,i.pageCount=r.value.last_page,n.value=!1},B=O(()=>{c()},400),W=async p=>{o.value.page=p,await _()},$=async p=>{o.value.page=1,o.value.pageSize=p,await _()};return(async()=>{await _(),u.value.studentTypesItems=await J(),u.value.documentTypesItems=await K()})(),(p,g)=>{const v=Q,F=Y,w=X,M=Z;return k(),I(D,null,[N("div",ne,[t(w,{gutter:12,style:{padding:"12px 16px"}},{default:l(()=>[t(v,{span:12}),t(v,{span:12},{default:l(()=>[t(F,{size:"large",placeholder:"Buscar",value:o.value.search,"onUpdate:value":g[0]||(g[0]=y=>o.value.search=y),onInput:f(B),clearable:""},{suffix:l(()=>[t(E,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),t(w,null,{default:l(()=>[t(v,{span:24},{default:l(()=>[t(M,{key:"id",remote:"","single-line":!1,columns:f(V),data:a.value,pagination:f(ae)(i),"pagination-show-size-picker":!0,loading:n.value,"onUpdate:page":W,"onUpdate:pageSize":$},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),q(p.$slots,"extra",{reLoadDataTable:c,selectables:u.value})]),t(C,{modelValue:e.value,"onUpdate:modelValue":g[1]||(g[1]=y=>e.value=y),item:m.value,onSuccess:c,selectables:u.value},null,8,["modelValue","item","selectables"])],64)}}}),Ne=h({__name:"index",setup(s){const n=d(!1);return(a,e)=>{const m=z,i=G;return k(),I(D,null,[t(i,{segmented:{header:!0,content:!0}},{header:l(()=>e[2]||(e[2]=[N("h6",{style:{color:"#999",margin:"0"}},"Gestión de Estudiantes",-1),S(" Estudiantes ")])),"header-extra":l(()=>[t(m,{"render-icon":f(x)("additem"),onClick:e[0]||(e[0]=o=>n.value=!0)},{default:l(()=>e[3]||(e[3]=[S(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),t(oe,null,{extra:l(({reLoadDataTable:o,selectables:r})=>[t(C,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=u=>n.value=u),item:null,onSuccess:o,selectables:r},null,8,["modelValue","onSuccess","selectables"])]),_:1})],64)}}});export{Ne as default};
