import{G as D}from"./genders.constans-ZqlXwVVz.js";import{u as z}from"./useBreakpoints-DHc7VBYg.js";import{an as _,d as G,e as q,r as g,g as j,a9 as A,a4 as x,a6 as t,aa as a,ae as U,ab as v,ag as H,ai as L,aj as P}from"./index-DvYzMf2M.js";import{a as J}from"./DataTable.types-BjrSoKaL.js";import{c as K,_ as Q,a as W,b as X}from"./Col-CIH6lTu0.js";import{_ as Y,a as Z}from"./FormItem-YPSbYUsQ.js";import{_ as ee}from"./Input-BCz2VVQV.js";import{_ as ae}from"./Switch-BXlFdt54.js";const w=()=>({id:null,personId:null,code:null,documentTypeId:1,documentNumber:null,name:null,lastNameFather:null,lastNameMother:null,gender:null,email:null,phone:null,address:null,studentTypeId:null,isEnabled:!0}),te=()=>({code:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}],documentTypeId:[{type:"number",required:!0,trigger:["blur"],message:"Obligatorio"}],documentNumber:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}],name:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}],lastNameFather:[],lastNameMother:[],gender:[],email:[],phone:[],address:[],studentTypeId:[{type:"number",required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),fe=async d=>{try{return(await _().post("/student/load-data-table",d)).data.data}catch{return J()}},le=async d=>{try{return(await _().get(`/student/item/by-id/${d}`)).data.data}catch{return w()}},ne=async d=>{try{return{status:!0,data:(await _().post("/student",d)).data.data}}catch(s){return s.response.status===422?{status:!1,data:s.response.data.errors}:{status:!1,data:null}}},ue=async d=>{try{return{status:!0,data:(await _().put("/student",d)).data.data}}catch(s){return s.response.status===422?{status:!1,data:s.response.data.errors}:{status:!1,data:null}}},ce=async d=>{try{return await _().delete("/student",{data:{id:d.id}}),!0}catch{return!1}},_e=async d=>{try{return(await _().post("/student/search/list",d)).data.data}catch{return[]}},be=G({__name:"StudentForm",props:{item:{},modelValue:{type:Boolean},selectables:{}},emits:["update:modelValue","success"],setup(d,{emit:s}){const h=s,N=d,{screenSize:f}=z(),b=q({get:()=>N.modelValue,set:p=>h("update:modelValue",p)}),y=g(!1),I=g(null),l=g(w()),u=g(null),E=g({...te()}),k=async()=>{if(I.value){const p=await I.value.validate();let e=null;p?(y.value=!0,l.value.id?e=await ue(l.value):e=await ne(l.value),e.status?(h("success",l.value),b.value=!1):u.value=e.data):console.log("Formulario inválido")}y.value=!1},O=async()=>{var p;return(p=N.item)!=null&&p.id?l.value=await le(N.item.id):l.value=w(),l.value},R=async()=>{console.log("Inicializando formulario"),await O()};return j(b,p=>{p&&R()}),(p,e)=>{const T=K,i=Y,m=Q,c=ee,M=ae,F=W,$=X,V=Z,S=H,B=L,C=P;return A(),x(C,{show:b.value,"onUpdate:show":e[18]||(e[18]=n=>b.value=n)},{default:t(()=>[a(B,{style:{width:"1024px"},title:p.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:t(()=>[a(F,{justify:"end"},{default:t(()=>[a(S,{tertiary:"",size:"large",onClick:e[17]||(e[17]=n=>b.value=!1),disabled:y.value},{default:t(()=>e[19]||(e[19]=[U(" Cancelar ")])),_:1},8,["disabled"]),a(S,{size:"large",type:"primary",onClick:k,loading:y.value},{default:t(()=>e[20]||(e[20]=[U("Guardar")])),_:1},8,["loading"])]),_:1})]),default:t(()=>[a(V,{ref_key:"formRef",ref:I,model:l.value,rules:E.value,size:"large",onSubmit:k},{default:t(()=>[a($,{gutter:16},{default:t(()=>[a(m,{span:v(f)==="sm"?12:6},{default:t(()=>[a(i,{path:"studentTypeId",label:"Tipo de Estudiante"},{default:t(()=>[a(T,{value:l.value.studentTypeId,"onUpdate:value":e[0]||(e[0]=n=>l.value.studentTypeId=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:p.selectables.studentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:6},{default:t(()=>{var n;return[a(i,{path:"code",label:"Código",feedback:(n=u.value)==null?void 0:n.code},{default:t(()=>{var o;return[a(c,{value:l.value.code,"onUpdate:value":e[1]||(e[1]=r=>l.value.code=r),status:((o=u.value)==null?void 0:o.code)!=null?"error":"",onInput:e[2]||(e[2]=r=>u.value!=null?u.value.code=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:6},{default:t(()=>[a(i,{path:"documentTypeId",label:"Tipo de Documento"},{default:t(()=>[a(T,{value:l.value.documentTypeId,"onUpdate:value":e[3]||(e[3]=n=>l.value.documentTypeId=n),clearable:"","virtual-scroll":!1,placeholder:"Seleccione",options:p.selectables.documentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:6},{default:t(()=>{var n;return[a(i,{path:"documentNumber",label:"Número de Documento",feedback:(n=u.value)==null?void 0:n.documentNumber},{default:t(()=>{var o;return[a(c,{value:l.value.documentNumber,"onUpdate:value":e[4]||(e[4]=r=>l.value.documentNumber=r),status:((o=u.value)==null?void 0:o.documentNumber)!=null?"error":"",onInput:e[5]||(e[5]=r=>u.value!=null?u.value.documentNumber=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:v(f)==="sm"?24:8},{default:t(()=>{var n;return[a(i,{path:"name",label:"Nombre",feedback:(n=u.value)==null?void 0:n.name},{default:t(()=>{var o;return[a(c,{status:((o=u.value)==null?void 0:o.name)!=null?"error":"",value:l.value.name,"onUpdate:value":e[6]||(e[6]=r=>l.value.name=r),onInput:e[7]||(e[7]=r=>u.value!=null?u.value.name=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:8},{default:t(()=>{var n;return[a(i,{path:"lastNameFather",label:"Apellido Paterno",feedback:(n=u.value)==null?void 0:n.lastNameFather},{default:t(()=>{var o;return[a(c,{status:((o=u.value)==null?void 0:o.lastNameFather)!=null?"error":"",value:l.value.lastNameFather,"onUpdate:value":e[8]||(e[8]=r=>l.value.lastNameFather=r),onInput:e[9]||(e[9]=r=>u.value!=null?u.value.lastNameFather=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:8},{default:t(()=>{var n;return[a(i,{path:"lastNameMother",label:"Apellido Materno",feedback:(n=u.value)==null?void 0:n.lastNameMother},{default:t(()=>{var o;return[a(c,{status:((o=u.value)==null?void 0:o.lastNameMother)!=null?"error":"",value:l.value.lastNameMother,"onUpdate:value":e[10]||(e[10]=r=>l.value.lastNameMother=r),onInput:e[11]||(e[11]=r=>u.value!=null?u.value.lastNameMother=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:6},{default:t(()=>[a(i,{path:"gender",label:"Genero"},{default:t(()=>[a(T,{value:l.value.gender,"onUpdate:value":e[12]||(e[12]=n=>l.value.gender=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:v(D)},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:6},{default:t(()=>[a(i,{path:"birthDate",label:"Fecha de Nacimiento"},{default:t(()=>[a(c,{value:l.value.dateOfBirth,"onUpdate:value":e[13]||(e[13]=n=>l.value.dateOfBirth=n),type:"date",clearable:"",placeholder:""},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:6},{default:t(()=>[a(i,{path:"email",label:"Correo Electrónico"},{default:t(()=>[a(c,{value:l.value.email,"onUpdate:value":e[14]||(e[14]=n=>l.value.email=n)},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(m,{span:v(f)==="sm"?12:6},{default:t(()=>[a(i,{path:"phone",label:"Teléfono"},{default:t(()=>[a(c,{value:l.value.phone,"onUpdate:value":e[15]||(e[15]=n=>l.value.phone=n)},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(m,{span:"24"},{default:t(()=>[a(F,{justify:"end"},{default:t(()=>[a(i,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:t(()=>[a(M,{value:l.value.isEnabled,"onUpdate:value":e[16]||(e[16]=n=>l.value.isEnabled=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}});export{be as _,fe as a,ce as b,_e as c};
