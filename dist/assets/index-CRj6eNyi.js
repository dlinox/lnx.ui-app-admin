import{r as N}from"./icon.utils-CmxuJXeQ.js";import{d as C,a3 as R,a9 as T,ad as F,ae as v,aa as w,ab as t,ac as e,ag as B,aH as H,h as A,e as X,r as m,j as Y,aB as j,aA as P,aI as Z,aJ as ee,aG as q,_ as G,af as $,aK as te,a8 as ae}from"./index-CHKdQ-q5.js";import{_ as ne,a as oe,b as le}from"./studentType.services-2cHVVDyk.js";import{_ as se,a as ie}from"./FormItem-BobmnhmY.js";import{_ as J,a as K}from"./Col-G0czzw1d.js";import{_ as L}from"./Input-C-7cIp0X.js";import{_ as re}from"./Space-WaWU-eRg.js";import{_ as ue}from"./Switch-Cam2dNBn.js";import{d as pe}from"./debounce.utils-DqPPCsFD.js";import{i as W}from"./DataTable.types-BEg5m_To.js";import{u as de}from"./composables-CsGV-aUD.js";import{_ as me}from"./Dropdown-CRs7219k.js";import{N as _e}from"./Tag-Cy27tpc_.js";import{_ as ce}from"./DataTable-COM0A82O.js";import"./get-_S_LWlCl.js";import"./Suffix-C8CazGck.js";import"./use-merged-state-CFtIg60l.js";import"./Popover-CP6C22MG.js";import"./Tooltip-BVDsciO5.js";import"./Select-CjOGNBL7.js";const ge=C({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(u,{emit:p}){const{hasPermission:o}=R(),i=p,n=de(),s=[{label:"Editar",key:"edit",icon:N("edit-2"),props:{onClick:()=>i("edit")},show:o(["student-type.edit"])},{label:"Eliminar",key:"delete",icon:N("trash","red"),show:o(["student-type.delete"]),props:{style:{color:"red"},onClick:()=>{n.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{i("delete")}})}}}];return(r,l)=>{const _=B,b=me;return v(o)(["student-type.edit","student-type.delete"])?(w(),T(b,{key:0,options:s,placement:"bottom-start"},{default:t(()=>[e(_,null,{default:t(()=>[e(H,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})):F("",!0)}}}),fe=(u,p)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(o){const i=o;return A(ge,{onEdit:()=>{u(i)},onDelete:()=>{p(i)},item:i},{default:()=>"Editar"})}},{title:"Nombre",key:"name",minWidth:"300px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:o=>A(_e,{type:o.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>o.isEnabled?"	Habilitado":"Deshabilitado"})}],ve=(u=W())=>({page:u.page,total:u.total,pageSize:u.pageSize,pageCount:u.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${u.total} registros`}}),M=()=>({id:null,name:null,isEnabled:!0}),be=()=>({name:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),Q=C({__name:"StudentTypeForm",props:{item:{},modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(u,{emit:p}){const o=p,i=u,n=X({get:()=>i.modelValue,set:d=>o("update:modelValue",d)}),s=m(!1),r=m(null),l=m(M()),_=m(null),b=m({...be()}),h=async()=>{if(r.value){const d=await r.value.validate();let a=null;d?(s.value=!0,a=await ne(l.value),a.status?(o("success"),n.value=!1):_.value=a.data):console.log("Formulario inválido")}s.value=!1},y=()=>{console.log("Inicializando formulario"),l.value=i.item?{...i.item}:M()};return Y(n,d=>{d&&y()}),(d,a)=>{const S=L,E=ie,I=K,c=ue,g=re,x=J,V=se,k=B,D=j,z=Z;return w(),T(z,{show:n.value,"onUpdate:show":a[4]||(a[4]=f=>n.value=f)},{default:t(()=>[e(D,{style:{width:"500px"},title:d.item?"EDITAR TIPO DE DOCUMENTO":"NUEVO TIPO DE DOCUMENTO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:t(()=>[e(g,{justify:"end"},{default:t(()=>[e(k,{tertiary:"",size:"large",onClick:a[3]||(a[3]=f=>n.value=!1),disabled:s.value},{default:t(()=>a[5]||(a[5]=[P(" Cancelar ")])),_:1},8,["disabled"]),e(k,{size:"large",type:"primary",onClick:h,loading:s.value},{default:t(()=>a[6]||(a[6]=[P("Guardar")])),_:1},8,["loading"])]),_:1})]),default:t(()=>[e(V,{ref_key:"formRef",ref:r,model:l.value,rules:b.value,size:"large"},{default:t(()=>[e(x,null,{default:t(()=>[e(I,{span:"24"},{default:t(()=>{var f;return[e(E,{path:"name",label:"Nombre",feedback:(f=_.value)==null?void 0:f.name},{default:t(()=>{var U;return[e(S,{status:((U=_.value)==null?void 0:U.name)!=null?"error":"",value:l.value.name,"onUpdate:value":a[0]||(a[0]=O=>l.value.name=O),onInput:a[1]||(a[1]=O=>_.value!=null?_.value.name=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1}),e(I,{span:"24"},{default:t(()=>[e(g,{justify:"end"},{default:t(()=>[e(E,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:t(()=>[e(c,{value:l.value.isEnabled,"onUpdate:value":a[2]||(a[2]=f=>l.value.isEnabled=f)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),ye={style:{"border-bottom":"1px solid #e9e9e9"}},we=C({__name:"DataTable",setup(u){const p=m(!1),o=m([]),i=m(!1),n=m(null),s=ee({...W()}),r=m({search:null,page:s.page,pageSize:s.pageSize}),l=m({}),h=fe(c=>{n.value=c,i.value=!0},async c=>{await le(c),await y()}),y=async()=>{r.value.page=1,await d()},d=async()=>{p.value=!0,l.value=await oe(r.value),o.value=l.value.data,s.total=l.value.total,s.pageSize=l.value.per_page,s.page=l.value.current_page,s.pageCount=l.value.last_page,p.value=!1},a=pe(()=>{y()},400),S=async c=>{r.value.page=c,await d()},E=async c=>{r.value.page=1,r.value.pageSize=c,await d()};return(async()=>{await d()})(),(c,g)=>{const x=K,V=L,k=J,D=ce;return w(),q(G,null,[$("div",ye,[e(k,{gutter:12,style:{padding:"12px 16px"}},{default:t(()=>[e(x,{span:12}),e(x,{span:12},{default:t(()=>[e(V,{size:"large",placeholder:"Buscar",value:r.value.search,"onUpdate:value":g[0]||(g[0]=z=>r.value.search=z),onInput:v(a),clearable:""},{suffix:t(()=>[e(H,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(x,{span:24},{default:t(()=>[e(D,{key:"id",remote:"",size:"small","single-line":!1,columns:v(h),data:o.value,pagination:v(ve)(s),"pagination-show-size-picker":!0,loading:p.value,"onUpdate:page":S,"onUpdate:pageSize":E},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),te(c.$slots,"extra",{reLoadDataTable:y})]),e(Q,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=z=>i.value=z),item:n.value,onSuccess:y},null,8,["modelValue","item"])],64)}}}),Fe=C({__name:"index",setup(u){const{hasPermission:p}=R(),o=m(!1);return(i,n)=>{const s=B,r=j,l=ae("AppNotAuthorization");return v(p)(["student-type.create","student-type.update","student-type.delete"])?(w(),q(G,{key:0},[e(r,{segmented:{header:!0,content:!0}},{header:t(()=>n[2]||(n[2]=[$("span",{class:"text-sm text-slate-500"}," Gestión de Tipos de Estudiante",-1),$("h5",{class:"text-lg font-bold text-slate-800"},"Tipos de Estudiante",-1)])),"header-extra":t(()=>[v(p)(["student-type.create"])?(w(),T(s,{key:0,type:"primary",size:"large","render-icon":v(N)("additem"),onClick:n[0]||(n[0]=_=>o.value=!0)},{default:t(()=>n[3]||(n[3]=[P(" Agregar ")])),_:1},8,["render-icon"])):F("",!0)]),_:1}),e(we,null,{extra:t(({reLoadDataTable:_})=>[e(Q,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=b=>o.value=b),item:null,onSuccess:_},null,8,["modelValue","onSuccess"])]),_:1})],64)):(w(),T(l,{key:1}))}}});export{Fe as default};
