import{d as D,e as J,f as T,g as K,b as L,h as Q}from"./course.services-C1OszyCe.js";import{u as W}from"./useBreakpoints-CvjILNu3.js";import{d as X}from"./area.services-DeZjfa49.js";import{e as Y}from"./module.services-CAB80d2S.js";import{_ as Z}from"./InputNumber-DFy8f9y6.js";import{d as h,e as ee,r as m,g as le,a9 as ae,a4 as ue,a6 as n,aa as a,ae as P,ab as p,ag as te,ai as ne,aj as se}from"./index-CuctqQ8B.js";import{_ as oe,a as re,b as de}from"./FormItem-B4x8FwVv.js";import{_ as ie,c as ve,a as pe,b as me}from"./Col-HCWaYKjr.js";import{_ as fe}from"./Switch-GUvqzs87.js";const Ce=h({__name:"CourseForm",props:{item:{},modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(q,{emit:E}){const{screenSize:v}=W(),k=E,I=q,f=ee({get:()=>I.modelValue,set:r=>k("update:modelValue",r)}),_=m(!1),g=m(null),u=m(T()),l=m(null),S=m({...K()}),w=m([]),y=m([]),R=m([]),V=async()=>{R.value=await L({curriculumId:u.value.curriculumId})},B=async()=>{w.value=await X({curriculumId:u.value.curriculumId})},F=async()=>{y.value=await Y({curriculumId:u.value.curriculumId})},C=async(r=!1)=>{console.log("onChangeCurriculum",r),l.value&&(l.value.curriculumId=null),r||(u.value.areaId=null,u.value.moduleId=null,u.value.preRequisiteId=null),await B(),await F(),await V()},z=async()=>{if(g.value){const r=await g.value.validate();let e=null;r?(_.value=!0,u.value.id?e=await D(u.value):e=await J(u.value),e.status?(k("success"),f.value=!1):l.value=e.data):console.log("Formulario inválido")}_.value=!1},M=async()=>{var r;(r=I.item)!=null&&r.id?(u.value=await Q(I.item.id),await C(!0)):u.value=T()},N=async()=>{await M()};return le(f,r=>{r&&N()}),(r,e)=>{const U=oe,d=re,i=ie,b=ve,c=Z,j=fe,$=pe,x=me,A=de,O=te,G=ne,H=se;return ae(),ue(H,{show:f.value,"onUpdate:show":e[24]||(e[24]=t=>f.value=t)},{default:n(()=>[a(G,{style:{width:"800px"},title:r.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:n(()=>[a($,{justify:"end"},{default:n(()=>[a(O,{tertiary:"",size:"large",onClick:e[23]||(e[23]=t=>f.value=!1),disabled:_.value},{default:n(()=>e[25]||(e[25]=[P(" Cancelar ")])),_:1},8,["disabled"]),a(O,{size:"large",type:"primary",onClick:z,loading:_.value},{default:n(()=>e[26]||(e[26]=[P("Guardar")])),_:1},8,["loading"])]),_:1})]),default:n(()=>[a(A,{ref_key:"formRef",ref:g,model:u.value,rules:S.value,size:"large"},{default:n(()=>[a(x,{gutter:16},{default:n(()=>[a(i,{span:p(v)==="sm"?12:4},{default:n(()=>{var t;return[a(d,{path:"code",label:"Código",feedback:(t=l.value)==null?void 0:t.code},{default:n(()=>{var s;return[a(U,{value:u.value.code,"onUpdate:value":[e[0]||(e[0]=o=>u.value.code=o),e[1]||(e[1]=o=>l.value!=null?l.value.code=null:()=>{})],status:((s=l.value)==null?void 0:s.code)!=null?"error":""},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:p(v)==="sm"?12:20},{default:n(()=>{var t;return[a(d,{path:"name",label:"Nombre",feedback:(t=l.value)==null?void 0:t.name},{default:n(()=>{var s;return[a(U,{value:u.value.name,"onUpdate:value":[e[2]||(e[2]=o=>u.value.name=o),e[3]||(e[3]=o=>l.value!=null?l.value.name=null:()=>{})],status:((s=l.value)==null?void 0:s.name)!=null?"error":""},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:"24"},{default:n(()=>{var t;return[a(d,{path:"curriculumId",label:"Plan de estudios",feedback:(t=l.value)==null?void 0:t.curriculumId},{default:n(()=>{var s;return[a(b,{value:u.value.curriculumId,"onUpdate:value":[e[4]||(e[4]=o=>u.value.curriculumId=o),e[5]||(e[5]=o=>C(!1))],options:r.curriculumOptions,filterable:"",clearable:"","virtual-scroll":!1,status:((s=l.value)==null?void 0:s.curriculumId)!=null?"error":""},null,8,["value","options","status"])]}),_:1},8,["feedback"])]}),_:1}),a(i,{span:p(v)==="sm"?24:12},{default:n(()=>{var t;return[a(d,{path:"areaId",label:"Área",feedback:(t=l.value)==null?void 0:t.areaId},{default:n(()=>{var s;return[a(b,{value:u.value.areaId,"onUpdate:value":[e[6]||(e[6]=o=>u.value.areaId=o),e[7]||(e[7]=o=>l.value!=null?l.value.areaId=null:()=>{})],options:w.value,disabled:u.value.curriculumId==null,filterable:"",clearable:"","virtual-scroll":!1,status:((s=l.value)==null?void 0:s.areaId)!=null?"error":""},null,8,["value","options","disabled","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:p(v)==="sm"?24:12},{default:n(()=>{var t;return[a(d,{path:"moduleId",label:"Módulo",feedback:(t=l.value)==null?void 0:t.moduleId},{default:n(()=>{var s;return[a(b,{value:u.value.moduleId,"onUpdate:value":[e[8]||(e[8]=o=>u.value.moduleId=o),e[9]||(e[9]=o=>l.value!=null?l.value.moduleId=null:()=>{})],options:y.value,disabled:u.value.curriculumId==null,filterable:"",clearable:"","virtual-scroll":!1,status:((s=l.value)==null?void 0:s.moduleId)!=null?"error":""},null,8,["value","options","disabled","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:p(v)==="sm"?12:4},{default:n(()=>{var t;return[a(d,{path:"order",label:"Orden",feedback:(t=l.value)==null?void 0:t.order},{default:n(()=>{var s;return[a(c,{style:{width:"100%"},clearable:"",value:u.value.order,"onUpdate:value":e[10]||(e[10]=o=>u.value.order=o),status:((s=l.value)==null?void 0:s.order)!=null?"error":"",onInput:e[11]||(e[11]=o=>l.value!=null?l.value.order=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:p(v)==="sm"?12:4},{default:n(()=>{var t;return[a(d,{path:"credits",label:"Créditos",feedback:(t=l.value)==null?void 0:t.credits},{default:n(()=>{var s;return[a(c,{style:{width:"100%"},clearable:"",value:u.value.credits,"onUpdate:value":e[12]||(e[12]=o=>u.value.credits=o),status:((s=l.value)==null?void 0:s.credits)!=null?"error":"",onInput:e[13]||(e[13]=o=>l.value!=null?l.value.credits=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:p(v)==="sm"?12:4},{default:n(()=>{var t;return[a(d,{path:"units",label:"Unidad",feedback:(t=l.value)==null?void 0:t.units},{default:n(()=>{var s;return[a(c,{style:{width:"100%"},clearable:"",value:u.value.units,"onUpdate:value":e[14]||(e[14]=o=>u.value.units=o),status:((s=l.value)==null?void 0:s.units)!=null?"error":"",onInput:e[15]||(e[15]=o=>l.value!=null?l.value.units=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:p(v)==="sm"?12:6},{default:n(()=>{var t;return[a(d,{path:"hoursPractice",label:"Horas Practicas",feedback:(t=l.value)==null?void 0:t.hoursPractice},{default:n(()=>{var s;return[a(c,{style:{width:"100%"},clearable:"",value:u.value.hoursPractice,"onUpdate:value":e[16]||(e[16]=o=>u.value.hoursPractice=o),status:((s=l.value)==null?void 0:s.hoursPractice)!=null?"error":"",onInput:e[17]||(e[17]=o=>l.value!=null?l.value.hoursPractice=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:p(v)==="sm"?12:6},{default:n(()=>{var t;return[a(d,{path:"hoursTheory",label:"Horas Teoricas",feedback:(t=l.value)==null?void 0:t.hoursTheory},{default:n(()=>{var s;return[a(c,{style:{width:"100%"},clearable:"",value:u.value.hoursTheory,"onUpdate:value":e[18]||(e[18]=o=>u.value.hoursTheory=o),status:((s=l.value)==null?void 0:s.hoursTheory)!=null?"error":"",onInput:e[19]||(e[19]=o=>l.value!=null?l.value.hoursTheory=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:(p(v)==="sm",24)},{default:n(()=>{var t;return[a(d,{path:"preRequisiteId",label:"Pre-Requisito",feedback:(t=l.value)==null?void 0:t.preRequisiteId},{default:n(()=>{var s;return[a(b,{clearable:"",filterable:"",options:R.value,disabled:u.value.curriculumId==null,placeholder:"Seleccione un curso","virtual-scroll":!1,value:u.value.preRequisiteId,"onUpdate:value":[e[20]||(e[20]=o=>u.value.preRequisiteId=o),e[21]||(e[21]=o=>l.value!=null?l.value.preRequisiteId=null:()=>{})],status:((s=l.value)==null?void 0:s.preRequisiteId)!=null?"error":""},null,8,["options","disabled","value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(i,{span:"24"},{default:n(()=>[a($,{justify:"end"},{default:n(()=>[a(d,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:n(()=>[a(j,{value:u.value.isEnabled,"onUpdate:value":e[22]||(e[22]=t=>u.value.isEnabled=t)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}});export{Ce as _};
