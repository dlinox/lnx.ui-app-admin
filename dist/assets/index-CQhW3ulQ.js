import{r as x,i as C}from"./DataTable.types-O1f2gI-n.js";import{_ as E}from"./StudentForm.vue_vue_type_script_setup_true_lang-BqIf8miI.js";import{d as O}from"./debounce.utils-DqPPCsFD.js";import{d as h,a9 as k,a4 as U,a6 as l,aa as t,ah as z,ag as I,h as b,r as d,ak as A,al as N,ac as D,ab as f,am as q,_ as P,ae as S,ai as G}from"./index-DYxGiGyZ.js";import{u as H}from"./composables-DM7s1Npn.js";import{_ as L}from"./Dropdown-B_S2k-69.js";import{N as T,_ as R,b as j}from"./Col-1P6V_qQb.js";import{_ as J,a as K}from"./student.services-CeVGBjsK.js";import{d as Q}from"./studentType.services-D6IZoXdy.js";import{d as X}from"./documentType.services-BT2HPqNH.js";import{_ as Y}from"./FormItem-khv4guBG.js";import{_ as Z}from"./DataTable-CEAYLJVh.js";import"./get-B5_b6rDM.js";import"./genders.constans-ZqlXwVVz.js";import"./useBreakpoints-9dF7HQ25.js";import"./Switch--OPcRDA5.js";import"./ChevronRight-Dw_frzul.js";const ee=h({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(s,{emit:n}){const a=n,e=H(),m=[{label:"Editar",key:"edit",icon:x("edit-2"),props:{onClick:()=>a("edit")}},{label:"Eliminar",key:"delete",icon:x("trash","red"),props:{style:{color:"red"},onClick:()=>{e.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{a("delete")}})}}}];return(i,o)=>{const r=I,p=L;return k(),U(p,{options:m,placement:"bottom-start"},{default:l(()=>[t(r,null,{default:l(()=>[t(z,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),te=(s,n)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(a){const e=a;return b(ee,{onEdit:()=>{s(e)},onDelete:()=>{n(e)},item:e},{default:()=>"Editar"})}},{title:"Codigo",key:"code",minWidth:"120px"},{title:"Número de documento",key:"documentNumber",minWidth:"120px"},{title:"Nombre",key:"name",minWidth:"120px"},{title:"Apellido Paterno",key:"lastNameFather",minWidth:"120px"},{title:"Apellido Materno",key:"lastNameMother",minWidth:"120px"},{title:"Género",key:"gender",minWidth:"150px",render:a=>b(T,{tertiary:!0,bordered:!1,strong:!0},{default:()=>a.gender===1?"MASCULINO":a.gender===2?"FEMENINO":"NO ESPECIFICADO"})},{title:"Email",key:"email",minWidth:"80px"},{title:"Teléfono",key:"phone",minWidth:"100px"},{title:"Tipo de estudiante",key:"studentType",minWidth:"150px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:a=>b(T,{type:a.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>a.isEnabled?"	Habilitado":"Deshabilitado"})}],ae=(s=C())=>({page:s.page,total:s.total,pageSize:s.pageSize,pageCount:s.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${s.total} registros`}}),ne={style:{"border-bottom":"1px solid #e9e9e9"}},oe=h({__name:"DataTable",setup(s){const n=d(!1),a=d([]),e=d(!1),m=d(null),i=A({...C()}),o=d({search:null,page:i.page,pageSize:i.pageSize}),r=d({}),p=d({}),V=te(u=>{m.value=u,e.value=!0},async u=>{await K(u),await c()}),c=async()=>{o.value.page=1,await _()},_=async()=>{n.value=!0,r.value=await J(o.value),a.value=r.value.data,i.total=r.value.total,i.pageSize=r.value.per_page,i.page=r.value.current_page,i.pageCount=r.value.last_page,n.value=!1},B=O(()=>{c()},400),W=async u=>{o.value.page=u,await _()},$=async u=>{o.value.page=1,o.value.pageSize=u,await _()};return(async()=>{await _(),p.value.studentTypesItems=await Q(),p.value.documentTypesItems=await X()})(),(u,g)=>{const v=R,F=Y,w=j,M=Z;return k(),N(P,null,[D("div",ne,[t(w,{gutter:12,style:{padding:"12px 16px"}},{default:l(()=>[t(v,{span:12}),t(v,{span:12},{default:l(()=>[t(F,{size:"large",placeholder:"Buscar",value:o.value.search,"onUpdate:value":g[0]||(g[0]=y=>o.value.search=y),onInput:f(B),clearable:""},{suffix:l(()=>[t(z,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),t(w,null,{default:l(()=>[t(v,{span:24},{default:l(()=>[t(M,{key:"id",remote:"","single-line":!1,columns:f(V),data:a.value,pagination:f(ae)(i),"pagination-show-size-picker":!0,loading:n.value,"onUpdate:page":W,"onUpdate:pageSize":$},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),q(u.$slots,"extra",{reLoadDataTable:c,selectables:p.value})]),t(E,{modelValue:e.value,"onUpdate:modelValue":g[1]||(g[1]=y=>e.value=y),item:m.value,onSuccess:c,selectables:p.value},null,8,["modelValue","item","selectables"])],64)}}}),Te=h({__name:"index",setup(s){const n=d(!1);return(a,e)=>{const m=I,i=G;return k(),N(P,null,[t(i,{segmented:{header:!0,content:!0}},{header:l(()=>e[2]||(e[2]=[D("h6",{style:{color:"#999",margin:"0"}},"Gestión de Estudiantes",-1),S(" Estudiantes ")])),"header-extra":l(()=>[t(m,{"render-icon":f(x)("additem"),onClick:e[0]||(e[0]=o=>n.value=!0)},{default:l(()=>e[3]||(e[3]=[S(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),t(oe,null,{extra:l(({reLoadDataTable:o,selectables:r})=>[t(E,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=p=>n.value=p),item:null,onSuccess:o,selectables:r},null,8,["modelValue","onSuccess","selectables"])]),_:1})],64)}}});export{Te as default};
