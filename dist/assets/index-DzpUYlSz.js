import{d as le}from"./debounce.utils-DqPPCsFD.js";import{a as _e,b as Ue,_ as $e}from"./selectables.services-BpH96F3l.js";import{r as ye}from"./icon.utils-_VQD1LzU.js";import{u as ze}from"./useBreakpoints-ElCxPKgB.js";import{_ as Te,a as De,b as Oe,c as Ne,d as Fe}from"./group.services-Dvyog8S1.js";import{d as E,h as r,c as Me,aO as Ee,a as be,Q as We,i as ie,z as W,B as Le,x as me,A as H,ag as T,aP as fe,aQ as ge,u as xe,aR as je,r as V,H as Q,G as X,e as M,p as He,f as Ge,K as Ce,U as j,aS as te,aT as oe,a2 as qe,N as ae,aU as Ke,a3 as se,j as ue,a9 as L,aa as N,aI as Ie,ab as n,ac as t,aB as de,aA as O,aH as Pe,ad as G,af as q,ae as C,a8 as Se,aJ as Je,aG as Ve,_ as ke,aK as Qe}from"./index-B4HM4eEq.js";import{_ as Ye}from"./Spin-D-u68XbS.js";import{i as Xe,_ as K}from"./Input-Blyfr7bU.js";import{u as Ze}from"./use-merged-state-D3q23DVU.js";import{u as et}from"./Suffix-CO3cYY28.js";import{A as he,R as tt,_ as ot}from"./InputNumber-DeGLyp5-.js";import{_ as at}from"./ButtonGroup-gIOyFsEC.js";import{A as nt,_ as rt}from"./DataTable-DxdGd7cD.js";import{_ as lt}from"./Flex-hQPsPHNe.js";import{u as it}from"./composables-CnPINYM7.js";import{_ as we}from"./Alert-C2YmU2PH.js";import{_ as Z,a as ee}from"./Col-CBFn7CGp.js";import{a as Re,_ as st}from"./FormItem-cRsh-SHk.js";import{_ as ce}from"./Select-lU1ug5AA.js";import{_ as Ae}from"./Space-DsuPZ34i.js";import{i as Be}from"./DataTable.types-BEg5m_To.js";import{u as ut,N as ne}from"./Popover-V6QhFDvP.js";import{N as dt}from"./Tag-C7q16pA0.js";import"./Tooltip-BuNmYRWT.js";import"./get-ClpdtJHT.js";import"./Dropdown-CtyOND1F.js";const ct=E({name:"ArrowUp",render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r("g",{fill:"none"},r("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),pt={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"};function mt(){return pt}const ft=Me({name:"DynamicInput",common:be,peers:{Input:Xe,Button:Ee},self:mt}),pe=We("n-dynamic-input"),gt=E({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:i}=ie(pe);return{mergedTheme:e,placeholder:i}},render(){const{mergedTheme:e,placeholder:i,value:o,clsPrefix:l,onUpdateValue:u,disabled:d}=this;return r("div",{class:`${l}-dynamic-input-preset-input`},r(K,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:o,placeholder:i,onUpdateValue:u,disabled:d}))}}),ht=E({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:i,keyPlaceholderRef:o,valuePlaceholderRef:l}=ie(pe);return{mergedTheme:i,keyPlaceholder:o,valuePlaceholder:l,handleKeyInput(u){e.onUpdateValue({key:u,value:e.value.value})},handleValueInput(u){e.onUpdateValue({key:e.value.key,value:u})}}},render(){const{mergedTheme:e,keyPlaceholder:i,valuePlaceholder:o,value:l,clsPrefix:u,disabled:d}=this;return r("div",{class:`${u}-dynamic-input-preset-pair`},r(K,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:l.key,class:`${u}-dynamic-input-pair-input`,placeholder:i,onUpdateValue:this.handleKeyInput,disabled:d}),r(K,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:l.value,class:`${u}-dynamic-input-pair-input`,placeholder:o,onUpdateValue:this.handleValueInput,disabled:d}))}}),vt=W("dynamic-input",{width:"100%"},[W("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[W("dynamic-input-preset-input",{flex:1,alignItems:"center"}),W("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[W("dynamic-input-pair-input",[me("&:first-child",{"margin-right":"12px"})])]),Le("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[H("icon",{cursor:"pointer"})]),me("&:last-child",{marginBottom:0})]),W("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[W("form-item-blank",{paddingTop:"0 !important"})])]),Y=new WeakMap,_t=Object.assign(Object.assign({},X.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),yt=E({name:"DynamicInput",props:_t,setup(e,{slots:i}){const{mergedComponentPropsRef:o,mergedClsPrefixRef:l,mergedRtlRef:u,inlineThemeDisabled:d}=xe(),c=ie(je,null),h=V(e.defaultValue),A=Q(e,"value"),g=Ze(A,h),p=X("DynamicInput","-dynamic-input",vt,ft,e,l),v=M(()=>{const{value:a}=g;if(Array.isArray(a)){const{max:s}=e;return s!==void 0&&a.length>=s}return!1}),I=M(()=>{const{value:a}=g;return Array.isArray(a)?a.length<=e.min:!0}),$=M(()=>{var a,s;return(s=(a=o==null?void 0:o.value)===null||a===void 0?void 0:a.DynamicInput)===null||s===void 0?void 0:s.buttonSize});function x(a){const{onInput:s,"onUpdate:value":y,onUpdateValue:b}=e;s&&ae(s,a),y&&ae(y,a),b&&ae(b,a),h.value=a}function m(a,s){if(a==null||typeof a!="object")return s;const y=te(a)?oe(a):a;let b=Y.get(y);return b===void 0&&Y.set(y,b=qe()),b}function f(a,s){const{value:y}=g,b=Array.from(y??[]),B=b[a];if(b[a]=s,B&&s&&typeof B=="object"&&typeof s=="object"){const S=te(B)?oe(B):B,J=te(s)?oe(s):s,U=Y.get(S);U!==void 0&&Y.set(J,U)}x(b)}function D(){k(-1)}function k(a){const{value:s}=g,{onCreate:y}=e,b=Array.from(s??[]);if(y)b.splice(a+1,0,y(a+1)),x(b);else if(i.default)b.splice(a+1,0,null),x(b);else switch(e.preset){case"input":b.splice(a+1,0,""),x(b);break;case"pair":b.splice(a+1,0,{key:"",value:""}),x(b);break}}function w(a){const{value:s}=g;if(!Array.isArray(s))return;const{min:y}=e;if(s.length<=y)return;const{onRemove:b}=e;b&&b(a);const B=Array.from(s);B.splice(a,1),x(B)}function _(a,s,y){if(s<0||y<0||s>=a.length||y>=a.length||s===y)return;const b=a[s];a[s]=a[y],a[y]=b}function P(a,s){const{value:y}=g;if(!Array.isArray(y))return;const b=Array.from(y);a==="up"&&_(b,s,s-1),a==="down"&&_(b,s,s+1),x(b)}He(pe,{mergedThemeRef:p,keyPlaceholderRef:Q(e,"keyPlaceholder"),valuePlaceholderRef:Q(e,"valuePlaceholder"),placeholderRef:Q(e,"placeholder")});const R=Ge("DynamicInput",u,l),F=M(()=>{const{self:{actionMargin:a,actionMarginRtl:s}}=p.value;return{"--action-margin":a,"--action-margin-rtl":s}}),z=d?Ce("dynamic-input",void 0,F,e):void 0;return{locale:et("DynamicInput").localeRef,rtlEnabled:R,buttonSize:$,mergedClsPrefix:l,NFormItem:c,uncontrolledValue:h,mergedValue:g,insertionDisabled:v,removeDisabled:I,handleCreateClick:D,ensureKey:m,handleValueChange:f,remove:w,move:P,createItem:k,mergedTheme:p,cssVars:d?void 0:F,themeClass:z==null?void 0:z.themeClass,onRender:z==null?void 0:z.onRender}},render(){const{$slots:e,itemClass:i,buttonSize:o,mergedClsPrefix:l,mergedValue:u,locale:d,mergedTheme:c,keyField:h,itemStyle:A,preset:g,showSortButton:p,NFormItem:v,ensureKey:I,handleValueChange:$,remove:x,createItem:m,move:f,onRender:D,disabled:k}=this;return D==null||D(),r("div",{class:[`${l}-dynamic-input`,this.rtlEnabled&&`${l}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(u)||u.length===0?r(T,Object.assign({block:!0,ghost:!0,dashed:!0,size:o},this.createButtonProps,{disabled:this.insertionDisabled||k,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>fe(e["create-button-default"],()=>[d.create]),icon:()=>fe(e["create-button-icon"],()=>[r(j,{clsPrefix:l},{default:()=>r(he,null)})])}):u.map((w,_)=>r("div",{key:h?w[h]:I(w,_),"data-key":h?w[h]:I(w,_),class:[`${l}-dynamic-input-item`,i],style:A},ge(e.default,{value:u[_],index:_},()=>[g==="input"?r(gt,{disabled:k,clsPrefix:l,value:u[_],parentPath:v?v.path.value:void 0,path:v!=null&&v.path.value?`${v.path.value}[${_}]`:void 0,onUpdateValue:P=>{$(_,P)}}):g==="pair"?r(ht,{disabled:k,clsPrefix:l,value:u[_],parentPath:v?v.path.value:void 0,path:v!=null&&v.path.value?`${v.path.value}[${_}]`:void 0,onUpdateValue:P=>{$(_,P)}}):null]),ge(e.action,{value:u[_],index:_,create:m,remove:x,move:f},()=>[r("div",{class:`${l}-dynamic-input-item__action`},r(at,{size:o},{default:()=>[r(T,{disabled:this.removeDisabled||k,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,circle:!0,onClick:()=>{x(_)}},{icon:()=>r(j,{clsPrefix:l},{default:()=>r(tt,null)})}),r(T,{disabled:this.insertionDisabled||k,circle:!0,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:()=>{m(_)}},{icon:()=>r(j,{clsPrefix:l},{default:()=>r(he,null)})}),p?r(T,{disabled:_===0||k,circle:!0,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:()=>{f("up",_)}},{icon:()=>r(j,{clsPrefix:l},{default:()=>r(ct,null)})}):null,p?r(T,{disabled:_===u.length-1||k,circle:!0,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:()=>{f("down",_)}},{icon:()=>r(j,{clsPrefix:l},{default:()=>r(nt,null)})}):null]}))]))))}}),bt={headerFontSize1:"30px",headerFontSize2:"22px",headerFontSize3:"18px",headerFontSize4:"16px",headerFontSize5:"16px",headerFontSize6:"16px",headerMargin1:"28px 0 20px 0",headerMargin2:"28px 0 20px 0",headerMargin3:"28px 0 20px 0",headerMargin4:"28px 0 18px 0",headerMargin5:"28px 0 18px 0",headerMargin6:"28px 0 18px 0",headerPrefixWidth1:"16px",headerPrefixWidth2:"16px",headerPrefixWidth3:"12px",headerPrefixWidth4:"12px",headerPrefixWidth5:"12px",headerPrefixWidth6:"12px",headerBarWidth1:"4px",headerBarWidth2:"4px",headerBarWidth3:"3px",headerBarWidth4:"3px",headerBarWidth5:"3px",headerBarWidth6:"3px",pMargin:"16px 0 16px 0",liMargin:".25em 0 0 0",olPadding:"0 0 0 2em",ulPadding:"0 0 0 2em"};function xt(e){const{primaryColor:i,textColor2:o,borderColor:l,lineHeight:u,fontSize:d,borderRadiusSmall:c,dividerColor:h,fontWeightStrong:A,textColor1:g,textColor3:p,infoColor:v,warningColor:I,errorColor:$,successColor:x,codeColor:m}=e;return Object.assign(Object.assign({},bt),{aTextColor:i,blockquoteTextColor:o,blockquotePrefixColor:l,blockquoteLineHeight:u,blockquoteFontSize:d,codeBorderRadius:c,liTextColor:o,liLineHeight:u,liFontSize:d,hrColor:h,headerFontWeight:A,headerTextColor:g,pTextColor:o,pTextColor1Depth:g,pTextColor2Depth:o,pTextColor3Depth:p,pLineHeight:u,pFontSize:d,headerBarColor:i,headerBarColorPrimary:i,headerBarColorInfo:v,headerBarColorError:$,headerBarColorWarning:I,headerBarColorSuccess:x,textColor:o,textColor1Depth:g,textColor2Depth:o,textColor3Depth:p,textColorPrimary:i,textColorInfo:v,textColorSuccess:x,textColorWarning:I,textColorError:$,codeTextColor:o,codeColor:m,codeBorder:"1px solid #0000"})}const Ct={common:be,self:xt},It=W("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[H("strong",`
 font-weight: var(--n-font-weight-strong);
 `),H("italic",{fontStyle:"italic"}),H("underline",{textDecoration:"underline"}),H("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),Pt=Object.assign(Object.assign({},X.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),re=E({name:"Text",props:Pt,setup(e){const{mergedClsPrefixRef:i,inlineThemeDisabled:o}=xe(e),l=X("Typography","-text",It,Ct,e,i),u=M(()=>{const{depth:c,type:h}=e,A=h==="default"?c===void 0?"textColor":`textColor${c}Depth`:Ke("textColor",h),{common:{fontWeightStrong:g,fontFamilyMono:p,cubicBezierEaseInOut:v},self:{codeTextColor:I,codeBorderRadius:$,codeColor:x,codeBorder:m,[A]:f}}=l.value;return{"--n-bezier":v,"--n-text-color":f,"--n-font-weight-strong":g,"--n-font-famliy-mono":p,"--n-code-border-radius":$,"--n-code-text-color":I,"--n-code-color":x,"--n-code-border":m}}),d=o?Ce("text",M(()=>`${e.type[0]}${e.depth||""}`),u,e):void 0;return{mergedClsPrefix:i,compitableTag:ut(e,["as","tag"]),cssVars:o?void 0:u,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){var e,i,o;const{mergedClsPrefix:l}=this;(e=this.onRender)===null||e===void 0||e.call(this);const u=[`${l}-text`,this.themeClass,{[`${l}-text--code`]:this.code,[`${l}-text--delete`]:this.delete,[`${l}-text--strong`]:this.strong,[`${l}-text--italic`]:this.italic,[`${l}-text--underline`]:this.underline}],d=(o=(i=this.$slots).default)===null||o===void 0?void 0:o.call(i);return this.code?r("code",{class:u,style:this.cssVars},this.delete?r("del",null,d):d):this.delete?r("del",{class:u,style:this.cssVars},d):r(this.compitableTag||"span",{class:u,style:this.cssVars},d)}}),St=[{value:"LUN",label:"LUNES"},{value:"MAR",label:"MARTES"},{value:"MIE",label:"MIÉRCOLES"},{value:"JUE",label:"JUEVES"},{value:"VIE",label:"VIERNES"},{value:"SAB",label:"SÁBADO"},{value:"DOM",label:"DOMINGO"}],ve=()=>({id:null,name:null,courseId:null,teacherId:null,laboratoryId:null,schedule:{days:[],startHour:null,endHour:null},maxStudents:0,minStudents:0,modality:null,status:"ABIERTO"}),Vt=[{label:"PRESENCIAL",value:"PRESENCIAL"},{label:"VIRTUAL",value:"VIRTUAL"}],kt={class:"border border-dashed border-gray-400 p-4 rounded relative hover:bg-gray-50"},wt={class:"absolute top-0 right-0"},Rt=E({__name:"GroupForm",props:{modelValue:{type:Boolean},item:{},periodId:{}},emits:["update:modelValue","success"],setup(e,{emit:i}){const{hasPermission:o}=se(),l=it(),u=i,d=e,{screenSize:c}=ze(),h=M({get:()=>d.modelValue,set:m=>u("update:modelValue",m)}),A=V(!1),g=V(!1),p=V([]),v=()=>Object.assign({},{...ve(),name:d.item.code+(p.value.length+1)}),I=m=>{p.value.splice(m,1)},$=async()=>{g.value=!0,(await De(p.value,d.periodId,d.item.id)).status&&(u("success"),h.value=!1),g.value=!1},x=async()=>{if(console.log("Inicializando formulario"),d.item){const m=await Oe({id:d.item.id,periodId:d.periodId});m?p.value=m:p.value=[{...ve(),name:d.item.code}]}};return ue(h,async m=>{m&&(A.value=!0,await x(),A.value=!1)}),(m,f)=>{const D=we,k=K,w=Re,_=ee,P=ce,R=ot,F=Z,z=T,a=yt,s=Ye,y=lt,b=de,B=Ie;return N(),L(B,{show:h.value,"onUpdate:show":f[3]||(f[3]=S=>h.value=S)},{default:n(()=>[t(b,{style:{width:"1200px"},title:"Registro de grupos",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:n(()=>[t(y,{justify:"end"},{default:n(()=>[t(z,{onClick:f[2]||(f[2]=()=>h.value=!1)},{default:n(()=>f[8]||(f[8]=[O("Cancelar")])),_:1}),C(o)(["group.create"])||C(o)(["group.edit"])?(N(),L(z,{key:0,type:"primary",onClick:$},{default:n(()=>f[9]||(f[9]=[O("Guardar")])),_:1})):G("",!0)]),_:1})]),default:n(()=>[t(D,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:n(()=>[t(Pe,{iconName:"information"})]),default:n(()=>[f[4]||(f[4]=O(" Antes de crear un grupo, asegúrese de que el curso tenga los precios asignados para la modalidad y tipo de estudiante correspondientes. "))]),_:1}),t(s,{show:A.value,description:"Cargando formulario"},{default:n(()=>[t(a,{value:p.value,"onUpdate:value":f[0]||(f[0]=S=>p.value=S),"on-create":v,class:"mb-4"},{"create-button-default":n(()=>f[5]||(f[5]=[O(" Nuevo grupo ")])),default:n(({value:S,index:J})=>[q("div",kt,[t(F,{gutter:"16"},{default:n(()=>[t(_,{span:C(c)==="lg"?3:C(c)==="md"?4:12},{default:n(()=>[t(w,{label:"Grupo",path:"name","default-value":"Grupo"},{default:n(()=>[t(k,{value:S.name,"onUpdate:value":U=>S.name=U},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(_,{span:C(c)=="lg"||C(c)==="md"?4:12},{default:n(()=>[t(w,{label:"Modalidad",path:"modality"},{default:n(()=>[t(P,{value:S.modality,"onUpdate:value":U=>S.modality=U,options:C(Vt),filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),t(_,{span:C(c)==="lg"?3:C(c)==="md"?4:12},{default:n(()=>[t(w,{label:"Cupos máx.",path:"maxStudents"},{default:n(()=>[t(R,{value:S.maxStudents,"onUpdate:value":U=>S.maxStudents=U,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(_,{span:C(c)==="lg"?3:C(c)==="md"?4:12},{default:n(()=>[t(w,{label:"Cupos mín.",path:"minStudents"},{default:n(()=>[t(R,{value:S.minStudents,"onUpdate:value":U=>S.minStudents=U,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(_,{span:C(c)==="lg"?11:C(c)==="md"?8:24},{default:n(()=>[t(w,{label:"Horario - Días",path:"schedule.days"},{default:n(()=>[t(P,{value:S.schedule.days,"onUpdate:value":U=>S.schedule.days=U,multiple:"","fallback-option":!1,options:C(St)},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),t(_,{span:C(c)==="lg"||C(c)==="md"?4:12},{default:n(()=>[t(w,{label:"Hora de inicio"},{default:n(()=>[t(k,{clearable:"",type:"time",value:S.schedule.startHour,"onUpdate:value":U=>S.schedule.startHour=U,placeholder:"","use-12-hours":"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(_,{span:C(c)==="lg"||C(c)==="md"?4:12},{default:n(()=>[t(w,{label:"Hora de fin"},{default:n(()=>[t(k,{clearable:"",type:"time",value:S.schedule.endHour,"onUpdate:value":U=>S.schedule.endHour=U,placeholder:"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"])]),_:2},1024),q("div",wt,[C(o)(["group.delete"])?(N(),L(z,{key:0,secondary:"",type:"error","render-icon":C(ye)("trash"),onClick:()=>{C(l).warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:S.id?"Eliminar":"Quitar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:async()=>{S.id?await C(Te)(S)&&I(J):I(J)}})}},null,8,["render-icon","onClick"])):G("",!0)])])]),action:n(({})=>f[6]||(f[6]=[q("div",null,null,-1)])),_:1},8,["value"]),p.value.length>0&&C(o)(["group.create"])?(N(),L(z,{key:0,block:"",secondary:"",type:"primary",class:"mt-4",onClick:f[1]||(f[1]=()=>p.value.push(v()))},{default:n(()=>f[7]||(f[7]=[O(" Agregar grupo ")])),_:1})):G("",!0)]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}}),At=E({__name:"GroupCloneForm",props:{modelValue:{type:Boolean},curriculumId:{},periodId:{}},emits:["update:modelValue","success","cancel"],setup(e,{emit:i}){const o=i,l=e,u={periodReferenceId:{trigger:["change","blur"],type:"number",required:!0,message:"Este campo es requerido"}},d=V(!1),c=V([]),h=async x=>{d.value=!0,c.value=await _e(x),d.value=!1},A=le(x=>{h(x)},400),g=M({get:()=>l.modelValue,set:x=>o("update:modelValue",x)}),p=V(null),I=V(Object.assign({},{periodId:null,periodReferenceId:null,curriculumId:null})),$=async()=>{p.value&&await p.value.validate()&&(I.value.curriculumId=l.curriculumId,I.value.periodId=l.periodId,await Ne(I.value)&&(o("success"),g.value=!1))};return ue(()=>l.modelValue,async x=>{x&&await h("")}),(x,m)=>{const f=Se("LnxIcon"),D=we,k=ce,w=Re,_=ee,P=Z,R=st,F=T,z=Ae,a=de,s=Ie;return N(),L(s,{show:g.value,"onUpdate:show":m[2]||(m[2]=y=>g.value=y)},{default:n(()=>[t(a,{style:{width:"500px"},title:"Clonar Grupos de un Periodo a Otro",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:n(()=>[t(z,{justify:"end"},{default:n(()=>[t(F,{onClick:m[1]||(m[1]=y=>g.value=!1)},{default:n(()=>m[4]||(m[4]=[O("Cancelar")])),_:1}),t(F,{type:"primary",onClick:$},{default:n(()=>m[5]||(m[5]=[O(" Aceptar ")])),_:1})]),_:1})]),default:n(()=>[t(D,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:n(()=>[t(f,{iconName:"information"})]),default:n(()=>[m[3]||(m[3]=O(" Para evitar problemas, la clonación solo está disponible si no hay matrículas en este periodo académico. Antes de continuar, verifica esta condición. "))]),_:1}),t(R,{ref_key:"formRef",ref:p,model:I.value,rules:u},{default:n(()=>[t(P,{gutter:16},{default:n(()=>[t(_,{span:24},{default:n(()=>[t(w,{label:"Periodo Académico de referencia",path:"periodReferenceId"},{default:n(()=>[t(k,{value:I.value.periodReferenceId,"onUpdate:value":m[0]||(m[0]=y=>I.value.periodReferenceId=y),placeholder:"Seleccionar Periodo Académico",filterable:"",options:c.value,loading:d.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:C(A)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),Bt=e=>[{title:"Grupos",key:"ops",width:"80px",fixed:"left",render(i){const o=i;return r(T,{type:"tertiary",onClick:()=>e(o)},{default:()=>`${o.countGroups} Grupo(s) `})}},{title:"Modulo",key:"module-group",minWidth:"200px",children:[{title:"Nombre",key:"module",minWidth:"180px"},{title:"Precios",key:"modulePrice",minWidth:"100px",render:i=>r(ne,{trigger:"click"},{trigger:()=>r(T,null,{default:()=>`Ver precios (${Array.isArray(i.modulePrice)?i.modulePrice.length:0})`}),header:()=>r(re,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var o;return r("ul",{},Array.isArray(i.modulePrice)?(o=i.modulePrice)==null?void 0:o.map(l=>r("li",{},`S/. ${l}`)):r("li",{},"No hay precios definidos"))}})}]},{title:"Curso",key:"course-group",children:[{title:"Codigo",key:"code",minWidth:"80px"},{title:"Nombre",key:"course",minWidth:"180px"},{title:"Precios Virtual",key:"virtualPrice",minWidth:"100px",render:i=>r(ne,{trigger:"click"},{trigger:()=>r(T,null,{default:()=>`Ver precios (${Array.isArray(i.virtualPrice)?i.virtualPrice.length:0})`}),header:()=>r(re,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var o;return r("ul",{},Array.isArray(i.virtualPrice)?(o=i.virtualPrice)==null?void 0:o.map(l=>r("li",{},`S/. ${l}`)):r("li",{},"No hay precios definidos"))}})},{title:"Precios Presencial",key:"presentialPrice",minWidth:"100px",render:i=>r(ne,{trigger:"click"},{trigger:()=>r(T,null,{default:()=>`Ver precios (${Array.isArray(i.presentialPrice)?i.presentialPrice.length:0})`}),header:()=>r(re,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var o;return r("ul",{},Array.isArray(i.presentialPrice)?(o=i.presentialPrice)==null?void 0:o.map(l=>r("li",{},`S/. ${l}`)):r("li",{},"No hay precios definidos"))}})},{title:"Estado",key:"isEnabled",width:"150px",render:i=>r(dt,{type:i.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>i.isEnabled?"	Habilitado":"Deshabilitado"})}]}],Ut=(e=Be())=>({page:e.page,total:e.total,pageSize:e.pageSize,pageCount:e.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${e.total} registros`}}),$t={style:{"border-bottom":"1px solid #e9e9e9"}},zt=E({__name:"DataTable",props:{periodId:{},curriculumId:{}},setup(e){const{hasPermission:i}=se(),o=e,l=M(()=>({periodId:o.periodId,curriculumId:o.curriculumId})),u=V(!1),d=V([]),c=V(!1),h=V(!1),A=V(null),g=Je({...Be()}),p=V({search:null,page:g.page,pageSize:g.pageSize,filters:{...l.value}}),v=V({}),I=V([]),x=Bt(P=>{A.value=P,c.value=!0}),m=async()=>{p.value.page=1,await f()},f=async()=>{u.value=!0,v.value=await Fe(p.value),d.value=v.value.data,g.total=v.value.total,g.pageSize=v.value.per_page,g.page=v.value.current_page,g.pageCount=v.value.last_page,u.value=!1},D=le(()=>{m()},400),k=async P=>{p.value.page=P,await f()},w=async P=>{p.value.page=1,p.value.pageSize=P,await f()},_=async()=>{I.value=await Ue(""),await f()};return ue(l,async(P,R)=>{p.value.filters=P,await m()},{deep:!0}),_(),(P,R)=>{const F=T,z=Ae,a=ee,s=K,y=Z,b=rt;return N(),Ve(ke,null,[q("div",$t,[t(y,{gutter:12,style:{padding:"12px 16px"}},{default:n(()=>[t(a,{span:12,class:"self-center"},{default:n(()=>[t(z,null,{default:n(()=>[C(i)(["group.clone"])?(N(),L(F,{key:0,"render-icon":C(ye)("convertshape"),onClick:R[0]||(R[0]=B=>h.value=!0)},{default:n(()=>R[4]||(R[4]=[O(" Clonar grupos ")])),_:1},8,["render-icon"])):G("",!0)]),_:1})]),_:1}),t(a,{span:12},{default:n(()=>[t(s,{size:"large",placeholder:"Buscar",value:p.value.search,"onUpdate:value":R[1]||(R[1]=B=>p.value.search=B),onInput:C(D),clearable:""},{suffix:n(()=>[t(Pe,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),t(y,null,{default:n(()=>[t(a,{span:24},{default:n(()=>[t(b,{key:"id",remote:"",size:"small","single-line":!1,columns:C(x),data:d.value,pagination:C(Ut)(g),"pagination-show-size-picker":!0,loading:u.value,"onUpdate:page":k,"onUpdate:pageSize":w},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),Qe(P.$slots,"extra",{reLoadDataTable:m})]),t(Rt,{modelValue:c.value,"onUpdate:modelValue":R[2]||(R[2]=B=>c.value=B),item:A.value,periodId:P.periodId,laboratoryOptions:I.value,onSuccess:m},null,8,["modelValue","item","periodId","laboratoryOptions"]),t(At,{modelValue:h.value,"onUpdate:modelValue":R[3]||(R[3]=B=>h.value=B),periodId:P.periodId,curriculumId:P.curriculumId,onSuccess:m},null,8,["modelValue","periodId","curriculumId"])],64)}}}),io=E({__name:"index",setup(e){const{hasPermission:i}=se(),o=V(!1),l=V([]),u=async g=>{o.value=!0,l.value=await _e(g),o.value=!1},d=le(g=>{u(g)},400),c=V([]),h=V({period:null,curriculumId:null});return(async()=>{await u(""),c.value=await $e()})(),(g,p)=>{const v=ce,I=ee,$=Z,x=de,m=Se("AppNotAuthorization");return C(i)(["group.create","group.edit","group.delete","group.clone"])?(N(),Ve(ke,{key:0},[t(x,{segmented:{header:!0,content:!0}},{header:n(()=>p[2]||(p[2]=[q("h6",{class:"text-sm text-gray-400"},"Carga Académica",-1),O(" Apertura de grupos ")])),action:n(()=>[t($,{gutter:"16",style:{display:"flex","justify-content":"center"}},{default:n(()=>[t(I,{span:"10"},{default:n(()=>[t(v,{value:h.value.curriculumId,"onUpdate:value":p[0]||(p[0]=f=>h.value.curriculumId=f),placeholder:"Seleccionar Plan de estudio",filterable:"",options:c.value,clearable:"","virtual-scroll":!1},null,8,["value","options"])]),_:1}),t(I,{span:"10"},{default:n(()=>[t(v,{value:h.value.period,"onUpdate:value":p[1]||(p[1]=f=>h.value.period=f),placeholder:"Seleccionar Periodo Académico",filterable:"",options:l.value,loading:o.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:C(d)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1}),h.value.period&&h.value.curriculumId?(N(),L(zt,{key:0,periodId:h.value.period,curriculumId:h.value.curriculumId},null,8,["periodId","curriculumId"])):G("",!0)],64)):(N(),L(m,{key:1}))}}});export{io as default};
