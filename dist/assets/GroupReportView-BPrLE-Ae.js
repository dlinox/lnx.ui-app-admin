import{d as ue,a as A,_ as de}from"./selectables.services-qRu4Op-i.js";import{b as ie,c as ce,d as pe,e as me}from"./report.services-B7qcP8qP.js";import{r as k}from"./icon.utils-CJqgT2q4.js";import{d as j}from"./debounce.utils-DqPPCsFD.js";import{d as U,e as z,r as d,j as D,a8 as M,a9 as h,aa as e,ab as o,aA as E,az as f,ad as w,aF as W,_ as X,aT as _e,ae as F,ag as P,af as O,aH as H}from"./index-Mm-w-23V.js";import{_ as fe}from"./Divider-CNnN6k03.js";import{_ as N,a as T}from"./Col-DSV9bJWa.js";import{_ as L}from"./Select-BgP3DZgt.js";import{a as Y,_ as Z}from"./ListItem-CsVTR4Zr.js";import{_ as ee}from"./Thing-DopJpE8Y.js";import{_ as ve}from"./Tag-hxCWo2xn.js";import{_ as q}from"./Space-aSEcdxs0.js";import"./Popover-DJdlSI1t.js";import"./get-CmkOQxkd.js";import"./use-merged-state-BlrC8VEx.js";import"./Suffix-CqsLXtUP.js";const ge=U({__name:"Enrollments",props:{modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(C,{emit:y}){const v=y,g=C,r=z({get:()=>g.modelValue,set:i=>v("update:modelValue",i)}),m=d(!1),b=d(!1),n=d([]),c=d([]),_=d([]),a=d({periodId:null,curriculumId:null,moduleId:null}),x=async i=>{m.value=!0,await ie({groupId:i}),m.value=!1},V=async i=>{b.value=!0,c.value=await A(i),b.value=!1},l=j(i=>{V(i)},400),s=async i=>{_.value=await ue(i)},I=async()=>{n.value=await ce(a.value)},$=()=>{V("")};return D(r,i=>{i&&$()}),(i,t)=>{const S=O,B=fe,G=L,p=T,oe=ve,ne=ee,J=q,le=Z,te=Y,ae=N,re=E,se=H;return h(),M(se,{show:r.value,"onUpdate:show":t[5]||(t[5]=u=>r.value=u)},{default:e(()=>[o(re,{style:{width:"800px"},title:"Generar Reporte - Matrículas",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(S,{"render-icon":w(k)("close-circle"),onClick:t[0]||(t[0]=u=>r.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(J,{justify:"end"},{default:e(()=>[o(S,{tertiary:"",size:"large",onClick:t[4]||(t[4]=u=>r.value=!1),disabled:m.value},{default:e(()=>t[8]||(t[8]=[f(" Cancelar ")])),_:1},8,["disabled"])]),_:1})]),default:e(()=>[o(B,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:e(()=>t[6]||(t[6]=[f(" Buscar estudiantes ")])),_:1}),o(ae,{gutter:"16"},{default:e(()=>[o(p,{span:"8"},{default:e(()=>[o(G,{value:a.value.periodId,"onUpdate:value":[t[1]||(t[1]=u=>a.value.periodId=u),I],placeholder:"Seleccionar Periodo Académico",filterable:"",options:c.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:w(l)},null,8,["value","options","onSearch"])]),_:1}),o(p,{span:"8"},{default:e(()=>[o(G,{disabled:a.value.periodId===null,value:a.value.curriculumId,"onUpdate:value":[t[2]||(t[2]=u=>a.value.curriculumId=u),s],placeholder:"Seleccionar Plan de estudio",filterable:"",options:i.curriculumOptions,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(p,{span:"8"},{default:e(()=>[o(G,{disabled:a.value.curriculumId===null||a.value.periodId===null,value:a.value.moduleId,"onUpdate:value":[t[3]||(t[3]=u=>a.value.moduleId=u),I],placeholder:"Seleccionar Módulo",filterable:"",options:_.value,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(p,{span:"24",class:"border-t border-t-gray-200 mt-2"},{default:e(()=>[o(te,{hoverable:"",clickable:"",style:{"max-height":"300px","overflow-y":"auto"}},{default:e(()=>[(h(!0),W(X,null,_e(n.value,u=>(h(),M(le,{style:{margin:"0 1rem"},key:u.id},{default:e(()=>[o(ne,null,{header:e(()=>[o(oe,{bordered:!1,class:"me-2"},{default:e(()=>[f(P(u.status),1)]),_:2},1024),f(" "+P(u.name)+" - "+P(u.course),1)]),default:e(()=>{var R,K,Q;return[F("i",null,P((R=u.schedule)==null?void 0:R.days)+" - "+P((K=u.schedule)==null?void 0:K.startHour)+" a "+P((Q=u.schedule)==null?void 0:Q.endHour),1)]}),_:2},1024),o(J,{align:"center",justify:"end"},{default:e(()=>[o(S,{secondary:"",class:"ms-2",type:"error","render-icon":w(k)("document-download"),onClick:R=>x(u.id)},{default:e(()=>t[7]||(t[7]=[f(" PDF ")])),_:2},1032,["render-icon","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),be=U({__name:"EnabledGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(C,{emit:y}){const v=y,g=C,r=z({get:()=>g.modelValue,set:l=>v("update:modelValue",l)}),m=d(!1),b=d(!1),n=d([]),c=d({periodId:null}),_=async()=>{m.value=!0,await pe({periodId:c.value.periodId}),m.value=!1},a=async l=>{b.value=!0,n.value=await A(l),b.value=!1},x=j(l=>{a(l)},400),V=()=>{a("")};return D(r,l=>{l&&V()}),(l,s)=>{const I=O,$=L,i=T,t=N,S=q,B=E,G=H;return h(),M(G,{show:r.value,"onUpdate:show":s[2]||(s[2]=p=>r.value=p)},{default:e(()=>[o(B,{style:{width:"800px"},title:"Generar Reporte - Grupos Aperturados",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(I,{"render-icon":w(k)("close-circle"),onClick:s[0]||(s[0]=p=>r.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(S,{justify:"center"},{default:e(()=>[o(I,{disabled:c.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:m.value,"render-icon":w(k)("document-download"),onClick:_},{default:e(()=>s[3]||(s[3]=[f(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(i,{span:"24"},{default:e(()=>[o($,{class:"mx-auto",style:{width:"300px"},value:c.value.periodId,"onUpdate:value":s[1]||(s[1]=p=>c.value.periodId=p),placeholder:"Seleccionar Periodo Académico",filterable:"",options:n.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:w(x)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),we=U({__name:"CollectionGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(C,{emit:y}){const v=y,g=C,r=z({get:()=>g.modelValue,set:l=>v("update:modelValue",l)}),m=d(!1),b=d(!1),n=d([]),c=d({periodId:null}),_=async()=>{m.value=!0,await me({periodId:c.value.periodId}),m.value=!1},a=async l=>{b.value=!0,n.value=await A(l),b.value=!1},x=j(l=>{a(l)},400),V=()=>{a("")};return D(r,l=>{l&&V()}),(l,s)=>{const I=O,$=L,i=T,t=N,S=q,B=E,G=H;return h(),M(G,{show:r.value,"onUpdate:show":s[2]||(s[2]=p=>r.value=p)},{default:e(()=>[o(B,{style:{width:"800px"},title:"Generar Reporte - Recaudación por grupo",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(I,{"render-icon":w(k)("close-circle"),onClick:s[0]||(s[0]=p=>r.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(S,{justify:"center"},{default:e(()=>[o(I,{disabled:c.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:m.value,"render-icon":w(k)("document-download"),onClick:_},{default:e(()=>s[3]||(s[3]=[f(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(t,{gutter:"16"},{default:e(()=>[o(i,{span:"24"},{default:e(()=>[o($,{class:"mx-auto",style:{width:"300px"},value:c.value.periodId,"onUpdate:value":s[1]||(s[1]=p=>c.value.periodId=p),placeholder:"Seleccionar Periodo Académico",filterable:"",options:n.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:w(x)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Re=U({__name:"GroupReportView",setup(C){const y=d([]),v=d(!1),g=d(!1),r=d(!1);return(async()=>{y.value=await de()})(),(b,n)=>{const c=O,_=ee,a=Z,x=Y,V=E;return h(),W(X,null,[o(V,{segmented:{header:!0,content:!0}},{header:e(()=>n[6]||(n[6]=[F("span",{class:"text-sm text-slate-500"}," Reportes ",-1),F("h5",{class:"text-lg font-bold text-slate-800"},"Reporte de grupos",-1)])),default:e(()=>[o(x,null,{default:e(()=>[o(a,null,{suffix:e(()=>[o(c,{onClick:n[0]||(n[0]=l=>v.value=!0)},{default:e(()=>n[7]||(n[7]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(_,{title:"Matrículas",description:"Estudiantes matriculados en un grupo"})]),_:1}),o(a,null,{suffix:e(()=>[o(c,{onClick:n[1]||(n[1]=l=>g.value=!0)},{default:e(()=>n[8]||(n[8]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(_,{title:"Grupos Aperturados",description:"Grupos aperturados por periodo"})]),_:1}),o(a,null,{suffix:e(()=>[o(c,{onClick:n[2]||(n[2]=l=>r.value=!0)},{default:e(()=>n[9]||(n[9]=[f(" Generar reporte ")])),_:1})]),default:e(()=>[o(_,{title:"Recaudación por grupo",description:"Recaudación por grupo en un periodo"})]),_:1})]),_:1})]),_:1}),o(ge,{modelValue:v.value,"onUpdate:modelValue":n[3]||(n[3]=l=>v.value=l),curriculumOptions:y.value},null,8,["modelValue","curriculumOptions"]),o(be,{modelValue:g.value,"onUpdate:modelValue":n[4]||(n[4]=l=>g.value=l)},null,8,["modelValue"]),o(we,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=l=>r.value=l)},null,8,["modelValue"])],64)}}});export{Re as default};
