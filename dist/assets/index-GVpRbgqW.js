import{r as x,i as S}from"./DataTable.types-O1f2gI-n.js";import{_ as T}from"./CourseForm.vue_vue_type_script_setup_true_lang-D8TzgGT-.js";import{d as b,a9 as k,a4 as U,a6 as n,aa as e,ah as V,ag as I,h as w,a5 as q,r as p,ak as H,al as O,ac as D,ab as v,am as R,_ as E,ae as z,ai as F}from"./index-DYxGiGyZ.js";import{u as A}from"./composables-DM7s1Npn.js";import{_ as G}from"./Dropdown-B_S2k-69.js";import{N as L,_ as j,b as J}from"./Col-1P6V_qQb.js";import{_ as K,a as Q}from"./course.services-Bldac5lu.js";import{d as X}from"./debounce.utils-DqPPCsFD.js";import{_ as Y}from"./FormItem-khv4guBG.js";import{_ as Z}from"./DataTable-CEAYLJVh.js";import{_ as ee}from"./selectables.services-CHFlFHJd.js";import"./get-B5_b6rDM.js";import"./useBreakpoints-9dF7HQ25.js";import"./area.services-B7kICXUF.js";import"./module.services-BRv_agxv.js";import"./InputNumber-Msu28y1j.js";import"./Switch--OPcRDA5.js";import"./ChevronRight-Dw_frzul.js";const te=b({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(i,{emit:u}){const t=A(),r=u,m=[{label:"Editar",key:"edit",icon:x("edit-2"),props:{onClick:()=>r("edit")}},{label:"Eliminar",key:"delete",icon:x("trash","red"),props:{style:{color:"red"},onClick:()=>{t.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{r("delete")}})}}}];return(o,s)=>{const d=I,a=G;return k(),U(a,{options:m,placement:"bottom-start"},{default:n(()=>[e(d,null,{default:n(()=>[e(V,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),ae=(i,u)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(t){const r=t;return w(te,{onEdit:()=>{i(r)},onDelete:()=>{u(r)},item:r},{default:()=>"Editar"})}},{title:"Nombre",key:"name",minWidth:"300px"},{title:"Código",key:"code",minWidth:"80px"},{title:"Horas de práctica",key:"hoursPractice",minWidth:"80px"},{title:"Horas de teoría",key:"hoursTheory",minWidth:"80px"},{title:"Créditos",key:"credits",minWidth:"80px"},{title:"Área",key:"area",minWidth:"150px"},{title:"Módulo",key:"module",minWidth:"150px"},{title:"Currículo",key:"curriculum",minWidth:"150px"},{title:"Prerrequisito",key:"preRequisite",minWidth:"150px"},{title:"Descripción",key:"description",minWidth:"350px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:t=>w(L,{type:t.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>t.isEnabled?"	Habilitado":"Deshabilitado"})}],oe=(i=S())=>({page:i.page,total:i.total,pageSize:i.pageSize,pageCount:i.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${i.total} registros`}}),ne={style:{"border-bottom":"1px solid #e9e9e9"}},ie=b({__name:"DataTable",props:{curriculumOptions:{}},setup(i){const u=q(),t=p(!1),r=p([]),m=p(!1),o=p(null),s=H({...S()}),d=p(""),a=p({search:null,page:s.page,pageSize:s.pageSize}),c=p({}),P=ae(l=>{o.value=l,m.value=!0},async l=>{await Q(l),await _()}),_=async()=>{a.value.page=1,await g()},g=async()=>{t.value=!0,a.value.filters={curriculumId:d.value},c.value=await K(a.value),r.value=c.value.data,s.total=c.value.total,s.pageSize=c.value.per_page,s.page=c.value.current_page,s.pageCount=c.value.last_page,t.value=!1},W=X(()=>{_()},400),B=async l=>{a.value.page=l,await g()},$=async l=>{a.value.page=1,a.value.pageSize=l,await g()};return(async()=>{d.value=u.params.id??"",await g()})(),(l,f)=>{const y=j,N=Y,C=J,M=Z;return k(),O(E,null,[D("div",ne,[e(C,{gutter:12,style:{padding:"12px 16px"}},{default:n(()=>[e(y,{span:12}),e(y,{span:12},{default:n(()=>[e(N,{size:"large",placeholder:"Buscar",value:a.value.search,"onUpdate:value":f[0]||(f[0]=h=>a.value.search=h),onInput:v(W),clearable:""},{suffix:n(()=>[e(V,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),e(C,null,{default:n(()=>[e(y,{span:24},{default:n(()=>[e(M,{key:"id",remote:"","single-line":!1,columns:v(P),data:r.value,pagination:v(oe)(s),"pagination-show-size-picker":!0,loading:t.value,"onUpdate:page":B,"onUpdate:pageSize":$},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),R(l.$slots,"extra",{reLoadDataTable:_})]),e(T,{modelValue:m.value,"onUpdate:modelValue":f[1]||(f[1]=h=>m.value=h),item:o.value,onSuccess:_,curriculumOptions:l.curriculumOptions},null,8,["modelValue","item","curriculumOptions"])],64)}}}),Te=b({__name:"index",setup(i){const u=p([]),t=p(!1);return(async()=>{u.value=await ee()})(),(m,o)=>{const s=I,d=F;return k(),O(E,null,[e(d,{segmented:{header:!0,content:!0}},{header:n(()=>o[2]||(o[2]=[D("h6",{style:{color:"#999",margin:"0"}},"Gestión de Courses academicas",-1),z(" Courses ")])),"header-extra":n(()=>[e(s,{"render-icon":v(x)("additem"),onClick:o[0]||(o[0]=a=>t.value=!0)},{default:n(()=>o[3]||(o[3]=[z(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),e(ie,{curriculumOptions:u.value},{extra:n(({reLoadDataTable:a})=>[e(T,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=c=>t.value=c),item:null,onSuccess:a,curriculumOptions:u.value},null,8,["modelValue","onSuccess","curriculumOptions"])]),_:1},8,["curriculumOptions"])],64)}}});export{Te as default};
