import{r as v}from"./icon.utils-Cdau1lmo.js";import{_ as S}from"./StudentForm.vue_vue_type_script_setup_true_lang-Cv32udD-.js";import{d as G}from"./debounce.utils-DqPPCsFD.js";import{d as k,aK as q,e as H,a8 as O,a9 as C,aa as r,ab as t,af as E,aG as I,h as x,r as c,aI as R,aF as D,_ as P,ae as h,aJ as J,ad as w,az as K,aA as L}from"./index--Fiy2I4t.js";import{i as V}from"./DataTable.types-BEg5m_To.js";import{u as j}from"./composables-CN96FFP-.js";import{_ as Q}from"./Dropdown-B9vn1Rts.js";import{_ as z}from"./Tag-CmlrV2vM.js";import{_ as X,a as Y,b as Z}from"./student.services-BRCXh15_.js";import{c as ee}from"./studentType.services-B4fxJyd-.js";import{c as te}from"./documentType.services-DsNWuLGx.js";import{_ as ae,a as oe}from"./Col-Bhohzmu6.js";import{_ as ne}from"./Input-CfWAw0Qs.js";import{_ as se}from"./DataTable-D69-Uvxy.js";import"./genders.constans-BK559Fh_.js";import"./useBreakpoints-BU-ftBRs.js";import"./Select-JHMV7BBf.js";import"./Popover-_nZkNipR.js";import"./get-BxuUz3sF.js";import"./use-merged-state-Hew3oQWq.js";import"./Suffix-Cejid3DV.js";import"./FormItem-64Oo6hS7.js";import"./Space-CHReEK5D.js";import"./get-slot-Bk_rJcZu.js";import"./Switch-DDt0T-WF.js";import"./Tooltip-B09_9Vum.js";const le=k({__name:"DataTableOp",props:{item:{}},emits:["edit","delete","create-user"],setup(n,{emit:s}){const u=s,e=j(),{hasPermission:a}=q(),l=n,o=H(()=>[{show:l.item.userId==null&&a([""]),label:"Crear cuenta de usuario",id:"create-user",key:"create-user",icon:v("security-user"),props:{onClick:()=>u("create-user")}},{show:a([""]),label:"Editar",key:"edit",icon:v("edit-2"),props:{onClick:()=>u("edit")}},{show:a([""]),label:"Eliminar",key:"delete",icon:v("trash","red"),props:{style:{color:"red"},onClick:()=>{e.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!0,negativeButtonProps:{size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{u("delete")}})}}}]);return(p,d)=>{const g=E,m=Q;return C(),O(m,{options:o.value,placement:"bottom-start"},{default:r(()=>[t(g,null,{default:r(()=>[t(I,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1},8,["options"])}}}),ie=(n,s,u)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(e){const a=e;return x(le,{onEdit:()=>{n(a)},onDelete:()=>{s(a)},onCreateUser:()=>{u(a)},item:a},{default:()=>"Editar"})}},{title:"Codigo",key:"code",minWidth:"100px"},{title:"Nro. Documento",key:"documentNumber",minWidth:"90px"},{title:"Nombre",key:"name",minWidth:"120px"},{title:"Apellido Paterno",key:"lastNameFather",minWidth:"100px"},{title:"Apellido Materno",key:"lastNameMother",minWidth:"100px"},{title:"Género",key:"gender",width:"75px"},{title:"Email",key:"email",minWidth:"130px"},{title:"Celular",key:"phone",minWidth:"100px"},{title:"Tipo de estudiante",key:"studentType",minWidth:"150px",render:e=>x(z,{tertiary:!0,bordered:!1,strong:!0},{default:()=>e.studentType})},{title:"Habilitado",key:"isEnabled",width:"150px",render:e=>x(z,{type:e.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>e.isEnabled?"	Habilitado":"Deshabilitado"})}],re=(n=V())=>({page:n.page,total:n.total,pageSize:n.pageSize,pageCount:n.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${n.total} registros`}}),ue={style:{"border-bottom":"1px solid #e9e9e9"}},pe=k({__name:"DataTable",setup(n){const s=c(!1),u=c([]),e=c(!1),a=c(null),l=R({...V()}),o=c({search:null,page:l.page,pageSize:l.pageSize}),p=c({}),d=c({}),g=c([]),m=async()=>{o.value.page=1,console.log("reloading data table"),await f()},f=async()=>{s.value=!0,p.value=await X(o.value),u.value=p.value.data,l.total=p.value.total,l.pageSize=p.value.per_page,l.page=p.value.current_page,l.pageCount=p.value.last_page,s.value=!1},$=G(()=>{m()},400),B=async i=>{o.value.page=i,await f()},N=async i=>{o.value.page=1,o.value.pageSize=i,await f()},U=i=>{a.value=i,e.value=!0},W=async i=>{await Y(i),await m()},F=async i=>{await Z(i)&&await m()};return(async()=>{g.value=ie(U,W,F),await f(),d.value.studentTypesItems=await ee(),d.value.documentTypesItems=await te()})(),(i,_)=>{const b=oe,M=ne,T=ae,A=se;return C(),D(P,null,[h("div",ue,[t(T,{gutter:12,style:{padding:"12px 16px"}},{default:r(()=>[t(b,{span:12}),t(b,{span:12},{default:r(()=>[t(M,{size:"large",placeholder:"Buscar",value:o.value.search,"onUpdate:value":_[0]||(_[0]=y=>o.value.search=y),onInput:w($),clearable:""},{suffix:r(()=>[t(I,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),t(T,null,{default:r(()=>[t(b,{span:24},{default:r(()=>[t(A,{key:"id",remote:"","single-line":!1,columns:g.value,data:u.value,pagination:w(re)(l),"pagination-show-size-picker":!0,loading:s.value,"onUpdate:page":B,"onUpdate:pageSize":N},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),J(i.$slots,"extra",{reLoadDataTable:m,selectables:d.value})]),t(S,{modelValue:e.value,"onUpdate:modelValue":_[1]||(_[1]=y=>e.value=y),item:a.value,onSuccess:m,selectables:d.value},null,8,["modelValue","item","selectables"])],64)}}}),Fe=k({__name:"index",setup(n){const s=c(!1);return(u,e)=>{const a=E,l=L;return C(),D(P,null,[t(l,{segmented:{header:!0,content:!0}},{header:r(()=>e[2]||(e[2]=[h("span",{class:"text-sm text-slate-500"}," Gestión de Estudiantes ",-1),h("h5",{class:"text-lg font-bold text-slate-800"},"Estudiantes",-1)])),"header-extra":r(()=>[t(a,{"render-icon":w(v)("additem"),onClick:e[0]||(e[0]=o=>s.value=!0)},{default:r(()=>e[3]||(e[3]=[K(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),t(pe,null,{extra:r(({reLoadDataTable:o,selectables:p})=>[t(S,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=d=>s.value=d),item:null,onSuccess:o,selectables:p},null,8,["modelValue","onSuccess","selectables"])]),_:1})],64)}}});export{Fe as default};
