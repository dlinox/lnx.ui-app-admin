import{a as O,d as ue,_ as de}from"./selectables.services-BWztZSf7.js";import{b as ie,c as pe,d as ce,e as me,f as _e}from"./report.services-DqhmU9IP.js";import{r as k}from"./icon.utils-D7BmKQQ8.js";import{d as R}from"./debounce.utils-DqPPCsFD.js";import{d as B,e as F,r as u,j as z,a9 as U,aa as C,ab as e,ac as o,aB as M,ae as b,ag as E,aA as V,aI as N,aG as W,_ as X,aL as fe,af as q,ah as A,a3 as ve,a8 as ge}from"./index-VnlbSWoD.js";import{_ as j,a as D}from"./Col-D62vBcWk.js";import{_ as H}from"./Select-Df7rPK9_.js";import{_ as L}from"./Space-BYw6XnFF.js";import{_ as be}from"./Divider-D6zw0Cek.js";import{a as Y,_ as Z}from"./ListItem-CMLNF079.js";import{_ as ee}from"./Thing-DAg0qjqL.js";import{N as we}from"./Tag-D-Mvyznn.js";import"./Popover-CxKYmMF9.js";import"./get-C6YDaK3p.js";import"./use-merged-state-DLxtUdHo.js";import"./Suffix-DHkxWb8H.js";const ye=B({__name:"AvailableGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(h,{emit:x}){const G=x,I=h,a=F({get:()=>I.modelValue,set:n=>G("update:modelValue",n)}),d=u(!1),f=u(!1),w=u([]),m=u({periodId:null}),l=async()=>{d.value=!0,await ie({periodId:m.value.periodId}),d.value=!1},s=async n=>{f.value=!0,w.value=await O(n),f.value=!1},y=R(n=>{s(n)},400),v=()=>{s("")};return z(a,n=>{n&&v()}),(n,t)=>{const g=E,i=H,p=D,r=j,S=L,$=M,P=N;return C(),U(P,{show:a.value,"onUpdate:show":t[2]||(t[2]=c=>a.value=c)},{default:e(()=>[o($,{style:{width:"800px"},title:"Generar Reporte - Grupos Habilitados",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(g,{"render-icon":b(k)("close-circle"),onClick:t[0]||(t[0]=c=>a.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(S,{justify:"center"},{default:e(()=>[o(g,{disabled:m.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:d.value,"render-icon":b(k)("document-download"),onClick:l},{default:e(()=>t[3]||(t[3]=[V(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(r,{gutter:"16"},{default:e(()=>[o(p,{span:"24"},{default:e(()=>[o(i,{class:"mx-auto",style:{width:"300px"},value:m.value.periodId,"onUpdate:value":t[1]||(t[1]=c=>m.value.periodId=c),placeholder:"Seleccionar Periodo Académico",filterable:"",options:w.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:b(y)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ve=B({__name:"EnabledGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(h,{emit:x}){const G=x,I=h,a=F({get:()=>I.modelValue,set:n=>G("update:modelValue",n)}),d=u(!1),f=u(!1),w=u([]),m=u({periodId:null}),l=async()=>{d.value=!0,await pe({periodId:m.value.periodId}),d.value=!1},s=async n=>{f.value=!0,w.value=await O(n),f.value=!1},y=R(n=>{s(n)},400),v=()=>{s("")};return z(a,n=>{n&&v()}),(n,t)=>{const g=E,i=H,p=D,r=j,S=L,$=M,P=N;return C(),U(P,{show:a.value,"onUpdate:show":t[2]||(t[2]=c=>a.value=c)},{default:e(()=>[o($,{style:{width:"800px"},title:"Generar Reporte - Grupos Aperturados",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(g,{"render-icon":b(k)("close-circle"),onClick:t[0]||(t[0]=c=>a.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(S,{justify:"center"},{default:e(()=>[o(g,{disabled:m.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:d.value,"render-icon":b(k)("document-download"),onClick:l},{default:e(()=>t[3]||(t[3]=[V(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(r,{gutter:"16"},{default:e(()=>[o(p,{span:"24"},{default:e(()=>[o(i,{class:"mx-auto",style:{width:"300px"},value:m.value.periodId,"onUpdate:value":t[1]||(t[1]=c=>m.value.periodId=c),placeholder:"Seleccionar Periodo Académico",filterable:"",options:w.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:b(y)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ie=B({__name:"Enrollments",props:{modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(h,{emit:x}){const G=x,I=h,a=F({get:()=>I.modelValue,set:p=>G("update:modelValue",p)}),d=u(!1),f=u(!1),w=u([]),m=u([]),l=u([]),s=u({periodId:null,curriculumId:null,moduleId:null}),y=async p=>{d.value=!0,await ce({groupId:p}),d.value=!1},v=async p=>{f.value=!0,m.value=await O(p),f.value=!1},n=R(p=>{v(p)},400),t=async p=>{l.value=await ue(p)},g=async()=>{w.value=await me(s.value)},i=()=>{v("")};return z(a,p=>{p&&i()}),(p,r)=>{const S=E,$=be,P=H,c=D,oe=we,le=ee,J=L,ne=Z,te=Y,ae=j,se=M,re=N;return C(),U(re,{show:a.value,"onUpdate:show":r[5]||(r[5]=_=>a.value=_)},{default:e(()=>[o(se,{style:{width:"800px"},title:"Generar Reporte - Matrículas",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(S,{"render-icon":b(k)("close-circle"),onClick:r[0]||(r[0]=_=>a.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(J,{justify:"end"},{default:e(()=>[o(S,{tertiary:"",size:"large",onClick:r[4]||(r[4]=_=>a.value=!1),disabled:d.value},{default:e(()=>r[8]||(r[8]=[V(" Cancelar ")])),_:1},8,["disabled"])]),_:1})]),default:e(()=>[o($,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:e(()=>r[6]||(r[6]=[V(" Buscar estudiantes ")])),_:1}),o(ae,{gutter:"16"},{default:e(()=>[o(c,{span:"8"},{default:e(()=>[o(P,{value:s.value.periodId,"onUpdate:value":[r[1]||(r[1]=_=>s.value.periodId=_),g],placeholder:"Seleccionar Periodo Académico",filterable:"",options:m.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:b(n)},null,8,["value","options","onSearch"])]),_:1}),o(c,{span:"8"},{default:e(()=>[o(P,{disabled:s.value.periodId===null,value:s.value.curriculumId,"onUpdate:value":[r[2]||(r[2]=_=>s.value.curriculumId=_),t],placeholder:"Seleccionar Plan de estudio",filterable:"",options:p.curriculumOptions,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(c,{span:"8"},{default:e(()=>[o(P,{disabled:s.value.curriculumId===null||s.value.periodId===null,value:s.value.moduleId,"onUpdate:value":[r[3]||(r[3]=_=>s.value.moduleId=_),g],placeholder:"Seleccionar Módulo",filterable:"",options:l.value,clearable:"","virtual-scroll":!1},null,8,["disabled","value","options"])]),_:1}),o(c,{span:"24",class:"border-t border-t-gray-200 mt-2"},{default:e(()=>[o(te,{hoverable:"",clickable:"",style:{"max-height":"300px","overflow-y":"auto"}},{default:e(()=>[(C(!0),W(X,null,fe(w.value,_=>(C(),U(ne,{style:{margin:"0 1rem"},key:_.id},{default:e(()=>[o(le,null,{header:e(()=>[o(oe,{bordered:!1,class:"me-2"},{default:e(()=>[V(A(_.status),1)]),_:2},1024),V(" "+A(_.name)+" - "+A(_.course),1)]),default:e(()=>{var T,K,Q;return[q("i",null,A((T=_.schedule)==null?void 0:T.days)+" - "+A((K=_.schedule)==null?void 0:K.startHour)+" a "+A((Q=_.schedule)==null?void 0:Q.endHour),1)]}),_:2},1024),o(J,{align:"center",justify:"end"},{default:e(()=>[o(S,{secondary:"",class:"ms-2",type:"error","render-icon":b(k)("document-download"),onClick:T=>y(_.id)},{default:e(()=>r[7]||(r[7]=[V(" PDF ")])),_:2},1032,["render-icon","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ge=B({__name:"CollectionGroups",props:{modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(h,{emit:x}){const G=x,I=h,a=F({get:()=>I.modelValue,set:n=>G("update:modelValue",n)}),d=u(!1),f=u(!1),w=u([]),m=u({periodId:null}),l=async()=>{d.value=!0,await _e({periodId:m.value.periodId}),d.value=!1},s=async n=>{f.value=!0,w.value=await O(n),f.value=!1},y=R(n=>{s(n)},400),v=()=>{s("")};return z(a,n=>{n&&v()}),(n,t)=>{const g=E,i=H,p=D,r=j,S=L,$=M,P=N;return C(),U(P,{show:a.value,"onUpdate:show":t[2]||(t[2]=c=>a.value=c)},{default:e(()=>[o($,{style:{width:"800px"},title:"Generar Reporte - Recaudación por grupo",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{"header-extra":e(()=>[o(g,{"render-icon":b(k)("close-circle"),onClick:t[0]||(t[0]=c=>a.value=!1)},null,8,["render-icon"])]),footer:e(()=>[o(S,{justify:"center"},{default:e(()=>[o(g,{disabled:m.value.periodId===null,secondary:"",class:"ms-2",type:"error",loading:d.value,"render-icon":b(k)("document-download"),onClick:l},{default:e(()=>t[3]||(t[3]=[V(" PDF ")])),_:1},8,["disabled","loading","render-icon"])]),_:1})]),default:e(()=>[o(r,{gutter:"16"},{default:e(()=>[o(p,{span:"24"},{default:e(()=>[o(i,{class:"mx-auto",style:{width:"300px"},value:m.value.periodId,"onUpdate:value":t[1]||(t[1]=c=>m.value.periodId=c),placeholder:"Seleccionar Periodo Académico",filterable:"",options:w.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:b(y)},null,8,["value","options","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ne=B({__name:"GroupReportView",setup(h){const{hasPermission:x}=ve(),G=u([]),I=u(!1),a=u(!1),d=u(!1),f=u(!1);return(async()=>{G.value=await de()})(),(m,l)=>{const s=E,y=ee,v=Z,n=Y,t=M,g=ge("AppNotAuthorization");return b(x)(["report.group"])?(C(),W(X,{key:0},[o(t,{segmented:{header:!0,content:!0}},{header:e(()=>l[8]||(l[8]=[q("span",{class:"text-sm text-slate-500"}," Reportes ",-1),q("h5",{class:"text-lg font-bold text-slate-800"},"Reporte de grupos",-1)])),default:e(()=>[o(n,null,{default:e(()=>[o(v,null,{suffix:e(()=>[o(s,{onClick:l[0]||(l[0]=i=>d.value=!0)},{default:e(()=>l[9]||(l[9]=[V(" Generar reporte ")])),_:1})]),default:e(()=>[o(y,{title:"Matrículas",description:"Estudiantes matriculados en un grupo"})]),_:1}),o(v,null,{suffix:e(()=>[o(s,{onClick:l[1]||(l[1]=i=>I.value=!0)},{default:e(()=>l[10]||(l[10]=[V(" Generar reporte ")])),_:1})]),default:e(()=>[o(y,{title:"Grupos Aperturados",description:"Grupos aperturados por periodo"})]),_:1}),o(v,null,{suffix:e(()=>[o(s,{onClick:l[2]||(l[2]=i=>a.value=!0)},{default:e(()=>l[11]||(l[11]=[V(" Generar reporte ")])),_:1})]),default:e(()=>[o(y,{title:"Grupos Habilitados",description:"Grupos habilitados por periodo"})]),_:1}),o(v,null,{suffix:e(()=>[o(s,{onClick:l[3]||(l[3]=i=>f.value=!0)},{default:e(()=>l[12]||(l[12]=[V(" Generar reporte ")])),_:1})]),default:e(()=>[o(y,{title:"Recaudación por grupo",description:"Recaudación por grupo en un periodo"})]),_:1})]),_:1})]),_:1}),o(Ie,{modelValue:d.value,"onUpdate:modelValue":l[4]||(l[4]=i=>d.value=i),curriculumOptions:G.value},null,8,["modelValue","curriculumOptions"]),o(Ve,{modelValue:I.value,"onUpdate:modelValue":l[5]||(l[5]=i=>I.value=i)},null,8,["modelValue"]),o(Ge,{modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=i=>f.value=i)},null,8,["modelValue"]),o(ye,{modelValue:a.value,"onUpdate:modelValue":l[7]||(l[7]=i=>a.value=i)},null,8,["modelValue"])],64)):(C(),U(g,{key:1}))}}});export{Ne as default};
