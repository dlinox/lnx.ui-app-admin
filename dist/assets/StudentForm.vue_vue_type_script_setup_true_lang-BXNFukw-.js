import{G as z}from"./genders.constans-ZqlXwVVz.js";import{u as G}from"./useBreakpoints-DuMo634X.js";import{c as O,d as D,e as w,f as j,g as A}from"./student.services-DJ54GrHV.js";import{_ as x}from"./Select-Cy4RUJ2X.js";import{d as H,e as P,r as _,g as q,aa as J,a5 as K,a8 as l,ab as a,ah as F,ac as p,af as L,ai as Q,aj as W}from"./index-DErOr0AP.js";import{_ as X,a as Y}from"./FormItem-n4kq_3-q.js";import{_ as Z,a as ee}from"./Col-_50WYJb9.js";import{_ as ae}from"./Input-j5r0X2o1.js";import{_ as le}from"./Switch-KlYhZevK.js";import{_ as te}from"./Space-DSo-Uj4Z.js";const fe=H({__name:"StudentForm",props:{item:{},modelValue:{type:Boolean},selectables:{}},emits:["update:modelValue","success"],setup(S,{emit:U}){const I=U,c=S,{screenSize:i}=G(),f=P({get:()=>c.modelValue,set:d=>I("update:modelValue",d)}),b=_(!1),g=_(null),t=_(w()),u=_(null),E=_({...j()}),y=async()=>{if(g.value){const d=await g.value.validate();let e=null;d?(b.value=!0,t.value.id?e=await O(t.value):e=await D(t.value),e.status?(I("success",t.value),f.value=!1):u.value=e.data):console.log("Formulario inválido")}b.value=!1},R=async()=>{var d;return(d=c.item)!=null&&d.id?t.value=await A(c.item.id):t.value=w(),t.value},$=async()=>{console.log("Inicializando formulario"),await R()};return q(f,d=>{d&&$()}),(d,e)=>{const N=x,r=X,m=Z,v=ae,M=le,k=te,V=ee,B=Y,T=L,C=Q,h=W;return J(),K(h,{show:f.value,"onUpdate:show":e[17]||(e[17]=n=>f.value=n)},{default:l(()=>[a(C,{style:{width:"1024px"},title:d.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:l(()=>[a(k,{justify:"end"},{default:l(()=>[a(T,{tertiary:"",size:"large",onClick:e[16]||(e[16]=n=>f.value=!1),disabled:b.value},{default:l(()=>e[18]||(e[18]=[F(" Cancelar ")])),_:1},8,["disabled"]),a(T,{size:"large",type:"primary",onClick:y,loading:b.value},{default:l(()=>e[19]||(e[19]=[F("Guardar")])),_:1},8,["loading"])]),_:1})]),default:l(()=>[a(B,{ref_key:"formRef",ref:g,model:t.value,rules:E.value,size:"large",onSubmit:y},{default:l(()=>[a(V,{gutter:16},{default:l(()=>[a(m,{span:p(i)==="sm"?12:8},{default:l(()=>[a(r,{path:"studentTypeId",label:"Tipo de Estudiante"},{default:l(()=>[a(N,{value:t.value.studentTypeId,"onUpdate:value":e[0]||(e[0]=n=>t.value.studentTypeId=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:d.selectables.studentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>[a(r,{path:"documentTypeId",label:"Tipo de Documento"},{default:l(()=>[a(N,{value:t.value.documentTypeId,"onUpdate:value":e[1]||(e[1]=n=>t.value.documentTypeId=n),clearable:"","virtual-scroll":!1,placeholder:"Seleccione",options:d.selectables.documentTypesItems},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>{var n;return[a(r,{path:"documentNumber",label:"Número de Documento",feedback:(n=u.value)==null?void 0:n.documentNumber},{default:l(()=>{var o;return[a(v,{value:t.value.documentNumber,"onUpdate:value":e[2]||(e[2]=s=>t.value.documentNumber=s),status:((o=u.value)==null?void 0:o.documentNumber)!=null?"error":"",onInput:e[3]||(e[3]=s=>u.value!=null?u.value.documentNumber=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?24:8},{default:l(()=>{var n;return[a(r,{path:"name",label:"Nombre",feedback:(n=u.value)==null?void 0:n.name},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.name)!=null?"error":"",value:t.value.name,"onUpdate:value":e[4]||(e[4]=s=>t.value.name=s),onInput:e[5]||(e[5]=s=>u.value!=null?u.value.name=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>{var n;return[a(r,{path:"lastNameFather",label:"Apellido Paterno",feedback:(n=u.value)==null?void 0:n.lastNameFather},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.lastNameFather)!=null?"error":"",value:t.value.lastNameFather,"onUpdate:value":e[6]||(e[6]=s=>t.value.lastNameFather=s),onInput:e[7]||(e[7]=s=>u.value!=null?u.value.lastNameFather=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:8},{default:l(()=>{var n;return[a(r,{path:"lastNameMother",label:"Apellido Materno",feedback:(n=u.value)==null?void 0:n.lastNameMother},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.lastNameMother)!=null?"error":"",value:t.value.lastNameMother,"onUpdate:value":e[8]||(e[8]=s=>t.value.lastNameMother=s),onInput:e[9]||(e[9]=s=>u.value!=null?u.value.lastNameMother=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>[a(r,{path:"gender",label:"Genero"},{default:l(()=>[a(N,{value:t.value.gender,"onUpdate:value":e[10]||(e[10]=n=>t.value.gender=n),clearable:"",placeholder:"Seleccione","virtual-scroll":!1,options:p(z)},null,8,["value","options"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>[a(r,{path:"birthDate",label:"Fecha de Nacimiento"},{default:l(()=>[a(v,{value:t.value.dateOfBirth,"onUpdate:value":e[11]||(e[11]=n=>t.value.dateOfBirth=n),type:"date",clearable:"",placeholder:""},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>{var n;return[a(r,{path:"email",feedback:(n=u.value)==null?void 0:n.email,label:"Correo Electrónico"},{default:l(()=>{var o;return[a(v,{status:((o=u.value)==null?void 0:o.email)!=null?"error":"",onInput:e[12]||(e[12]=s=>u.value!=null?u.value.email=null:()=>{}),value:t.value.email,"onUpdate:value":e[13]||(e[13]=s=>t.value.email=s)},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:p(i)==="sm"?12:6},{default:l(()=>[a(r,{path:"phone",label:"Teléfono"},{default:l(()=>[a(v,{value:t.value.phone,"onUpdate:value":e[14]||(e[14]=n=>t.value.phone=n)},null,8,["value"])]),_:1})]),_:1},8,["span"]),a(m,{span:"24"},{default:l(()=>[a(k,{justify:"end"},{default:l(()=>[a(r,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:l(()=>[a(M,{value:t.value.isEnabled,"onUpdate:value":e[15]||(e[15]=n=>t.value.isEnabled=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}});export{fe as _};
