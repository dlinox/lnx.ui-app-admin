import{r as V}from"./icon.utils-Cdau1lmo.js";import{_ as N,a as ne,b as se,c as re,d as ie,e as de,f as pe,g as me}from"./course.services-C1jUtdFq.js";import{u as ce}from"./useBreakpoints-BU-ftBRs.js";import{d as ve}from"./area.services-AMs9FTph.js";import{d as _e}from"./module.services-B35jzd9L.js";import{d as T,a8 as G,a9 as R,aa as u,ab as a,af as D,aG as j,h as A,e as fe,r as p,j as ge,aA as J,ad as _,az as q,aH as be,a4 as Ie,aI as ye,aF as L,_ as K,ae as B,aJ as ke}from"./index--Fiy2I4t.js";import{_ as we,a as xe}from"./FormItem-64Oo6hS7.js";import{_ as Q,a as X}from"./Col-Bhohzmu6.js";import{_ as Y}from"./Input-CfWAw0Qs.js";import{_ as Ce}from"./Select-JHMV7BBf.js";import{_ as $e}from"./InputNumber-CTlhYKk8.js";import{_ as Oe}from"./Space-CHReEK5D.js";import{_ as he}from"./Switch-DDt0T-WF.js";import{i as Z}from"./DataTable.types-BEg5m_To.js";import{u as ze}from"./composables-CN96FFP-.js";import{_ as Se}from"./Dropdown-B9vn1Rts.js";import{_ as Te}from"./Tag-CmlrV2vM.js";import{d as Re}from"./debounce.utils-DqPPCsFD.js";import{_ as Ue}from"./DataTable-D69-Uvxy.js";import{_ as Pe}from"./selectables.services-BaLMt3qD.js";import"./get-BxuUz3sF.js";import"./Suffix-Cejid3DV.js";import"./use-merged-state-Hew3oQWq.js";import"./Popover-_nZkNipR.js";import"./get-slot-Bk_rJcZu.js";import"./Tooltip-B09_9Vum.js";const Ee=T({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(g,{emit:I}){const r=ze(),f=I,y=[{label:"Editar",key:"edit",icon:V("edit-2"),props:{onClick:()=>f("edit")}},{label:"Eliminar",key:"delete",icon:V("trash","red"),props:{style:{color:"red"},onClick:()=>{r.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{f("delete")}})}}}];return(i,c)=>{const k=D,l=Se;return R(),G(l,{options:y,placement:"bottom-start"},{default:u(()=>[a(k,null,{default:u(()=>[a(j,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),Ve=(g,I)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(r){const f=r;return A(Ee,{onEdit:()=>{g(f)},onDelete:()=>{I(f)},item:f},{default:()=>"Editar"})}},{title:"Nombre",key:"name",minWidth:"300px"},{title:"Código",key:"code",minWidth:"80px"},{title:"Horas de práctica",key:"hoursPractice",minWidth:"80px"},{title:"Horas de teoría",key:"hoursTheory",minWidth:"80px"},{title:"Créditos",key:"credits",minWidth:"80px"},{title:"Área",key:"area",minWidth:"150px"},{title:"Módulo",key:"module",minWidth:"150px"},{title:"Currículo",key:"curriculum",minWidth:"150px"},{title:"Prerrequisito",key:"preRequisite",minWidth:"150px"},{title:"Descripción",key:"description",minWidth:"350px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:r=>A(Te,{type:r.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>r.isEnabled?"	Habilitado":"Deshabilitado"})}],qe=(g=Z())=>({page:g.page,total:g.total,pageSize:g.pageSize,pageCount:g.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${g.total} registros`}}),ee=T({__name:"CourseForm",props:{item:{},modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(g,{emit:I}){const{screenSize:r}=ce(),f=I,y=g,i=fe({get:()=>y.modelValue,set:d=>f("update:modelValue",d)}),c=p(!1),k=p(null),l=p(N()),t=p(null),F=p({...ne()}),U=p([]),h=p([]),w=p([]),x=async()=>{w.value=await ie({curriculumId:l.value.curriculumId})},P=async()=>{U.value=await ve({curriculumId:l.value.curriculumId})},E=async()=>{h.value=await _e({curriculumId:l.value.curriculumId})},z=async(d=!1)=>{t.value&&(t.value.curriculumId=null),d||(l.value.areaId=null,l.value.moduleId=null,l.value.preRequisiteId=null),await P(),await E(),await x()},W=async()=>{if(k.value){const d=await k.value.validate();let e=null;d?(c.value=!0,l.value.id?e=await se(l.value):e=await re(l.value),e.status?(f("success"),i.value=!1):t.value=e.data):console.log("Formulario inválido")}c.value=!1},b=async()=>{var d;(d=y.item)!=null&&d.id?(l.value=await de(y.item.id),await z(!0)):l.value=N()},C=async()=>{await b()};return ge(i,d=>{d&&C()}),(d,e)=>{const $=Y,v=xe,m=X,S=Ce,O=$e,ae=he,M=Oe,te=Q,le=we,H=D,ue=J,oe=be;return R(),G(oe,{show:i.value,"onUpdate:show":e[24]||(e[24]=o=>i.value=o)},{default:u(()=>[a(ue,{style:{width:"800px"},title:d.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:u(()=>[a(M,{justify:"end"},{default:u(()=>[a(H,{tertiary:"",size:"large",onClick:e[23]||(e[23]=o=>i.value=!1),disabled:c.value},{default:u(()=>e[25]||(e[25]=[q(" Cancelar ")])),_:1},8,["disabled"]),a(H,{size:"large",type:"primary",onClick:W,loading:c.value},{default:u(()=>e[26]||(e[26]=[q("Guardar")])),_:1},8,["loading"])]),_:1})]),default:u(()=>[a(le,{ref_key:"formRef",ref:k,model:l.value,rules:F.value,size:"large"},{default:u(()=>[a(te,{gutter:16},{default:u(()=>[a(m,{span:_(r)==="sm"?12:4},{default:u(()=>{var o;return[a(v,{path:"code",label:"Código",feedback:(o=t.value)==null?void 0:o.code},{default:u(()=>{var n;return[a($,{value:l.value.code,"onUpdate:value":[e[0]||(e[0]=s=>l.value.code=s),e[1]||(e[1]=s=>t.value!=null?t.value.code=null:()=>{})],status:((n=t.value)==null?void 0:n.code)!=null?"error":""},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:_(r)==="sm"?12:20},{default:u(()=>{var o;return[a(v,{path:"name",label:"Nombre",feedback:(o=t.value)==null?void 0:o.name},{default:u(()=>{var n;return[a($,{value:l.value.name,"onUpdate:value":[e[2]||(e[2]=s=>l.value.name=s),e[3]||(e[3]=s=>t.value!=null?t.value.name=null:()=>{})],status:((n=t.value)==null?void 0:n.name)!=null?"error":""},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:"24"},{default:u(()=>{var o;return[a(v,{path:"curriculumId",label:"Plan de estudios",feedback:(o=t.value)==null?void 0:o.curriculumId},{default:u(()=>{var n;return[a(S,{value:l.value.curriculumId,"onUpdate:value":[e[4]||(e[4]=s=>l.value.curriculumId=s),e[5]||(e[5]=s=>z(!1))],options:d.curriculumOptions,filterable:"",clearable:"","virtual-scroll":!1,status:((n=t.value)==null?void 0:n.curriculumId)!=null?"error":""},null,8,["value","options","status"])]}),_:1},8,["feedback"])]}),_:1}),a(m,{span:_(r)==="sm"?24:12},{default:u(()=>{var o;return[a(v,{path:"areaId",label:"Área",feedback:(o=t.value)==null?void 0:o.areaId},{default:u(()=>{var n;return[a(S,{value:l.value.areaId,"onUpdate:value":[e[6]||(e[6]=s=>l.value.areaId=s),e[7]||(e[7]=s=>t.value!=null?t.value.areaId=null:()=>{})],options:U.value,disabled:l.value.curriculumId==null,filterable:"",clearable:"","virtual-scroll":!1,status:((n=t.value)==null?void 0:n.areaId)!=null?"error":""},null,8,["value","options","disabled","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:_(r)==="sm"?24:12},{default:u(()=>{var o;return[a(v,{path:"moduleId",label:"Módulo",feedback:(o=t.value)==null?void 0:o.moduleId},{default:u(()=>{var n;return[a(S,{value:l.value.moduleId,"onUpdate:value":[e[8]||(e[8]=s=>l.value.moduleId=s),e[9]||(e[9]=s=>t.value!=null?t.value.moduleId=null:()=>{})],options:h.value,disabled:l.value.curriculumId==null,filterable:"",clearable:"","virtual-scroll":!1,status:((n=t.value)==null?void 0:n.moduleId)!=null?"error":""},null,8,["value","options","disabled","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:_(r)==="sm"?12:4},{default:u(()=>{var o;return[a(v,{path:"order",label:"Orden",feedback:(o=t.value)==null?void 0:o.order},{default:u(()=>{var n;return[a(O,{style:{width:"100%"},clearable:"",value:l.value.order,"onUpdate:value":e[10]||(e[10]=s=>l.value.order=s),status:((n=t.value)==null?void 0:n.order)!=null?"error":"",onInput:e[11]||(e[11]=s=>t.value!=null?t.value.order=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:_(r)==="sm"?12:4},{default:u(()=>{var o;return[a(v,{path:"credits",label:"Créditos",feedback:(o=t.value)==null?void 0:o.credits},{default:u(()=>{var n;return[a(O,{style:{width:"100%"},clearable:"",value:l.value.credits,"onUpdate:value":e[12]||(e[12]=s=>l.value.credits=s),status:((n=t.value)==null?void 0:n.credits)!=null?"error":"",onInput:e[13]||(e[13]=s=>t.value!=null?t.value.credits=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:_(r)==="sm"?12:4},{default:u(()=>{var o;return[a(v,{path:"units",label:"Unidad",feedback:(o=t.value)==null?void 0:o.units},{default:u(()=>{var n;return[a(O,{style:{width:"100%"},clearable:"",value:l.value.units,"onUpdate:value":e[14]||(e[14]=s=>l.value.units=s),status:((n=t.value)==null?void 0:n.units)!=null?"error":"",onInput:e[15]||(e[15]=s=>t.value!=null?t.value.units=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:_(r)==="sm"?12:6},{default:u(()=>{var o;return[a(v,{path:"hoursPractice",label:"Horas Practicas",feedback:(o=t.value)==null?void 0:o.hoursPractice},{default:u(()=>{var n;return[a(O,{style:{width:"100%"},clearable:"",value:l.value.hoursPractice,"onUpdate:value":e[16]||(e[16]=s=>l.value.hoursPractice=s),status:((n=t.value)==null?void 0:n.hoursPractice)!=null?"error":"",onInput:e[17]||(e[17]=s=>t.value!=null?t.value.hoursPractice=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:_(r)==="sm"?12:6},{default:u(()=>{var o;return[a(v,{path:"hoursTheory",label:"Horas Teoricas",feedback:(o=t.value)==null?void 0:o.hoursTheory},{default:u(()=>{var n;return[a(O,{style:{width:"100%"},clearable:"",value:l.value.hoursTheory,"onUpdate:value":e[18]||(e[18]=s=>l.value.hoursTheory=s),status:((n=t.value)==null?void 0:n.hoursTheory)!=null?"error":"",onInput:e[19]||(e[19]=s=>t.value!=null?t.value.hoursTheory=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:(_(r)==="sm",24)},{default:u(()=>{var o;return[a(v,{path:"preRequisiteId",label:"Pre-Requisito",feedback:(o=t.value)==null?void 0:o.preRequisiteId},{default:u(()=>{var n;return[a(S,{clearable:"",filterable:"",options:w.value,disabled:l.value.curriculumId==null,placeholder:"Seleccione un curso","virtual-scroll":!1,value:l.value.preRequisiteId,"onUpdate:value":[e[20]||(e[20]=s=>l.value.preRequisiteId=s),e[21]||(e[21]=s=>t.value!=null?t.value.preRequisiteId=null:()=>{})],status:((n=t.value)==null?void 0:n.preRequisiteId)!=null?"error":""},null,8,["options","disabled","value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:"24"},{default:u(()=>[a(M,{justify:"end"},{default:u(()=>[a(v,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:u(()=>[a(ae,{value:l.value.isEnabled,"onUpdate:value":e[22]||(e[22]=o=>l.value.isEnabled=o)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),Be={style:{"border-bottom":"1px solid #e9e9e9"}},De=T({__name:"DataTable",props:{curriculumOptions:{}},setup(g){const I=Ie(),r=p(!1),f=p([]),y=p(!1),i=p(null),c=ye({...Z()}),k=p(""),l=p({search:null,page:c.page,pageSize:c.pageSize}),t=p({}),h=Ve(b=>{i.value=b,y.value=!0},async b=>{await me(b),await w()}),w=async()=>{l.value.page=1,await x()},x=async()=>{r.value=!0,l.value.filters={curriculumId:k.value},t.value=await pe(l.value),f.value=t.value.data,c.total=t.value.total,c.pageSize=t.value.per_page,c.page=t.value.current_page,c.pageCount=t.value.last_page,r.value=!1},P=Re(()=>{w()},400),E=async b=>{l.value.page=b,await x()},z=async b=>{l.value.page=1,l.value.pageSize=b,await x()};return(async()=>{k.value=I.params.id??"",await x()})(),(b,C)=>{const d=X,e=Y,$=Q,v=Ue;return R(),L(K,null,[B("div",Be,[a($,{gutter:12,style:{padding:"12px 16px"}},{default:u(()=>[a(d,{span:12}),a(d,{span:12},{default:u(()=>[a(e,{size:"large",placeholder:"Buscar",value:l.value.search,"onUpdate:value":C[0]||(C[0]=m=>l.value.search=m),onInput:_(P),clearable:""},{suffix:u(()=>[a(j,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),a($,null,{default:u(()=>[a(d,{span:24},{default:u(()=>[a(v,{key:"id",remote:"","single-line":!1,columns:_(h),data:f.value,pagination:_(qe)(c),"pagination-show-size-picker":!0,loading:r.value,"onUpdate:page":E,"onUpdate:pageSize":z},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),ke(b.$slots,"extra",{reLoadDataTable:w})]),a(ee,{modelValue:y.value,"onUpdate:modelValue":C[1]||(C[1]=m=>y.value=m),item:i.value,onSuccess:w,curriculumOptions:b.curriculumOptions},null,8,["modelValue","item","curriculumOptions"])],64)}}}),pa=T({__name:"index",setup(g){const I=p([]),r=p(!1);return(async()=>{I.value=await Pe()})(),(y,i)=>{const c=D,k=J;return R(),L(K,null,[a(k,{segmented:{header:!0,content:!0}},{header:u(()=>i[2]||(i[2]=[B("span",{class:"text-sm text-slate-500"}," Gestión de Cursos ",-1),B("h5",{class:"text-lg font-bold text-slate-800"},"Cursos",-1)])),"header-extra":u(()=>[a(c,{"render-icon":_(V)("additem"),onClick:i[0]||(i[0]=l=>r.value=!0)},{default:u(()=>i[3]||(i[3]=[q(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),a(De,{curriculumOptions:I.value},{extra:u(({reLoadDataTable:l})=>[a(ee,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=t=>r.value=t),item:null,onSuccess:l,curriculumOptions:I.value},null,8,["modelValue","onSuccess","curriculumOptions"])]),_:1},8,["curriculumOptions"])],64)}}});export{pa as default};
