import{d as O,e as A,i as j}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-Bmpfm3DX.js";import{i as $}from"./DataTable.types-BEg5m_To.js";import{a as q}from"./selectables.services-CQWE3rV7.js";import"./studentType.services-CUgrXzhp.js";import"./student.services-Bq67KpZc.js";import"./documentType.services-BxS8QtUR.js";import{u as J}from"./period.stores-BjWtGRmw.js";import{d as y,aC as L,a8 as H,ac as K,ad as v,a9 as h,h as Q,r as l,aI as X,aF as E,_ as G,ae as x,ab as s,aJ as Y,aa as p,aG as Z,aA as ee}from"./index-BA0H_JCl.js";import{d as V}from"./debounce.utils-DqPPCsFD.js";import{_ as te,a as ae}from"./Col-cTRCMRiH.js";import{_ as oe}from"./Select-DtHdO6pL.js";import{_ as ne}from"./Input-CZ0NJzi4.js";import{_ as le}from"./DataTable-CFRMbF6h.js";import"./icon.utils-CUQHzjSp.js";import"./Alert-CrY12w7S.js";import"./FormItem-BNivClae.js";import"./get-CuJVaMdf.js";import"./ListItem-ClLsnlyq.js";import"./Thing-OxyXXywY.js";import"./Tag-7hJbHmVV.js";import"./Space-ByIL93Yx.js";import"./composables-mQeoW-4M.js";import"./Dropdown-C667YNyW.js";import"./Popover-Aio3sJwU.js";import"./use-merged-state-DP6rciDv.js";import"./Suffix-C2nBboqj.js";import"./Tooltip-ByhZhG9O.js";const se=y({__name:"DataTableOp",props:{item:{}},emits:["openForm","success"],setup(i,{emit:u}){const r=u,a=J(),d=async()=>{};return L(()=>{d()}),(m,e)=>{var o;return((o=v(a).enrollment)==null?void 0:o.period)==m.item.period?(h(),H(O,{key:0,item:m.item,onResetEnrollment:e[0]||(e[0]=n=>r("openForm",n)),onChangeGroup:e[1]||(e[1]=n=>r("openForm",n)),onReserveEnrollment:e[2]||(e[2]=n=>r("success")),onCancelEnrollment:e[3]||(e[3]=n=>r("success"))},null,8,["item"])):K("",!0)}}}),re=(i,u)=>[{title:"Ops.",key:"ops",width:"130px",fixed:"left",render(r){const a=r;return Q(se,{onOpenForm:()=>i(a),onSuccess:()=>u(),item:a},{default:()=>"Editar"})}},{title:"Período",key:"period",minWidth:"100"},{title:"Estado de mat.",key:"enrollmentStatus",minWidth:"150px"},{title:"Estudiante",key:"student",minWidth:"300px"},{title:"Módulo",key:"module",minWidth:"200px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Grupo",key:"group",minWidth:"100px"},{title:"Modalidad",key:"modality",minWidth:"100px"}],ie=(i=$())=>({page:i.page,total:i.total,pageSize:i.pageSize,pageCount:i.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${i.total} registros`}}),ue={style:{"border-bottom":"1px solid #e9e9e9"}},pe=y({__name:"DataTable",setup(i){const u=l(!1),r=l(!1),a=l([]),d=l(!1),m=l([]),e=X({...$()}),o=l({search:null,page:e.page,pageSize:e.pageSize,filters:{periodId:null}}),n=l({}),b=l(null),I=l(null),w=l(null),k=l(null),z=l(!1),T=t=>{b.value=t.courseId,w.value=t.studentId,k.value=t.curriculumId,I.value=t,z.value=t.isSpecial,u.value=!0},_=async()=>{o.value.page=1,await f()},W=re(T,_),C=async t=>{r.value=!0,a.value=await q(t),r.value=!1},B=V(t=>{C(t)},400),f=async()=>{d.value=!0,n.value=await j(o.value),m.value=n.value.data,e.total=n.value.total,e.pageSize=n.value.per_page,e.page=n.value.current_page,e.pageCount=n.value.last_page,d.value=!1},D=V(()=>{_()},400),F=async t=>{o.value.page=t,await f()},M=async t=>{o.value.page=1,o.value.pageSize=t,await f()};return(async()=>{await C(""),await f()})(),(t,c)=>{const U=oe,S=ae,R=ne,P=te,N=le;return h(),E(G,null,[x("div",ue,[s(P,{gutter:12,class:"p-4 flex justify-between"},{default:p(()=>[s(S,{span:6},{default:p(()=>[s(U,{value:o.value.filters.periodId,"onUpdate:value":[c[0]||(c[0]=g=>o.value.filters.periodId=g),_],placeholder:"Seleccionar Periodo Académico",filterable:"",options:a.value,loading:r.value,clearable:"",remote:"",size:"large","virtual-scroll":!1,onSearch:v(B)},null,8,["value","options","loading","onSearch"])]),_:1}),s(S,{span:12},{default:p(()=>[s(R,{size:"large",placeholder:"Buscar",value:o.value.search,"onUpdate:value":c[1]||(c[1]=g=>o.value.search=g),onInput:v(D),clearable:""},{suffix:p(()=>[s(Z,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),s(P,null,{default:p(()=>[s(S,{span:24},{default:p(()=>[s(N,{key:"id",remote:"","single-line":!1,columns:v(W),data:m.value,pagination:v(ie)(e),"pagination-show-size-picker":!0,loading:d.value,"onUpdate:page":F,"onUpdate:pageSize":M},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),Y(t.$slots,"extra",{reLoadDataTable:_})]),s(A,{modelValue:u.value,"onUpdate:modelValue":c[2]||(c[2]=g=>u.value=g),studentId:w.value,curriculumId:k.value,courseId:b.value,isSpecial:z.value,enrollmetGroup:I.value,onSuccess:_},null,8,["modelValue","studentId","curriculumId","courseId","isSpecial","enrollmetGroup"])],64)}}}),Ue=y({__name:"EnrollmentVirtualView",setup(i){return(async()=>{})(),(r,a)=>{const d=ee;return h(),E(G,null,[s(d,{segmented:{header:!0,content:!0}},{header:p(()=>a[0]||(a[0]=[x("span",{class:"text-sm text-slate-500"}," Gestión de matrículas ",-1),x("h5",{class:"text-lg font-bold text-slate-800"},"Matrículas",-1)])),"header-extra":p(()=>a[1]||(a[1]=[])),_:1}),s(pe)],64)}}});export{Ue as default};
