import{r as q}from"./icon.utils-BzaQiRL0.js";import{_ as oe,a as se,b as N,c as re,d as ie,e as de,f as pe,g as me}from"./course.services-27SpCdOU.js";import{u as ce}from"./useBreakpoints-3aRiryBT.js";import{d as ve}from"./area.services-Q4UJ6oxM.js";import{d as fe}from"./module.services-D5qqoLZu.js";import{d as R,a9 as U,a4 as A,a6 as u,aa as a,ah as G,ag as B,h as H,e as _e,r as p,g as ge,ae as z,ab as f,al as j,am as be,a5 as ye,ai as Ie,aj as L,ac as J,ak as ke,_ as K}from"./index-BDy3jz-R.js";import{_ as Q,a as we,b as Ce}from"./FormItem-DAU9UqDA.js";import{N as xe,_ as X,c as he,b as $e,a as Y}from"./Col-C2AyWxkb.js";import{_ as Oe}from"./InputNumber-B6n7P9Iy.js";import{_ as Te}from"./Switch-HHJXHes7.js";import{i as Z}from"./DataTable.types-DKc2i3jV.js";import{u as Se}from"./composables-D20BIpNr.js";import{_ as ze}from"./Dropdown-DschnT-y.js";import{d as Re}from"./debounce.utils-DqPPCsFD.js";import{_ as Ue}from"./DataTable-BjnUjyJ9.js";import{_ as Pe}from"./selectables.services-Dh18oZu3.js";import"./get-I814HMgj.js";import"./Tooltip-BC78MQpo.js";const Ee=R({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(g,{emit:y}){const r=Se(),_=y,I=[{label:"Editar",key:"edit",icon:q("edit-2"),props:{onClick:()=>_("edit")}},{label:"Eliminar",key:"delete",icon:q("trash","red"),props:{style:{color:"red"},onClick:()=>{r.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{_("delete")}})}}}];return(i,c)=>{const k=B,t=ze;return U(),A(t,{options:I,placement:"bottom-start"},{default:u(()=>[a(k,null,{default:u(()=>[a(G,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),Ve=(g,y)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(r){const _=r;return H(Ee,{onEdit:()=>{g(_)},onDelete:()=>{y(_)},item:_},{default:()=>"Editar"})}},{title:"Nombre",key:"name",minWidth:"300px"},{title:"Código",key:"code",minWidth:"80px"},{title:"Horas de práctica",key:"hoursPractice",minWidth:"80px"},{title:"Horas de teoría",key:"hoursTheory",minWidth:"80px"},{title:"Créditos",key:"credits",minWidth:"80px"},{title:"Área",key:"area",minWidth:"150px"},{title:"Módulo",key:"module",minWidth:"150px"},{title:"Currículo",key:"curriculum",minWidth:"150px"},{title:"Prerrequisito",key:"preRequisite",minWidth:"150px"},{title:"Descripción",key:"description",minWidth:"350px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:r=>H(xe,{type:r.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>r.isEnabled?"	Habilitado":"Deshabilitado"})}],qe=(g=Z())=>({page:g.page,total:g.total,pageSize:g.pageSize,pageCount:g.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${g.total} registros`}}),ee=R({__name:"CourseForm",props:{item:{},modelValue:{type:Boolean},curriculumOptions:{}},emits:["update:modelValue","success"],setup(g,{emit:y}){const{screenSize:r}=ce(),_=y,I=g,i=_e({get:()=>I.modelValue,set:d=>_("update:modelValue",d)}),c=p(!1),k=p(null),t=p(N()),l=p(null),D=p({...re()}),P=p([]),O=p([]),w=p([]),C=async()=>{w.value=await ie({curriculumId:t.value.curriculumId})},E=async()=>{P.value=await ve({curriculumId:t.value.curriculumId})},V=async()=>{O.value=await fe({curriculumId:t.value.curriculumId})},T=async(d=!1)=>{console.log("onChangeCurriculum",d),l.value&&(l.value.curriculumId=null),d||(t.value.areaId=null,t.value.moduleId=null,t.value.preRequisiteId=null),await E(),await V(),await C()},W=async()=>{if(k.value){const d=await k.value.validate();let e=null;d?(c.value=!0,t.value.id?e=await oe(t.value):e=await se(t.value),e.status?(_("success"),i.value=!1):l.value=e.data):console.log("Formulario inválido")}c.value=!1},b=async()=>{var d;(d=I.item)!=null&&d.id?(t.value=await de(I.item.id),await T(!0)):t.value=N()},x=async()=>{await b()};return ge(i,d=>{d&&x()}),(d,e)=>{const h=Q,v=we,m=X,S=he,$=Oe,ae=Te,F=$e,le=Y,te=Ce,M=B,ue=j,ne=be;return U(),A(ne,{show:i.value,"onUpdate:show":e[24]||(e[24]=n=>i.value=n)},{default:u(()=>[a(ue,{style:{width:"800px"},title:d.item?"EDITAR REGISTRO":"NUEVO REGISTRO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:u(()=>[a(F,{justify:"end"},{default:u(()=>[a(M,{tertiary:"",size:"large",onClick:e[23]||(e[23]=n=>i.value=!1),disabled:c.value},{default:u(()=>e[25]||(e[25]=[z(" Cancelar ")])),_:1},8,["disabled"]),a(M,{size:"large",type:"primary",onClick:W,loading:c.value},{default:u(()=>e[26]||(e[26]=[z("Guardar")])),_:1},8,["loading"])]),_:1})]),default:u(()=>[a(te,{ref_key:"formRef",ref:k,model:t.value,rules:D.value,size:"large"},{default:u(()=>[a(le,{gutter:16},{default:u(()=>[a(m,{span:f(r)==="sm"?12:4},{default:u(()=>{var n;return[a(v,{path:"code",label:"Código",feedback:(n=l.value)==null?void 0:n.code},{default:u(()=>{var o;return[a(h,{value:t.value.code,"onUpdate:value":[e[0]||(e[0]=s=>t.value.code=s),e[1]||(e[1]=s=>l.value!=null?l.value.code=null:()=>{})],status:((o=l.value)==null?void 0:o.code)!=null?"error":""},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:f(r)==="sm"?12:20},{default:u(()=>{var n;return[a(v,{path:"name",label:"Nombre",feedback:(n=l.value)==null?void 0:n.name},{default:u(()=>{var o;return[a(h,{value:t.value.name,"onUpdate:value":[e[2]||(e[2]=s=>t.value.name=s),e[3]||(e[3]=s=>l.value!=null?l.value.name=null:()=>{})],status:((o=l.value)==null?void 0:o.name)!=null?"error":""},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:"24"},{default:u(()=>{var n;return[a(v,{path:"curriculumId",label:"Plan de estudios",feedback:(n=l.value)==null?void 0:n.curriculumId},{default:u(()=>{var o;return[a(S,{value:t.value.curriculumId,"onUpdate:value":[e[4]||(e[4]=s=>t.value.curriculumId=s),e[5]||(e[5]=s=>T(!1))],options:d.curriculumOptions,filterable:"",clearable:"","virtual-scroll":!1,status:((o=l.value)==null?void 0:o.curriculumId)!=null?"error":""},null,8,["value","options","status"])]}),_:1},8,["feedback"])]}),_:1}),a(m,{span:f(r)==="sm"?24:12},{default:u(()=>{var n;return[a(v,{path:"areaId",label:"Área",feedback:(n=l.value)==null?void 0:n.areaId},{default:u(()=>{var o;return[a(S,{value:t.value.areaId,"onUpdate:value":[e[6]||(e[6]=s=>t.value.areaId=s),e[7]||(e[7]=s=>l.value!=null?l.value.areaId=null:()=>{})],options:P.value,disabled:t.value.curriculumId==null,filterable:"",clearable:"","virtual-scroll":!1,status:((o=l.value)==null?void 0:o.areaId)!=null?"error":""},null,8,["value","options","disabled","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:f(r)==="sm"?24:12},{default:u(()=>{var n;return[a(v,{path:"moduleId",label:"Módulo",feedback:(n=l.value)==null?void 0:n.moduleId},{default:u(()=>{var o;return[a(S,{value:t.value.moduleId,"onUpdate:value":[e[8]||(e[8]=s=>t.value.moduleId=s),e[9]||(e[9]=s=>l.value!=null?l.value.moduleId=null:()=>{})],options:O.value,disabled:t.value.curriculumId==null,filterable:"",clearable:"","virtual-scroll":!1,status:((o=l.value)==null?void 0:o.moduleId)!=null?"error":""},null,8,["value","options","disabled","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:f(r)==="sm"?12:4},{default:u(()=>{var n;return[a(v,{path:"order",label:"Orden",feedback:(n=l.value)==null?void 0:n.order},{default:u(()=>{var o;return[a($,{style:{width:"100%"},clearable:"",value:t.value.order,"onUpdate:value":e[10]||(e[10]=s=>t.value.order=s),status:((o=l.value)==null?void 0:o.order)!=null?"error":"",onInput:e[11]||(e[11]=s=>l.value!=null?l.value.order=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:f(r)==="sm"?12:4},{default:u(()=>{var n;return[a(v,{path:"credits",label:"Créditos",feedback:(n=l.value)==null?void 0:n.credits},{default:u(()=>{var o;return[a($,{style:{width:"100%"},clearable:"",value:t.value.credits,"onUpdate:value":e[12]||(e[12]=s=>t.value.credits=s),status:((o=l.value)==null?void 0:o.credits)!=null?"error":"",onInput:e[13]||(e[13]=s=>l.value!=null?l.value.credits=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:f(r)==="sm"?12:4},{default:u(()=>{var n;return[a(v,{path:"units",label:"Unidad",feedback:(n=l.value)==null?void 0:n.units},{default:u(()=>{var o;return[a($,{style:{width:"100%"},clearable:"",value:t.value.units,"onUpdate:value":e[14]||(e[14]=s=>t.value.units=s),status:((o=l.value)==null?void 0:o.units)!=null?"error":"",onInput:e[15]||(e[15]=s=>l.value!=null?l.value.units=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:f(r)==="sm"?12:6},{default:u(()=>{var n;return[a(v,{path:"hoursPractice",label:"Horas Practicas",feedback:(n=l.value)==null?void 0:n.hoursPractice},{default:u(()=>{var o;return[a($,{style:{width:"100%"},clearable:"",value:t.value.hoursPractice,"onUpdate:value":e[16]||(e[16]=s=>t.value.hoursPractice=s),status:((o=l.value)==null?void 0:o.hoursPractice)!=null?"error":"",onInput:e[17]||(e[17]=s=>l.value!=null?l.value.hoursPractice=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:f(r)==="sm"?12:6},{default:u(()=>{var n;return[a(v,{path:"hoursTheory",label:"Horas Teoricas",feedback:(n=l.value)==null?void 0:n.hoursTheory},{default:u(()=>{var o;return[a($,{style:{width:"100%"},clearable:"",value:t.value.hoursTheory,"onUpdate:value":e[18]||(e[18]=s=>t.value.hoursTheory=s),status:((o=l.value)==null?void 0:o.hoursTheory)!=null?"error":"",onInput:e[19]||(e[19]=s=>l.value!=null?l.value.hoursTheory=null:()=>{})},null,8,["value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:(f(r)==="sm",24)},{default:u(()=>{var n;return[a(v,{path:"preRequisiteId",label:"Pre-Requisito",feedback:(n=l.value)==null?void 0:n.preRequisiteId},{default:u(()=>{var o;return[a(S,{clearable:"",filterable:"",options:w.value,disabled:t.value.curriculumId==null,placeholder:"Seleccione un curso","virtual-scroll":!1,value:t.value.preRequisiteId,"onUpdate:value":[e[20]||(e[20]=s=>t.value.preRequisiteId=s),e[21]||(e[21]=s=>l.value!=null?l.value.preRequisiteId=null:()=>{})],status:((o=l.value)==null?void 0:o.preRequisiteId)!=null?"error":""},null,8,["options","disabled","value","status"])]}),_:1},8,["feedback"])]}),_:1},8,["span"]),a(m,{span:"24"},{default:u(()=>[a(F,{justify:"end"},{default:u(()=>[a(v,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:u(()=>[a(ae,{value:t.value.isEnabled,"onUpdate:value":e[22]||(e[22]=n=>t.value.isEnabled=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),Be={style:{"border-bottom":"1px solid #e9e9e9"}},De=R({__name:"DataTable",props:{curriculumOptions:{}},setup(g){const y=ye(),r=p(!1),_=p([]),I=p(!1),i=p(null),c=Ie({...Z()}),k=p(""),t=p({search:null,page:c.page,pageSize:c.pageSize}),l=p({}),O=Ve(b=>{i.value=b,I.value=!0},async b=>{await me(b),await w()}),w=async()=>{t.value.page=1,await C()},C=async()=>{r.value=!0,t.value.filters={curriculumId:k.value},l.value=await pe(t.value),_.value=l.value.data,c.total=l.value.total,c.pageSize=l.value.per_page,c.page=l.value.current_page,c.pageCount=l.value.last_page,r.value=!1},E=Re(()=>{w()},400),V=async b=>{t.value.page=b,await C()},T=async b=>{t.value.page=1,t.value.pageSize=b,await C()};return(async()=>{k.value=y.params.id??"",await C()})(),(b,x)=>{const d=X,e=Q,h=Y,v=Ue;return U(),L(K,null,[J("div",Be,[a(h,{gutter:12,style:{padding:"12px 16px"}},{default:u(()=>[a(d,{span:12}),a(d,{span:12},{default:u(()=>[a(e,{size:"large",placeholder:"Buscar",value:t.value.search,"onUpdate:value":x[0]||(x[0]=m=>t.value.search=m),onInput:f(E),clearable:""},{suffix:u(()=>[a(G,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),a(h,null,{default:u(()=>[a(d,{span:24},{default:u(()=>[a(v,{key:"id",remote:"","single-line":!1,columns:f(O),data:_.value,pagination:f(qe)(c),"pagination-show-size-picker":!0,loading:r.value,"onUpdate:page":V,"onUpdate:pageSize":T},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),ke(b.$slots,"extra",{reLoadDataTable:w})]),a(ee,{modelValue:I.value,"onUpdate:modelValue":x[1]||(x[1]=m=>I.value=m),item:i.value,onSuccess:w,curriculumOptions:b.curriculumOptions},null,8,["modelValue","item","curriculumOptions"])],64)}}}),ta=R({__name:"index",setup(g){const y=p([]),r=p(!1);return(async()=>{y.value=await Pe()})(),(I,i)=>{const c=B,k=j;return U(),L(K,null,[a(k,{segmented:{header:!0,content:!0}},{header:u(()=>i[2]||(i[2]=[J("h6",{style:{color:"#999",margin:"0"}},"Gestión de Courses academicas",-1),z(" Courses ")])),"header-extra":u(()=>[a(c,{"render-icon":f(q)("additem"),onClick:i[0]||(i[0]=t=>r.value=!0)},{default:u(()=>i[3]||(i[3]=[z(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),a(De,{curriculumOptions:y.value},{extra:u(({reLoadDataTable:t})=>[a(ee,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=l=>r.value=l),item:null,onSuccess:t,curriculumOptions:y.value},null,8,["modelValue","onSuccess","curriculumOptions"])]),_:1},8,["curriculumOptions"])],64)}}});export{ta as default};
