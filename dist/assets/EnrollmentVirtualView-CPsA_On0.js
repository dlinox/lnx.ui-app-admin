import{d as N,e as O,i as A}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-BctOHP31.js";import{i as V}from"./DataTable.types-BEg5m_To.js";import{a as j}from"./selectables.services-BaLMt3qD.js";import"./studentType.services-B4fxJyd-.js";import"./student.services-BRCXh15_.js";import"./documentType.services-DsNWuLGx.js";import{u as q}from"./period.stores-9Tu0xZQr.js";import{d as S,aC as J,a8 as L,ac as H,ad as v,a9 as h,h as K,r,aI as Q,aF as $,_ as E,ae as y,ab as l,aJ as X,aa as p,aG as Y,aA as Z}from"./index--Fiy2I4t.js";import{d as P}from"./debounce.utils-DqPPCsFD.js";import{_ as ee,a as te}from"./Col-Bhohzmu6.js";import{_ as ae}from"./Select-JHMV7BBf.js";import{_ as oe}from"./Input-CfWAw0Qs.js";import{_ as ne}from"./DataTable-D69-Uvxy.js";import"./icon.utils-Cdau1lmo.js";import"./Alert-DGEqS-V6.js";import"./FormItem-64Oo6hS7.js";import"./get-BxuUz3sF.js";import"./ListItem-Bx3-mArE.js";import"./Thing-2BjOqH8k.js";import"./Tag-CmlrV2vM.js";import"./Space-CHReEK5D.js";import"./get-slot-Bk_rJcZu.js";import"./composables-CN96FFP-.js";import"./Dropdown-B9vn1Rts.js";import"./Popover-_nZkNipR.js";import"./use-merged-state-Hew3oQWq.js";import"./Suffix-Cejid3DV.js";import"./Tooltip-B09_9Vum.js";const le=S({__name:"DataTableOp",props:{item:{}},emits:["openForm","success"],setup(i,{emit:u}){const s=u,a=q(),d=async()=>{};return J(()=>{d()}),(c,e)=>{var o;return((o=v(a).enrollment)==null?void 0:o.period)==c.item.period?(h(),L(N,{key:0,item:c.item,onResetEnrollment:e[0]||(e[0]=n=>s("openForm",n)),onChangeGroup:e[1]||(e[1]=n=>s("openForm",n)),onReserveEnrollment:e[2]||(e[2]=n=>s("success")),onCancelEnrollment:e[3]||(e[3]=n=>s("success"))},null,8,["item"])):H("",!0)}}}),se=(i,u)=>[{title:"Ops.",key:"ops",width:"130px",fixed:"left",render(s){const a=s;return K(le,{onOpenForm:()=>i(a),onSuccess:()=>u(),item:a},{default:()=>"Editar"})}},{title:"Período",key:"period",minWidth:"100"},{title:"Estado de mat.",key:"enrollmentStatus",minWidth:"150px"},{title:"Estudiante",key:"student",minWidth:"300px"},{title:"Módulo",key:"module",minWidth:"200px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Grupo",key:"group",minWidth:"100px"},{title:"Modalidad",key:"modality",minWidth:"100px"}],re=(i=V())=>({page:i.page,total:i.total,pageSize:i.pageSize,pageCount:i.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${i.total} registros`}}),ie={style:{"border-bottom":"1px solid #e9e9e9"}},ue=S({__name:"DataTable",setup(i){const u=r(!1),s=r(!1),a=r([]),d=r(!1),c=r([]),e=Q({...V()}),o=r({search:null,page:e.page,pageSize:e.pageSize,filters:{periodId:null}}),n=r({}),b=r(null),I=r(null),w=r(null),k=r(null),G=t=>{b.value=t.courseId,w.value=t.studentId,k.value=t.curriculumId,I.value=t,u.value=!0},_=async()=>{o.value.page=1,await f()},T=se(G,_),z=async t=>{s.value=!0,a.value=await j(t),s.value=!1},W=P(t=>{z(t)},400),f=async()=>{d.value=!0,n.value=await A(o.value),c.value=n.value.data,e.total=n.value.total,e.pageSize=n.value.per_page,e.page=n.value.current_page,e.pageCount=n.value.last_page,d.value=!1},B=P(()=>{_()},400),D=async t=>{o.value.page=t,await f()},F=async t=>{o.value.page=1,o.value.pageSize=t,await f()};return(async()=>{await z(""),await f()})(),(t,m)=>{const M=ae,x=te,U=oe,C=ee,R=ne;return h(),$(E,null,[y("div",ie,[l(C,{gutter:12,class:"p-4 flex justify-between"},{default:p(()=>[l(x,{span:6},{default:p(()=>[l(M,{value:o.value.filters.periodId,"onUpdate:value":[m[0]||(m[0]=g=>o.value.filters.periodId=g),_],placeholder:"Seleccionar Periodo Académico",filterable:"",options:a.value,loading:s.value,clearable:"",remote:"",size:"large","virtual-scroll":!1,onSearch:v(W)},null,8,["value","options","loading","onSearch"])]),_:1}),l(x,{span:12},{default:p(()=>[l(U,{size:"large",placeholder:"Buscar",value:o.value.search,"onUpdate:value":m[1]||(m[1]=g=>o.value.search=g),onInput:v(B),clearable:""},{suffix:p(()=>[l(Y,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),l(C,null,{default:p(()=>[l(x,{span:24},{default:p(()=>[l(R,{key:"id",remote:"","single-line":!1,columns:v(T),data:c.value,pagination:v(re)(e),"pagination-show-size-picker":!0,loading:d.value,"onUpdate:page":D,"onUpdate:pageSize":F},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),X(t.$slots,"extra",{reLoadDataTable:_})]),l(O,{modelValue:u.value,"onUpdate:modelValue":m[2]||(m[2]=g=>u.value=g),studentId:w.value,curriculumId:k.value,courseId:b.value,enrollmetGroup:I.value,onSuccess:_},null,8,["modelValue","studentId","curriculumId","courseId","enrollmetGroup"])],64)}}}),Ue=S({__name:"EnrollmentVirtualView",setup(i){return(async()=>{})(),(s,a)=>{const d=Z;return h(),$(E,null,[l(d,{segmented:{header:!0,content:!0}},{header:p(()=>a[0]||(a[0]=[y("span",{class:"text-sm text-slate-500"}," Gestión de matrículas ",-1),y("h5",{class:"text-lg font-bold text-slate-800"},"Matrículas",-1)])),"header-extra":p(()=>a[1]||(a[1]=[])),_:1}),l(ue)],64)}}});export{Ue as default};
