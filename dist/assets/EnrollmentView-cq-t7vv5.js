import{d as j,a3 as D,a6 as I,r as u,j as P,a8 as R,aG as x,a9 as i,ae as m,aa as r,ac as n,ad as b,ab as a,aA as s,ag as L,af as p,aB as q,_ as $,aU as G,ah as S}from"./index-DwV6zJCX.js";import{r as H}from"./icon.utils-DutMd2qr.js";import{d as J}from"./debounce.utils-DqPPCsFD.js";import{_ as K}from"./StudentForm.vue_vue_type_script_setup_true_lang-iaE6wGak.js";import{c as O}from"./student.services-CbdSJW83.js";import{c as Q}from"./studentType.services-FE2g26JP.js";import{c as W}from"./documentType.services-DDy_5MCJ.js";import{_ as X}from"./Divider-rXEGP9z9.js";import{_ as Y,a as Z}from"./ListItem-Ch3wxL4j.js";import{_ as ee}from"./Thing-9qserMdX.js";import{_ as te,a as ae}from"./Col-BkVWW8vc.js";import{_ as ne}from"./Input-DldL4MyO.js";import{_ as oe}from"./Tag-tDmUe03M.js";import{_ as le}from"./Space-DEwGxh3N.js";import"./genders.constans-BK559Fh_.js";import"./useBreakpoints-CKzWdh1e.js";import"./Select-B-XafpkT.js";import"./Popover-BpepRpqO.js";import"./get-CqIzH_zz.js";import"./use-merged-state-B_X6BK0G.js";import"./Suffix-B52V2l9z.js";import"./FormItem-CNNyqOT9.js";import"./Switch-DLELeq5T.js";import"./DataTable.types-BEg5m_To.js";import"./get-slot-Bk_rJcZu.js";const re={style:{"text-align":"end"}},se={style:{padding:"0 1rem",color:"#999","font-size":"0.8rem"}},ue={class:"pt-3 text-end"},ze=j({__name:"EnrollmentView",setup(me){const{hasPermission:c}=D(),k=I(),v=u(!1),f=u({}),o=u({code:"",documentNumber:"",name:"",lastNameFather:"",lastNameMother:""}),y=u([]),g=u(!0),h=u(!1),w=l=>{o.value.documentNumber=l.documentNumber,o.value.name=l.name,o.value.lastNameFather=l.lastNameFather,o.value.lastNameMother=l.lastNameMother};return P(o.value,J(async l=>{h.value=!0,y.value=await O(l),h.value=!1},500)),(async()=>{g.value=!0,f.value.studentTypesItems=await Q(),f.value.documentTypesItems=await W(),g.value=!1})(),(l,e)=>{const N=L,V=X,_=ne,d=ae,M=te,C=q,T=oe,F=ee,A=le,B=Y,E=Z,U=R("AppNotAuthorization");return m(c)(["enrollment.create","enrollment.create-special","enrollment.edit","enrollment.print-record"])?(r(),x($,{key:0},[n(C,{segmented:{header:!0,footer:!0,content:!0}},{header:a(()=>e[6]||(e[6]=[p("h6",{class:"text-sm text-gray-500"},"Matriculas",-1),s(" Realizar la matricula de los estudiantes ")])),"header-extra":a(()=>[n(N,{"render-icon":m(H)("additem"),type:"primary",onClick:e[0]||(e[0]=t=>v.value=!0)},{default:a(()=>e[7]||(e[7]=[s(" Estudiante ")])),_:1},8,["render-icon"])]),action:a(()=>[n(V,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:a(()=>e[8]||(e[8]=[s(" Buscar estudiantes ")])),_:1}),n(M,{gutter:"16"},{default:a(()=>[n(d,{span:"5"},{default:a(()=>[n(_,{type:"text",value:o.value.documentNumber,"onUpdate:value":e[1]||(e[1]=t=>o.value.documentNumber=t),placeholder:"NÂ° de Documento"},null,8,["value"])]),_:1}),n(d,{span:"7"},{default:a(()=>[n(_,{type:"text",value:o.value.name,"onUpdate:value":e[2]||(e[2]=t=>o.value.name=t),placeholder:"Nombre"},null,8,["value"])]),_:1}),n(d,{span:"6"},{default:a(()=>[n(_,{type:"text",value:o.value.lastNameFather,"onUpdate:value":e[3]||(e[3]=t=>o.value.lastNameFather=t),placeholder:"Apellido Paterno"},null,8,["value"])]),_:1}),n(d,{span:"6"},{default:a(()=>[n(_,{type:"text",value:o.value.lastNameMother,"onUpdate:value":e[4]||(e[4]=t=>o.value.lastNameMother=t),placeholder:"Apellido Materno"},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(E,{hoverable:"",clickable:""},{header:a(()=>[p("div",re,[p("i",se,[e[9]||(e[9]=s(" Se muestran los 10 mejores resultados de la busqueda | ")),p("strong",null," Total de resultados: "+S(y.value.length),1)])])]),default:a(()=>[(r(!0),x($,null,G(y.value,t=>(r(),i(B,{style:{margin:"0 1rem"},key:t.id},{default:a(()=>[n(F,{title:`${t.name} ${t.lastName}`,description:`${t.documentType?t.documentType:"-"}    ${t.documentNumber?t.documentNumber:"-"}`},{default:a(()=>[n(T,{bordered:!1},{default:a(()=>[s(S(t.studentType),1)]),_:2},1024)]),_:2},1032,["title","description"]),p("div",ue,[n(A,{align:"center",justify:"end"},{default:a(()=>[m(c)(["enrollment.create"])?(r(),i(N,{key:0,secondary:"",type:"primary",class:"ms-2",onClick:z=>m(k).push({name:"EnrollmentStudent",params:{id:t.id}})},{default:a(()=>e[10]||(e[10]=[s(" Matricular ")])),_:2},1032,["onClick"])):b("",!0),m(c)(["enrollment.create-special"])?(r(),i(N,{key:1,strong:"",secondary:"",onClick:z=>m(k).push({name:"EnrollmentSpecialStudent",params:{id:t.id}})},{default:a(()=>e[11]||(e[11]=[s(" Matriculas Especiales ")])),_:2},1032,["onClick"])):b("",!0)]),_:2},1024)])]),_:2},1024))),128))]),_:1}),g.value?b("",!0):(r(),i(K,{key:0,modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value=t),item:null,selectables:f.value,onSuccess:w},null,8,["modelValue","selectables"]))],64)):(r(),i(U,{key:1}))}}});export{ze as default};
