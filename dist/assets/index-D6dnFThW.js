import{d as le}from"./debounce.utils-DqPPCsFD.js";import{a as _e,b as Be,_ as Ue}from"./selectables.services-rqDjzlhf.js";import{r as ye}from"./icon.utils-DutMd2qr.js";import{u as $e}from"./useBreakpoints-CKzWdh1e.js";import{_ as ze,a as Te,b as De,c as Oe,d as Ne,e as Fe}from"./group.services-shGiBeAS.js";import{d as E,h as a,c as Me,aN as Ee,a as be,Q as We,i as ie,z as W,B as Le,x as me,A as H,ag as z,aO as fe,aP as ge,u as xe,aQ as je,r as V,H as Q,G as X,e as M,p as He,f as Ge,K as Ce,U as j,aR as te,aS as oe,a2 as qe,N as ae,aT as Ke,a3 as se,j as ue,a9 as L,aa as N,aI as Ie,ab as r,ac as t,aB as de,aA as O,aH as Pe,ad as G,af as q,ae as C,a8 as Se,aJ as Je,aG as Ve,_ as ke,aK as Qe}from"./index-DwV6zJCX.js";import{_ as we}from"./Alert-ByHfwsqL.js";import{_ as Ye}from"./Spin-OpoqRje6.js";import{i as Xe,_ as K}from"./Input-DldL4MyO.js";import{u as Ze}from"./use-merged-state-B_X6BK0G.js";import{u as et}from"./Suffix-B52V2l9z.js";import{A as he,R as tt,_ as ot}from"./InputNumber-D84881hi.js";import{_ as at}from"./ButtonGroup-DmyPp4n9.js";import{A as nt,_ as rt}from"./DataTable-DqW2qosf.js";import{u as lt}from"./composables-OPWM5oN5.js";import{_ as Z,a as ee}from"./Col-BkVWW8vc.js";import{a as Re,_ as it}from"./FormItem-CNNyqOT9.js";import{_ as ce}from"./Select-B-XafpkT.js";import{_ as st}from"./Space-DEwGxh3N.js";import{i as Ae}from"./DataTable.types-BEg5m_To.js";import{u as ut,N as ne}from"./Popover-BpepRpqO.js";import{_ as dt}from"./Tag-tDmUe03M.js";import"./get-slot-Bk_rJcZu.js";import"./Tooltip-B687EG_W.js";import"./get-CqIzH_zz.js";import"./Dropdown-CxNUQKFj.js";const ct=E({name:"ArrowUp",render(){return a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},a("g",{fill:"none"},a("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),pt={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"};function mt(){return pt}const ft=Me({name:"DynamicInput",common:be,peers:{Input:Xe,Button:Ee},self:mt}),pe=We("n-dynamic-input"),gt=E({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:i}=ie(pe);return{mergedTheme:e,placeholder:i}},render(){const{mergedTheme:e,placeholder:i,value:o,clsPrefix:n,onUpdateValue:u,disabled:d}=this;return a("div",{class:`${n}-dynamic-input-preset-input`},a(K,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:o,placeholder:i,onUpdateValue:u,disabled:d}))}}),ht=E({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:i,keyPlaceholderRef:o,valuePlaceholderRef:n}=ie(pe);return{mergedTheme:i,keyPlaceholder:o,valuePlaceholder:n,handleKeyInput(u){e.onUpdateValue({key:u,value:e.value.value})},handleValueInput(u){e.onUpdateValue({key:e.value.key,value:u})}}},render(){const{mergedTheme:e,keyPlaceholder:i,valuePlaceholder:o,value:n,clsPrefix:u,disabled:d}=this;return a("div",{class:`${u}-dynamic-input-preset-pair`},a(K,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:n.key,class:`${u}-dynamic-input-pair-input`,placeholder:i,onUpdateValue:this.handleKeyInput,disabled:d}),a(K,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:n.value,class:`${u}-dynamic-input-pair-input`,placeholder:o,onUpdateValue:this.handleValueInput,disabled:d}))}}),vt=W("dynamic-input",{width:"100%"},[W("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[W("dynamic-input-preset-input",{flex:1,alignItems:"center"}),W("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[W("dynamic-input-pair-input",[me("&:first-child",{"margin-right":"12px"})])]),Le("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[H("icon",{cursor:"pointer"})]),me("&:last-child",{marginBottom:0})]),W("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[W("form-item-blank",{paddingTop:"0 !important"})])]),Y=new WeakMap,_t=Object.assign(Object.assign({},X.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),yt=E({name:"DynamicInput",props:_t,setup(e,{slots:i}){const{mergedComponentPropsRef:o,mergedClsPrefixRef:n,mergedRtlRef:u,inlineThemeDisabled:d}=xe(),c=ie(je,null),v=V(e.defaultValue),A=Q(e,"value"),g=Ze(A,v),p=X("DynamicInput","-dynamic-input",vt,ft,e,n),_=M(()=>{const{value:l}=g;if(Array.isArray(l)){const{max:s}=e;return s!==void 0&&l.length>=s}return!1}),I=M(()=>{const{value:l}=g;return Array.isArray(l)?l.length<=e.min:!0}),$=M(()=>{var l,s;return(s=(l=o==null?void 0:o.value)===null||l===void 0?void 0:l.DynamicInput)===null||s===void 0?void 0:s.buttonSize});function x(l){const{onInput:s,"onUpdate:value":b,onUpdateValue:h}=e;s&&ae(s,l),b&&ae(b,l),h&&ae(h,l),v.value=l}function m(l,s){if(l==null||typeof l!="object")return s;const b=te(l)?oe(l):l;let h=Y.get(b);return h===void 0&&Y.set(b,h=qe()),h}function f(l,s){const{value:b}=g,h=Array.from(b??[]),D=h[l];if(h[l]=s,D&&s&&typeof D=="object"&&typeof s=="object"){const S=te(D)?oe(D):D,J=te(s)?oe(s):s,U=Y.get(S);U!==void 0&&Y.set(J,U)}x(h)}function T(){k(-1)}function k(l){const{value:s}=g,{onCreate:b}=e,h=Array.from(s??[]);if(b)h.splice(l+1,0,b(l+1)),x(h);else if(i.default)h.splice(l+1,0,null),x(h);else switch(e.preset){case"input":h.splice(l+1,0,""),x(h);break;case"pair":h.splice(l+1,0,{key:"",value:""}),x(h);break}}function w(l){const{value:s}=g;if(!Array.isArray(s))return;const{min:b}=e;if(s.length<=b)return;const{onRemove:h}=e;h&&h(l);const D=Array.from(s);D.splice(l,1),x(D)}function y(l,s,b){if(s<0||b<0||s>=l.length||b>=l.length||s===b)return;const h=l[s];l[s]=l[b],l[b]=h}function P(l,s){const{value:b}=g;if(!Array.isArray(b))return;const h=Array.from(b);l==="up"&&y(h,s,s-1),l==="down"&&y(h,s,s+1),x(h)}He(pe,{mergedThemeRef:p,keyPlaceholderRef:Q(e,"keyPlaceholder"),valuePlaceholderRef:Q(e,"valuePlaceholder"),placeholderRef:Q(e,"placeholder")});const R=Ge("DynamicInput",u,n),F=M(()=>{const{self:{actionMargin:l,actionMarginRtl:s}}=p.value;return{"--action-margin":l,"--action-margin-rtl":s}}),B=d?Ce("dynamic-input",void 0,F,e):void 0;return{locale:et("DynamicInput").localeRef,rtlEnabled:R,buttonSize:$,mergedClsPrefix:n,NFormItem:c,uncontrolledValue:v,mergedValue:g,insertionDisabled:_,removeDisabled:I,handleCreateClick:T,ensureKey:m,handleValueChange:f,remove:w,move:P,createItem:k,mergedTheme:p,cssVars:d?void 0:F,themeClass:B==null?void 0:B.themeClass,onRender:B==null?void 0:B.onRender}},render(){const{$slots:e,itemClass:i,buttonSize:o,mergedClsPrefix:n,mergedValue:u,locale:d,mergedTheme:c,keyField:v,itemStyle:A,preset:g,showSortButton:p,NFormItem:_,ensureKey:I,handleValueChange:$,remove:x,createItem:m,move:f,onRender:T,disabled:k}=this;return T==null||T(),a("div",{class:[`${n}-dynamic-input`,this.rtlEnabled&&`${n}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(u)||u.length===0?a(z,Object.assign({block:!0,ghost:!0,dashed:!0,size:o},this.createButtonProps,{disabled:this.insertionDisabled||k,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>fe(e["create-button-default"],()=>[d.create]),icon:()=>fe(e["create-button-icon"],()=>[a(j,{clsPrefix:n},{default:()=>a(he,null)})])}):u.map((w,y)=>a("div",{key:v?w[v]:I(w,y),"data-key":v?w[v]:I(w,y),class:[`${n}-dynamic-input-item`,i],style:A},ge(e.default,{value:u[y],index:y},()=>[g==="input"?a(gt,{disabled:k,clsPrefix:n,value:u[y],parentPath:_?_.path.value:void 0,path:_!=null&&_.path.value?`${_.path.value}[${y}]`:void 0,onUpdateValue:P=>{$(y,P)}}):g==="pair"?a(ht,{disabled:k,clsPrefix:n,value:u[y],parentPath:_?_.path.value:void 0,path:_!=null&&_.path.value?`${_.path.value}[${y}]`:void 0,onUpdateValue:P=>{$(y,P)}}):null]),ge(e.action,{value:u[y],index:y,create:m,remove:x,move:f},()=>[a("div",{class:`${n}-dynamic-input-item__action`},a(at,{size:o},{default:()=>[a(z,{disabled:this.removeDisabled||k,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,circle:!0,onClick:()=>{x(y)}},{icon:()=>a(j,{clsPrefix:n},{default:()=>a(tt,null)})}),a(z,{disabled:this.insertionDisabled||k,circle:!0,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:()=>{m(y)}},{icon:()=>a(j,{clsPrefix:n},{default:()=>a(he,null)})}),p?a(z,{disabled:y===0||k,circle:!0,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:()=>{f("up",y)}},{icon:()=>a(j,{clsPrefix:n},{default:()=>a(ct,null)})}):null,p?a(z,{disabled:y===u.length-1||k,circle:!0,theme:c.peers.Button,themeOverrides:c.peerOverrides.Button,onClick:()=>{f("down",y)}},{icon:()=>a(j,{clsPrefix:n},{default:()=>a(nt,null)})}):null]}))]))))}}),bt={headerFontSize1:"30px",headerFontSize2:"22px",headerFontSize3:"18px",headerFontSize4:"16px",headerFontSize5:"16px",headerFontSize6:"16px",headerMargin1:"28px 0 20px 0",headerMargin2:"28px 0 20px 0",headerMargin3:"28px 0 20px 0",headerMargin4:"28px 0 18px 0",headerMargin5:"28px 0 18px 0",headerMargin6:"28px 0 18px 0",headerPrefixWidth1:"16px",headerPrefixWidth2:"16px",headerPrefixWidth3:"12px",headerPrefixWidth4:"12px",headerPrefixWidth5:"12px",headerPrefixWidth6:"12px",headerBarWidth1:"4px",headerBarWidth2:"4px",headerBarWidth3:"3px",headerBarWidth4:"3px",headerBarWidth5:"3px",headerBarWidth6:"3px",pMargin:"16px 0 16px 0",liMargin:".25em 0 0 0",olPadding:"0 0 0 2em",ulPadding:"0 0 0 2em"};function xt(e){const{primaryColor:i,textColor2:o,borderColor:n,lineHeight:u,fontSize:d,borderRadiusSmall:c,dividerColor:v,fontWeightStrong:A,textColor1:g,textColor3:p,infoColor:_,warningColor:I,errorColor:$,successColor:x,codeColor:m}=e;return Object.assign(Object.assign({},bt),{aTextColor:i,blockquoteTextColor:o,blockquotePrefixColor:n,blockquoteLineHeight:u,blockquoteFontSize:d,codeBorderRadius:c,liTextColor:o,liLineHeight:u,liFontSize:d,hrColor:v,headerFontWeight:A,headerTextColor:g,pTextColor:o,pTextColor1Depth:g,pTextColor2Depth:o,pTextColor3Depth:p,pLineHeight:u,pFontSize:d,headerBarColor:i,headerBarColorPrimary:i,headerBarColorInfo:_,headerBarColorError:$,headerBarColorWarning:I,headerBarColorSuccess:x,textColor:o,textColor1Depth:g,textColor2Depth:o,textColor3Depth:p,textColorPrimary:i,textColorInfo:_,textColorSuccess:x,textColorWarning:I,textColorError:$,codeTextColor:o,codeColor:m,codeBorder:"1px solid #0000"})}const Ct={common:be,self:xt},It=W("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[H("strong",`
 font-weight: var(--n-font-weight-strong);
 `),H("italic",{fontStyle:"italic"}),H("underline",{textDecoration:"underline"}),H("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),Pt=Object.assign(Object.assign({},X.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),re=E({name:"Text",props:Pt,setup(e){const{mergedClsPrefixRef:i,inlineThemeDisabled:o}=xe(e),n=X("Typography","-text",It,Ct,e,i),u=M(()=>{const{depth:c,type:v}=e,A=v==="default"?c===void 0?"textColor":`textColor${c}Depth`:Ke("textColor",v),{common:{fontWeightStrong:g,fontFamilyMono:p,cubicBezierEaseInOut:_},self:{codeTextColor:I,codeBorderRadius:$,codeColor:x,codeBorder:m,[A]:f}}=n.value;return{"--n-bezier":_,"--n-text-color":f,"--n-font-weight-strong":g,"--n-font-famliy-mono":p,"--n-code-border-radius":$,"--n-code-text-color":I,"--n-code-color":x,"--n-code-border":m}}),d=o?Ce("text",M(()=>`${e.type[0]}${e.depth||""}`),u,e):void 0;return{mergedClsPrefix:i,compitableTag:ut(e,["as","tag"]),cssVars:o?void 0:u,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){var e,i,o;const{mergedClsPrefix:n}=this;(e=this.onRender)===null||e===void 0||e.call(this);const u=[`${n}-text`,this.themeClass,{[`${n}-text--code`]:this.code,[`${n}-text--delete`]:this.delete,[`${n}-text--strong`]:this.strong,[`${n}-text--italic`]:this.italic,[`${n}-text--underline`]:this.underline}],d=(o=(i=this.$slots).default)===null||o===void 0?void 0:o.call(i);return this.code?a("code",{class:u,style:this.cssVars},this.delete?a("del",null,d):d):this.delete?a("del",{class:u,style:this.cssVars},d):a(this.compitableTag||"span",{class:u,style:this.cssVars},d)}}),St=[{value:"LUN",label:"LUNES"},{value:"MAR",label:"MARTES"},{value:"MIE",label:"MIÉRCOLES"},{value:"JUE",label:"JUEVES"},{value:"VIE",label:"VIERNES"},{value:"SAB",label:"SÁBADO"},{value:"DOM",label:"DOMINGO"}],ve=()=>({id:null,name:null,courseId:null,teacherId:null,laboratoryId:null,schedule:{days:[],startHour:null,endHour:null},maxStudents:0,minStudents:0,modality:null,status:"ABIERTO"}),Vt=[{label:"PRESENCIAL",value:"PRESENCIAL"},{label:"VIRTUAL",value:"VIRTUAL"}],kt={class:"border border-dashed border-gray-400 p-4 rounded relative hover:bg-gray-50"},wt={class:"absolute top-0 right-0"},Rt=E({__name:"GroupForm",props:{modelValue:{type:Boolean},item:{},periodId:{}},emits:["update:modelValue","success"],setup(e,{emit:i}){const{hasPermission:o}=se(),n=lt(),u=i,d=e,{screenSize:c}=$e(),v=M({get:()=>d.modelValue,set:m=>u("update:modelValue",m)}),A=V(!1),g=V(!1),p=V([]),_=()=>Object.assign({},{...ve(),name:d.item.code+(p.value.length+1)}),I=m=>{p.value.splice(m,1)},$=async()=>{g.value=!0,(await De(p.value,d.periodId,d.item.id)).status&&(u("success"),v.value=!1),g.value=!1},x=async()=>{if(console.log("Inicializando formulario"),d.item){const m=await Oe({id:d.item.id,periodId:d.periodId});m?p.value=m:p.value=[{...ve(),name:d.item.code}]}};return ue(v,async m=>{m&&(A.value=!0,await x(),A.value=!1)}),(m,f)=>{const T=we,k=K,w=Re,y=ee,P=ce,R=ot,F=Z,B=z,l=yt,s=Ye,b=Te,h=de,D=Ie;return N(),L(D,{show:v.value,"onUpdate:show":f[3]||(f[3]=S=>v.value=S)},{default:r(()=>[t(h,{style:{width:"1200px"},title:"Registro de grupos",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:r(()=>[t(b,{justify:"end"},{default:r(()=>[t(B,{onClick:f[2]||(f[2]=()=>v.value=!1)},{default:r(()=>f[8]||(f[8]=[O("Cancelar")])),_:1}),C(o)(["group.create"])||C(o)(["group.edit"])?(N(),L(B,{key:0,type:"primary",onClick:$},{default:r(()=>f[9]||(f[9]=[O("Guardar")])),_:1})):G("",!0)]),_:1})]),default:r(()=>[t(T,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:r(()=>[t(Pe,{iconName:"information"})]),default:r(()=>[f[4]||(f[4]=O(" Antes de crear un grupo, asegúrese de que el curso tenga los precios asignados para la modalidad y tipo de estudiante correspondientes. "))]),_:1}),t(s,{show:A.value,description:"Cargando formulario"},{default:r(()=>[t(l,{value:p.value,"onUpdate:value":f[0]||(f[0]=S=>p.value=S),"on-create":_,class:"mb-4"},{"create-button-default":r(()=>f[5]||(f[5]=[O(" Nuevo grupo ")])),default:r(({value:S,index:J})=>[q("div",kt,[t(F,{gutter:"16"},{default:r(()=>[t(y,{span:C(c)==="lg"?3:C(c)==="md"?4:12},{default:r(()=>[t(w,{label:"Grupo",path:"name","default-value":"Grupo"},{default:r(()=>[t(k,{value:S.name,"onUpdate:value":U=>S.name=U},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(y,{span:C(c)=="lg"||C(c)==="md"?4:12},{default:r(()=>[t(w,{label:"Modalidad",path:"modality"},{default:r(()=>[t(P,{value:S.modality,"onUpdate:value":U=>S.modality=U,options:C(Vt),filterable:"",clearable:"","virtual-scroll":!1},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),t(y,{span:C(c)==="lg"?3:C(c)==="md"?4:12},{default:r(()=>[t(w,{label:"Cupos máx.",path:"maxStudents"},{default:r(()=>[t(R,{value:S.maxStudents,"onUpdate:value":U=>S.maxStudents=U,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(y,{span:C(c)==="lg"?3:C(c)==="md"?4:12},{default:r(()=>[t(w,{label:"Cupos mín.",path:"minStudents"},{default:r(()=>[t(R,{value:S.minStudents,"onUpdate:value":U=>S.minStudents=U,class:"w-full"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(y,{span:C(c)==="lg"?11:C(c)==="md"?8:24},{default:r(()=>[t(w,{label:"Horario - Días",path:"schedule.days"},{default:r(()=>[t(P,{value:S.schedule.days,"onUpdate:value":U=>S.schedule.days=U,multiple:"","fallback-option":!1,options:C(St)},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1032,["span"]),t(y,{span:C(c)==="lg"||C(c)==="md"?4:12},{default:r(()=>[t(w,{label:"Hora de inicio"},{default:r(()=>[t(k,{clearable:"",type:"time",value:S.schedule.startHour,"onUpdate:value":U=>S.schedule.startHour=U,placeholder:"","use-12-hours":"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"]),t(y,{span:C(c)==="lg"||C(c)==="md"?4:12},{default:r(()=>[t(w,{label:"Hora de fin"},{default:r(()=>[t(k,{clearable:"",type:"time",value:S.schedule.endHour,"onUpdate:value":U=>S.schedule.endHour=U,placeholder:"",style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["span"])]),_:2},1024),q("div",wt,[C(o)(["group.delete"])?(N(),L(B,{key:0,secondary:"",type:"error","render-icon":C(ye)("trash"),onClick:()=>{C(n).warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:S.id?"Eliminar":"Quitar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:async()=>{S.id?await C(ze)(S)&&I(J):I(J)}})}},null,8,["render-icon","onClick"])):G("",!0)])])]),action:r(({})=>f[6]||(f[6]=[q("div",null,null,-1)])),_:1},8,["value"]),p.value.length>0&&C(o)(["group.create"])?(N(),L(B,{key:0,block:"",secondary:"",type:"primary",class:"mt-4",onClick:f[1]||(f[1]=()=>p.value.push(_()))},{default:r(()=>f[7]||(f[7]=[O(" Agregar grupo ")])),_:1})):G("",!0)]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])}}}),At=E({__name:"GroupCloneForm",props:{modelValue:{type:Boolean},curriculumId:{},periodId:{}},emits:["update:modelValue","success","cancel"],setup(e,{emit:i}){const o=i,n=e,u={periodReferenceId:{trigger:["change","blur"],type:"number",required:!0,message:"Este campo es requerido"}},d=V(!1),c=V([]),v=async x=>{d.value=!0,c.value=await _e(x),d.value=!1},A=le(x=>{v(x)},400),g=M({get:()=>n.modelValue,set:x=>o("update:modelValue",x)}),p=V(null),I=V(Object.assign({},{periodId:null,periodReferenceId:null,curriculumId:null})),$=async()=>{p.value&&await p.value.validate()&&(I.value.curriculumId=n.curriculumId,I.value.periodId=n.periodId,await Ne(I.value)&&(o("success"),g.value=!1))};return ue(()=>n.modelValue,async x=>{x&&await v("")}),(x,m)=>{const f=Se("LnxIcon"),T=we,k=ce,w=Re,y=ee,P=Z,R=it,F=z,B=st,l=de,s=Ie;return N(),L(s,{show:g.value,"onUpdate:show":m[2]||(m[2]=b=>g.value=b)},{default:r(()=>[t(l,{style:{width:"500px"},title:"Clonar Grupos de un Periodo a Otro",bordered:!1,size:"small",role:"dialog","aria-modal":"true",segmented:{content:!0,footer:!0}},{footer:r(()=>[t(B,{justify:"end"},{default:r(()=>[t(F,{onClick:m[1]||(m[1]=b=>g.value=!1)},{default:r(()=>m[4]||(m[4]=[O("Cancelar")])),_:1}),t(F,{type:"primary",onClick:$},{default:r(()=>m[5]||(m[5]=[O(" Aceptar ")])),_:1})]),_:1})]),default:r(()=>[t(T,{title:"¡Importante!",type:"default",closable:"",class:"mb-4"},{icon:r(()=>[t(f,{iconName:"information"})]),default:r(()=>[m[3]||(m[3]=O(" Para evitar problemas, la clonación solo está disponible si no hay matrículas en este periodo académico. Antes de continuar, verifica esta condición. "))]),_:1}),t(R,{ref_key:"formRef",ref:p,model:I.value,rules:u},{default:r(()=>[t(P,{gutter:16},{default:r(()=>[t(y,{span:24},{default:r(()=>[t(w,{label:"Periodo Académico de referencia",path:"periodReferenceId"},{default:r(()=>[t(k,{value:I.value.periodReferenceId,"onUpdate:value":m[0]||(m[0]=b=>I.value.periodReferenceId=b),placeholder:"Seleccionar Periodo Académico",filterable:"",options:c.value,loading:d.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:C(A)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),Bt=e=>[{title:"Grupos",key:"ops",width:"80px",fixed:"left",render(i){const o=i;return a(z,{type:"tertiary",onClick:()=>e(o)},{default:()=>`${o.countGroups} Grupo(s) `})}},{title:"Modulo",key:"module-group",minWidth:"200px",children:[{title:"Nombre",key:"module",minWidth:"180px"},{title:"Precios",key:"modulePrice",minWidth:"100px",render:i=>a(ne,{trigger:"click"},{trigger:()=>a(z,null,{default:()=>`Ver precios (${Array.isArray(i.modulePrice)?i.modulePrice.length:0})`}),header:()=>a(re,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var o;return a("ul",{},Array.isArray(i.modulePrice)?(o=i.modulePrice)==null?void 0:o.map(n=>a("li",{},`S/. ${n}`)):a("li",{},"No hay precios definidos"))}})}]},{title:"Curso",key:"course-group",children:[{title:"Codigo",key:"code",minWidth:"80px"},{title:"Nombre",key:"course",minWidth:"180px"},{title:"Precios Virtual",key:"virtualPrice",minWidth:"100px",render:i=>a(ne,{trigger:"click"},{trigger:()=>a(z,null,{default:()=>`Ver precios (${Array.isArray(i.virtualPrice)?i.virtualPrice.length:0})`}),header:()=>a(re,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var o;return a("ul",{},Array.isArray(i.virtualPrice)?(o=i.virtualPrice)==null?void 0:o.map(n=>a("li",{},`S/. ${n}`)):a("li",{},"No hay precios definidos"))}})},{title:"Precios Presencial",key:"presentialPrice",minWidth:"100px",render:i=>a(ne,{trigger:"click"},{trigger:()=>a(z,null,{default:()=>`Ver precios (${Array.isArray(i.presentialPrice)?i.presentialPrice.length:0})`}),header:()=>a(re,{strong:!0,depth:1},{default:()=>"Lista de precios"}),default:()=>{var o;return a("ul",{},Array.isArray(i.presentialPrice)?(o=i.presentialPrice)==null?void 0:o.map(n=>a("li",{},`S/. ${n}`)):a("li",{},"No hay precios definidos"))}})},{title:"Estado",key:"isEnabled",width:"150px",render:i=>a(dt,{type:i.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>i.isEnabled?"	Habilitado":"Deshabilitado"})}]}],Ut=(e=Ae())=>({page:e.page,total:e.total,pageSize:e.pageSize,pageCount:e.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${e.total} registros`}}),$t={style:{"border-bottom":"1px solid #e9e9e9"}},zt=E({__name:"DataTable",props:{periodId:{},curriculumId:{}},setup(e){const{hasPermission:i}=se(),o=e,n=M(()=>({periodId:o.periodId,curriculumId:o.curriculumId})),u=V(!1),d=V([]),c=V(!1),v=V(!1),A=V(null),g=Je({...Ae()}),p=V({search:null,page:g.page,pageSize:g.pageSize,filters:{...n.value}}),_=V({}),I=V([]),x=Bt(P=>{A.value=P,c.value=!0}),m=async()=>{p.value.page=1,await f()},f=async()=>{u.value=!0,_.value=await Fe(p.value),d.value=_.value.data,g.total=_.value.total,g.pageSize=_.value.per_page,g.page=_.value.current_page,g.pageCount=_.value.last_page,u.value=!1},T=le(()=>{m()},400),k=async P=>{p.value.page=P,await f()},w=async P=>{p.value.page=1,p.value.pageSize=P,await f()},y=async()=>{I.value=await Be(""),await f()};return ue(n,async(P,R)=>{p.value.filters=P,await m()},{deep:!0}),y(),(P,R)=>{const F=z,B=ee,l=K,s=Z,b=rt;return N(),Ve(ke,null,[q("div",$t,[t(s,{gutter:12,style:{padding:"12px 16px"}},{default:r(()=>[t(B,{span:12,class:"self-center"},{default:r(()=>[C(i)(["group.clone"])?(N(),L(F,{key:0,"render-icon":C(ye)("convertshape"),onClick:R[0]||(R[0]=h=>v.value=!0)},{default:r(()=>R[4]||(R[4]=[O(" Clonar grupos ")])),_:1},8,["render-icon"])):G("",!0)]),_:1}),t(B,{span:12},{default:r(()=>[t(l,{size:"large",placeholder:"Buscar",value:p.value.search,"onUpdate:value":R[1]||(R[1]=h=>p.value.search=h),onInput:C(T),clearable:""},{suffix:r(()=>[t(Pe,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),t(s,null,{default:r(()=>[t(B,{span:24},{default:r(()=>[t(b,{key:"id",remote:"",size:"small","single-line":!1,columns:C(x),data:d.value,pagination:C(Ut)(g),"pagination-show-size-picker":!0,loading:u.value,"onUpdate:page":k,"onUpdate:pageSize":w},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),Qe(P.$slots,"extra",{reLoadDataTable:m})]),t(Rt,{modelValue:c.value,"onUpdate:modelValue":R[2]||(R[2]=h=>c.value=h),item:A.value,periodId:P.periodId,laboratoryOptions:I.value,onSuccess:m},null,8,["modelValue","item","periodId","laboratoryOptions"]),t(At,{modelValue:v.value,"onUpdate:modelValue":R[3]||(R[3]=h=>v.value=h),periodId:P.periodId,curriculumId:P.curriculumId,onSuccess:m},null,8,["modelValue","periodId","curriculumId"])],64)}}}),io=E({__name:"index",setup(e){const{hasPermission:i}=se(),o=V(!1),n=V([]),u=async g=>{o.value=!0,n.value=await _e(g),o.value=!1},d=le(g=>{u(g)},400),c=V([]),v=V({period:null,curriculumId:null});return(async()=>{await u(""),c.value=await Ue()})(),(g,p)=>{const _=ce,I=ee,$=Z,x=de,m=Se("AppNotAuthorization");return C(i)(["group.create","group.edit","group.delete","group.clone"])?(N(),Ve(ke,{key:0},[t(x,{segmented:{header:!0,content:!0}},{header:r(()=>p[2]||(p[2]=[q("h6",{class:"text-sm text-gray-400"},"Carga Académica",-1),O(" Apertura de grupos ")])),action:r(()=>[t($,{gutter:"16",style:{display:"flex","justify-content":"center"}},{default:r(()=>[t(I,{span:"10"},{default:r(()=>[t(_,{value:v.value.curriculumId,"onUpdate:value":p[0]||(p[0]=f=>v.value.curriculumId=f),placeholder:"Seleccionar Plan de estudio",filterable:"",options:c.value,clearable:"","virtual-scroll":!1},null,8,["value","options"])]),_:1}),t(I,{span:"10"},{default:r(()=>[t(_,{value:v.value.period,"onUpdate:value":p[1]||(p[1]=f=>v.value.period=f),placeholder:"Seleccionar Periodo Académico",filterable:"",options:n.value,loading:o.value,clearable:"",remote:"","virtual-scroll":!1,onSearch:C(d)},null,8,["value","options","loading","onSearch"])]),_:1})]),_:1})]),_:1}),v.value.period&&v.value.curriculumId?(N(),L(zt,{key:0,periodId:v.value.period,curriculumId:v.value.curriculumId},null,8,["periodId","curriculumId"])):G("",!0)],64)):(N(),L(m,{key:1}))}}});export{io as default};
