import{d as te,a4 as ne,r as m,aC as le,aF as h,a9 as s,ab as o,ae as t,aa as e,aA as oe,ad as f,az as p,ag as r,_ as k,aT as V,a8 as g,ac as x,af as ae}from"./index-DRqPu8js.js";import{r as re}from"./icon.utils-6fJ-3dCS.js";import{u as ue}from"./useBreakpoints-B9NtrVR7.js";import{d as se,e as ie,f as de,h as me}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-DQbKSTil.js";import"./studentType.services-DDiyfHkd.js";import{i as _e}from"./student.services-zAqXH_wR.js";import"./documentType.services-Ds38ri7S.js";import{_ as pe}from"./selectables.services-BQd8Oz6S.js";import{u as ce}from"./period.stores-DfJJYNSm.js";import{_ as fe}from"./Select-Bhk-Lp7D.js";import{a as ge,_ as ve}from"./Col-CNgfr2Vq.js";import{_ as he}from"./Spin-Bxx6JrhU.js";import{_ as be}from"./Space-DpUkt9IF.js";import{_ as ye}from"./Statistic-B46ZLENE.js";import{_ as Ie,a as Ee}from"./CollapseItem-Dd8wCqR6.js";import{a as Se,_ as we}from"./ListItem-DzNz23Qb.js";import{_ as ke}from"./Thing-EBgO-C6A.js";import{_ as xe}from"./Table-D_DVJsrC.js";import{_ as Ce}from"./Tag-DIW11yL8.js";import"./Alert-DRODl6y-.js";import"./FormItem-B0e_KJJq.js";import"./get-CdE2f0gc.js";import"./Input-PHuG5EIV.js";import"./Suffix-DbP13eKO.js";import"./use-merged-state-dfDog2av.js";import"./DataTable.types-BEg5m_To.js";import"./composables-CNUmupj0.js";import"./Dropdown-hwViG8Gw.js";import"./Popover-DfaujfXt.js";const Ne={class:"p-4"},$e={class:"text-lg font-semibold w-full text-blue-800 p-2"},Me={key:1},ut=te({__name:"EnrollmentSpecialStudentView",setup(Be){const{screenSize:R}=ue(),F=ne(),b=ce(),C=m(!1),y=m(null),G=m(null),N=m([]),$=m(!0),d=m({}),T=m(!0),A=m(null),D=m(null),P=m(null),j=async c=>{let l=await de({id:c}),v=new Blob([l],{type:"application/pdf"}),E=window.URL.createObjectURL(v),_=document.getElementById("printFrame");_.src=E,_.onload=function(){var S;(S=_.contentWindow)==null||S.print()}},W=async()=>{const c=F.params.id;$.value=!0,d.value=await _e(c),$.value=!1},I=async()=>{var v;const c=F.params.id,l=(v=G.value)==null?void 0:v.id;T.value=!0,A.value=await me(c,y.value,l),T.value=!1},M=(c,l=null)=>{D.value=c,P.value=l,C.value=!0},q=async()=>{N.value=await pe(),y.value=N.value[0].value,W(),I()};return le(()=>{q()}),(c,l)=>{const v=fe,E=oe,_=ye,S=be,H=he,U=ge,B=Ce,z=ae,J=xe,K=ke,Q=we,X=Se,Y=Ee,Z=Ie,ee=ve;return s(),h(k,null,[o(E,{segmented:{header:!0,footer:!0,content:!0}},{header:e(()=>l[2]||(l[2]=[t("span",{class:"text-sm text-slate-500"}," Matricular estudiante ",-1),t("h5",{class:"text-lg font-bold text-slate-800"},"Matricula Especial",-1)])),"header-extra":e(()=>[o(v,{value:y.value,"onUpdate:value":[l[0]||(l[0]=n=>y.value=n),I],placeholder:"Seleccionar Plan de estudio",filterable:"",options:N.value,"virtual-scroll":!1,"default-value":1},null,8,["value","options"])]),action:e(()=>l[3]||(l[3]=[])),_:1}),t("div",Ne,[o(ee,{gutter:16},{default:e(()=>[o(U,{span:f(R)=="lg"?6:24},{default:e(()=>[o(E,{segmented:{header:!0,content:!0},title:"InformaciÃ³n Personal",subtitle:"Datos del estudiante"},{default:e(()=>[o(H,{show:$.value},{default:e(()=>[o(S,{vertical:""},{default:e(()=>[o(_,{class:"small",label:"Tipo de estudiante"},{default:e(()=>{var n;return[p(r((n=d.value)==null?void 0:n.studentType),1)]}),_:1}),o(_,{class:"small",label:"Documento"},{default:e(()=>{var n,u;return[p(r((n=d.value)!=null&&n.documentNumber?(u=d.value)==null?void 0:u.documentNumber:"No registrado"),1)]}),_:1}),o(_,{class:"small",label:"Nombres"},{default:e(()=>{var n;return[p(r((n=d.value)==null?void 0:n.fullName),1)]}),_:1}),o(_,{class:"small",label:"Correo electronico"},{default:e(()=>{var n,u;return[p(r((n=d.value)!=null&&n.email?(u=d.value)==null?void 0:u.email:"No registrado"),1)]}),_:1}),o(_,{class:"small",label:"Telefono"},{default:e(()=>{var n,u;return[p(r((n=d.value)!=null&&n.phone?(u=d.value)==null?void 0:u.phone:"No registrado"),1)]}),_:1})]),_:1})]),_:1},8,["show"])]),_:1})]),_:1},8,["span"]),o(U,{span:f(R)=="lg"?18:24},{default:e(()=>[o(E,{segmented:{header:!0,content:!0},title:"Matricula"},{"header-extra":e(()=>[o(B,{bordered:!1,type:f(b).enrollment?"info":"error"},{default:e(()=>{var n;return[t("strong",null,r(f(b).enrollment?(n=f(b).enrollment)==null?void 0:n.period:"No habilitado"),1)]}),_:1},8,["type"])]),default:e(()=>[o(Z,null,{default:e(()=>{var n;return[(s(!0),h(k,null,V((n=A.value)==null?void 0:n.enrollments,u=>(s(),g(Y,{key:u.moduleId,name:u.moduleId},{header:e(()=>[t("h2",$e,r(u.moduleName)+" "+r(u.isExtracurricular?"(Extracurricular)":""),1)]),default:e(()=>[o(X,{hoverable:"",clickable:""},{default:e(()=>[(s(!0),h(k,null,V(u.courses,i=>(s(),g(Q,{key:i.id},{default:e(()=>[o(K,{title:`${i.code} - ${i.name}`},{"header-extra":e(()=>[i.enrollmentGroups.length==0||Math.max(...i.enrollmentGroups.map(a=>a.grade))<11&&i.enrollmentGroups.filter(a=>a.groupStatus=="ABIERTO").length==0?(s(),g(z,{key:0,type:"primary",onClick:a=>M(i.id)},{default:e(()=>l[4]||(l[4]=[p(" Matricular ")])),_:2},1032,["onClick"])):x("",!0)]),description:e(()=>[o(S,{size:"small"},{default:e(()=>[o(B,{bordered:!1,size:"small"},{default:e(()=>[p(" Area: "+r(i.area),1)]),_:2},1024)]),_:2},1024)]),default:e(()=>[i.enrollmentGroups.length>0?(s(),g(J,{key:0,"single-line":!1},{default:e(()=>[l[6]||(l[6]=t("thead",null,[t("tr",null,[t("th",{colspan:"2"},"Matricula"),t("th",{colspan:"3"},"Grupo"),t("th",{colspan:"2"})]),t("tr",null,[t("th",null,"Periodo"),t("th",null,"Estado"),t("th",null,"Grupo"),t("th",null,"Modalidad"),t("th",null,"Estado"),t("th",{rowspan:"2"},"Nota"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(s(!0),h(k,null,V(i.enrollmentGroups,a=>{var L,O;return s(),h("tr",null,[t("td",null,[((L=f(b).enrollment)==null?void 0:L.period)==a.period?(s(),g(B,{key:0,type:"info"},{default:e(()=>[p(r(a.period),1)]),_:2},1024)):(s(),h("span",Me,r(a.period),1))]),t("td",null,r(a.enrollmentStatus),1),t("td",null,r(a.groupName),1),t("td",null,r(a.groupModality),1),t("td",null,r(a.groupStatus),1),t("td",null,r(a.grade),1),t("td",null,[((O=f(b).enrollment)==null?void 0:O.period)==a.period?(s(),g(se,{key:0,item:a,onResetEnrollment:w=>M(i.id,w),onChangeGroup:w=>M(i.id,w),onReserveEnrollment:I,onCancelEnrollment:I},null,8,["item","onResetEnrollment","onChangeGroup"])):x("",!0),a.enrollmentStatus==="MATRICULADO"?(s(),g(z,{key:1,"render-icon":f(re)("printer"),onClick:w=>j(a.id)},{default:e(()=>l[5]||(l[5]=[p(" Ficha ")])),_:2},1032,["render-icon","onClick"])):x("",!0)])])}),256))])]),_:2},1024)):x("",!0)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]}),_:1})]),_:1})]),_:1},8,["span"])]),_:1})]),l[7]||(l[7]=t("iframe",{id:"printFrame",style:{display:"none"}},null,-1)),o(ie,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=n=>C.value=n),studentId:d.value.id,curriculumId:y.value,courseId:D.value,enrollmetGroup:P.value,isSpecial:!0,onSuccess:I},null,8,["modelValue","studentId","curriculumId","courseId","enrollmetGroup"])],64)}}});export{ut as default};
