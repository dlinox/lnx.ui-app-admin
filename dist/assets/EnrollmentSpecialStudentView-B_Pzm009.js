import{d as le,a3 as oe,a5 as ae,r as p,aD as re,a8 as se,aG as y,a9 as g,ae as d,aa as u,ac as o,af as t,ab as e,aB as ue,aA as c,ah as a,_ as x,aL as P,ad as C,ag as ie}from"./index-VnlbSWoD.js";import{r as de}from"./icon.utils-D7BmKQQ8.js";import{u as me}from"./useBreakpoints-BH0TdeY-.js";import{d as pe,e as _e,f as ce,h as fe}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-Bndp10u3.js";import"./studentType.services-Dqx7mIxW.js";import{j as ge}from"./student.services-CsYUJyEb.js";import"./documentType.services-CKkynVC2.js";import{_ as ve}from"./selectables.services-BWztZSf7.js";import{u as he}from"./period.stores-DAayIYQf.js";import{_ as ye}from"./Select-Df7rPK9_.js";import{a as be,_ as Ie}from"./Col-D62vBcWk.js";import{_ as ke}from"./Spin-DAxT37N1.js";import{_ as we}from"./Space-BYw6XnFF.js";import{_ as Ee}from"./Statistic-BqRbOeQv.js";import{_ as Ne,a as Se}from"./CollapseItem-CJd05HNU.js";import{a as xe,_ as Ce}from"./ListItem-CMLNF079.js";import{_ as $e}from"./Thing-DAg0qjqL.js";import{_ as Me}from"./Table-B2H9w22E.js";import{N as Be}from"./Tag-D-Mvyznn.js";import"./Alert-hJa_Wfyo.js";import"./FormItem-wbeg7Rmc.js";import"./get-C6YDaK3p.js";import"./Input-BjvMqLmR.js";import"./Suffix-DHkxWb8H.js";import"./use-merged-state-DLxtUdHo.js";import"./Switch-DcbwJYPH.js";import"./DataTable.types-BEg5m_To.js";import"./composables-bTB8ALIv.js";import"./Dropdown-FcmlDduf.js";import"./Popover-CxKYmMF9.js";const Ae={class:"p-4"},Ve={class:"text-lg font-semibold w-full text-blue-800 p-2"},Pe={key:1},pt=le({__name:"EnrollmentSpecialStudentView",setup(De){const{hasPermission:G}=oe(),{screenSize:D}=me(),R=ae(),v=he(),$=p(!1),b=p(null),O=p(null),M=p([]),B=p(!0),m=p({}),F=p(!0),T=p(null),z=p(null),L=p(null),W=async f=>{let l=await ce({id:f}),h=new Blob([l],{type:"application/pdf"}),k=window.URL.createObjectURL(h),_=document.getElementById("printFrame");_.src=k,_.onload=function(){var w;(w=_.contentWindow)==null||w.print()}},q=async()=>{const f=R.params.id;B.value=!0,m.value=await ge(f),B.value=!1},I=async()=>{var h;const f=R.params.id,l=(h=O.value)==null?void 0:h.id;F.value=!0,T.value=await fe(f,b.value,l),F.value=!1},A=(f,l=null)=>{z.value=f,L.value=l,$.value=!0},H=async()=>{M.value=await ve(),b.value=M.value[0].value,q(),I()};return re(()=>{H()}),(f,l)=>{const h=ye,k=ue,_=Ee,w=we,J=ke,U=be,V=Be,j=ie,K=Me,Q=$e,X=Ce,Y=xe,Z=Se,ee=Ne,te=Ie,ne=se("AppNotAuthorization");return d(G)(["enrollment.create-special"])?(u(),y(x,{key:0},[o(k,{segmented:{header:!0,footer:!0,content:!0}},{header:e(()=>l[2]||(l[2]=[t("span",{class:"text-sm text-slate-500"}," Matricular estudiante ",-1),t("h5",{class:"text-lg font-bold text-slate-800"},"Matricula Especial",-1)])),"header-extra":e(()=>[o(h,{value:b.value,"onUpdate:value":[l[0]||(l[0]=n=>b.value=n),I],placeholder:"Seleccionar Plan de estudio",filterable:"",options:M.value,"virtual-scroll":!1,"default-value":1},null,8,["value","options"])]),action:e(()=>l[3]||(l[3]=[])),_:1}),t("div",Ae,[o(te,{gutter:16},{default:e(()=>[o(U,{span:d(D)=="lg"?6:24},{default:e(()=>[o(k,{segmented:{header:!0,content:!0},title:"InformaciÃ³n Personal",subtitle:"Datos del estudiante"},{default:e(()=>[o(J,{show:B.value},{default:e(()=>[o(w,{vertical:""},{default:e(()=>[o(_,{class:"small",label:"Tipo de estudiante"},{default:e(()=>{var n;return[c(a((n=m.value)==null?void 0:n.studentType),1)]}),_:1}),o(_,{class:"small",label:"Documento"},{default:e(()=>{var n,s;return[c(a((n=m.value)!=null&&n.documentNumber?(s=m.value)==null?void 0:s.documentNumber:"No registrado"),1)]}),_:1}),o(_,{class:"small",label:"Nombres"},{default:e(()=>{var n;return[c(a((n=m.value)==null?void 0:n.fullName),1)]}),_:1}),o(_,{class:"small",label:"Correo electronico"},{default:e(()=>{var n,s;return[c(a((n=m.value)!=null&&n.email?(s=m.value)==null?void 0:s.email:"No registrado"),1)]}),_:1}),o(_,{class:"small",label:"Telefono"},{default:e(()=>{var n,s;return[c(a((n=m.value)!=null&&n.phone?(s=m.value)==null?void 0:s.phone:"No registrado"),1)]}),_:1})]),_:1})]),_:1},8,["show"])]),_:1})]),_:1},8,["span"]),o(U,{span:d(D)=="lg"?18:24},{default:e(()=>[o(k,{segmented:{header:!0,content:!0},title:"Matricula"},{"header-extra":e(()=>[o(V,{bordered:!1,type:d(v).enrollment?"info":"error"},{default:e(()=>{var n;return[t("strong",null,a(d(v).enrollment?(n=d(v).enrollment)==null?void 0:n.period:"No habilitado"),1)]}),_:1},8,["type"])]),default:e(()=>[o(ee,null,{default:e(()=>{var n;return[(u(!0),y(x,null,P((n=T.value)==null?void 0:n.enrollments,s=>(u(),g(Z,{key:s.moduleId,name:s.moduleId},{header:e(()=>[t("h2",Ve,a(s.moduleName)+" "+a(s.isExtracurricular?"(Extracurricular)":""),1)]),default:e(()=>[o(Y,{hoverable:"",clickable:""},{default:e(()=>[(u(!0),y(x,null,P(s.courses,i=>(u(),g(X,{key:i.id},{default:e(()=>[o(Q,{title:`${i.code} - ${i.name}`},{"header-extra":e(()=>{var r;return[(r=d(v).enrollment)!=null&&r.period&&(i.enrollmentGroups.length==0||i.enrollmentGroups.filter(E=>{var N;return E.period==((N=d(v).enrollment)==null?void 0:N.period)}).length==0)?(u(),g(j,{key:0,type:"primary",onClick:E=>A(i.id)},{default:e(()=>l[4]||(l[4]=[c(" Matricular ")])),_:2},1032,["onClick"])):C("",!0)]}),description:e(()=>[o(w,{size:"small"},{default:e(()=>[o(V,{bordered:!1,size:"small"},{default:e(()=>[c(" Area: "+a(i.area),1)]),_:2},1024)]),_:2},1024)]),default:e(()=>[i.enrollmentGroups.length>0?(u(),g(K,{key:0,"single-line":!1},{default:e(()=>[l[6]||(l[6]=t("thead",null,[t("tr",null,[t("th",{colspan:"2"},"Matricula"),t("th",{colspan:"3"},"Grupo"),t("th",{colspan:"2"})]),t("tr",null,[t("th",null,"Periodo"),t("th",null,"Estado"),t("th",null,"Grupo"),t("th",null,"Modalidad"),t("th",null,"Estado"),t("th",{rowspan:"2"},"Nota"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(u(!0),y(x,null,P(i.enrollmentGroups,r=>{var E,N;return u(),y("tr",null,[t("td",null,[((E=d(v).enrollment)==null?void 0:E.period)==r.period?(u(),g(V,{key:0,type:"info"},{default:e(()=>[c(a(r.period),1)]),_:2},1024)):(u(),y("span",Pe,a(r.period),1))]),t("td",null,a(r.enrollmentStatus),1),t("td",null,a(r.groupName),1),t("td",null,a(r.groupModality),1),t("td",null,a(r.groupStatus),1),t("td",null,a(r.grade),1),t("td",null,[((N=d(v).enrollment)==null?void 0:N.period)==r.period?(u(),g(pe,{key:0,item:r,onResetEnrollment:S=>A(i.id,S),onChangeGroup:S=>A(i.id,S),onReserveEnrollment:I,onCancelEnrollment:I},null,8,["item","onResetEnrollment","onChangeGroup"])):C("",!0),r.enrollmentStatus==="MATRICULADO"?(u(),g(j,{key:1,"render-icon":d(de)("printer"),onClick:S=>W(r.id)},{default:e(()=>l[5]||(l[5]=[c(" Ficha ")])),_:2},1032,["render-icon","onClick"])):C("",!0)])])}),256))])]),_:2},1024)):C("",!0)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]}),_:1})]),_:1})]),_:1},8,["span"])]),_:1})]),l[7]||(l[7]=t("iframe",{id:"printFrame",style:{display:"none"}},null,-1)),o(_e,{modelValue:$.value,"onUpdate:modelValue":l[1]||(l[1]=n=>$.value=n),studentId:m.value.id,curriculumId:b.value,courseId:z.value,enrollmetGroup:L.value,isSpecial:!0,onSuccess:I},null,8,["modelValue","studentId","curriculumId","courseId","enrollmetGroup"])],64)):(u(),g(ne,{key:1}))}}});export{pt as default};
