import{b as B,_ as D,h as M}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-0bhR_yRn.js";import{i as S}from"./DataTable.types-DKc2i3jV.js";import{d as x,aI as F,ab as v,a9 as b,a4 as N,ad as R,h as U,r as u,ai as O,aj as w,ac as z,aa as o,a6 as m,ah as L,ak as j,_ as V,ae as q,al as A}from"./index-BDy3jz-R.js";import{u as H}from"./period.stores-BvmieFtA.js";import{d as J}from"./debounce.utils-DqPPCsFD.js";import{_ as K,a as Q}from"./Col-C2AyWxkb.js";import{_ as X}from"./FormItem-DAU9UqDA.js";import{_ as Y}from"./DataTable-BjnUjyJ9.js";import"./icon.utils-BzaQiRL0.js";import"./Alert-BTRVvkM7.js";import"./Thing-Db17URGU.js";import"./composables-D20BIpNr.js";import"./Dropdown-DschnT-y.js";import"./get-I814HMgj.js";import"./Tooltip-BC78MQpo.js";const Z=x({__name:"DataTableOp",props:{item:{}},emits:["openForm","success"],setup(l,{emit:i}){const a=i,t=H(),n=async()=>{};return F(()=>{n()}),(s,e)=>{var d;return((d=v(t).enrollment)==null?void 0:d.name)==s.item.period?(b(),N(B,{key:0,item:s.item,onResetEnrollment:e[0]||(e[0]=p=>a("openForm",p)),onChangeGroup:e[1]||(e[1]=p=>a("openForm",p)),onReserveEnrollment:e[2]||(e[2]=p=>a("success")),onCancelEnrollment:e[3]||(e[3]=p=>a("success"))},null,8,["item"])):R("",!0)}}}),ee=(l,i)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(a){const t=a;return U(Z,{onOpenForm:()=>l(t),onSuccess:()=>i(),item:t},{default:()=>"Editar"})}},{title:"Estado de matrícula",key:"enrollmentStatus",minWidth:"150px"},{title:"Estudiante",key:"student",minWidth:"300px"},{title:"Módulo",key:"module",minWidth:"200px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Grupo",key:"group",minWidth:"100px"},{title:"Modalidad",key:"modality",minWidth:"100px"},{title:"Laboratorio",key:"laboratory",minWidth:"150px"},{title:"Período",key:"period",minWidth:"100"}],te=(l=S())=>({page:l.page,total:l.total,pageSize:l.pageSize,pageCount:l.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${l.total} registros`}}),ae={style:{"border-bottom":"1px solid #e9e9e9"}},ne=x({__name:"DataTable",setup(l){const i=u(!1),a=u(!1),t=u([]),n=O({...S()}),s=u({search:null,page:n.page,pageSize:n.pageSize}),e=u({}),d=u(null),p=u(null),h=u(null),k=u(null),C=r=>{d.value=r.courseId,h.value=r.studentId,k.value=r.curriculumId,p.value=r,i.value=!0},c=async()=>{s.value.page=1,await _()},$=ee(C,c),_=async()=>{a.value=!0,e.value=await M(s.value),t.value=e.value.data,n.total=e.value.total,n.pageSize=e.value.per_page,n.page=e.value.current_page,n.pageCount=e.value.last_page,a.value=!1},E=J(()=>{c()},400),T=async r=>{s.value.page=r,await _()},W=async r=>{s.value.page=1,s.value.pageSize=r,await _()};return(async()=>{await _()})(),(r,g)=>{const f=K,G=X,I=Q,P=Y;return b(),w(V,null,[z("div",ae,[o(I,{gutter:12,style:{padding:"12px 16px"}},{default:m(()=>[o(f,{span:12}),o(f,{span:12},{default:m(()=>[o(G,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":g[0]||(g[0]=y=>s.value.search=y),onInput:v(E),clearable:""},{suffix:m(()=>[o(L,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),o(I,null,{default:m(()=>[o(f,{span:24},{default:m(()=>[o(P,{key:"id",remote:"","single-line":!1,columns:v($),data:t.value,pagination:v(te)(n),"pagination-show-size-picker":!0,loading:a.value,"onUpdate:page":T,"onUpdate:pageSize":W},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),j(r.$slots,"extra",{reLoadDataTable:c})]),o(D,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=y=>i.value=y),studentId:h.value,curriculumId:k.value,courseId:d.value,enrollmetGroup:p.value,onSuccess:c},null,8,["modelValue","studentId","curriculumId","courseId","enrollmetGroup"])],64)}}}),be=x({__name:"EnrollmentVirtualView",setup(l){return(async()=>{})(),(a,t)=>{const n=A;return b(),w(V,null,[o(n,{segmented:{header:!0,content:!0}},{header:m(()=>t[0]||(t[0]=[z("h6",{style:{color:"#999",margin:"0"}}," Gestión matrícula virtual ",-1),q(" Matrícula virtual ")])),"header-extra":m(()=>t[1]||(t[1]=[])),_:1}),o(ne)],64)}}});export{be as default};
