import{r as x}from"./icon.utils-DnuXdNV1.js";import{_ as T,a as O,b as U}from"./StudentForm.vue_vue_type_script_setup_true_lang-HRqnMQgd.js";import{d as A}from"./debounce.utils-rmPTix7t.js";import{a as E,_ as q}from"./LnxIcon.vue_vue_type_script_setup_true_lang-tM4SdBca.js";import{i as z,_ as S,c as G,a as H}from"./DataTable.types-C3XSPyHT.js";import{d as h,a7 as k,a3 as L,a4 as l,a8 as t,ac as I,h as b,r as d,af as R,ag as N,ah as D,ai as Z,Z as P,a9 as f,ae as j,ab as C}from"./index-Bqe-vxMq.js";import{u as J,_ as K}from"./composables-B9b5AZp0.js";import{d as Q}from"./studentType.services-pqEZOUlZ.js";import{d as X}from"./documentType.services-BaOm9PiV.js";import{_ as Y}from"./Input-yPERYFUO.js";import"./get-C8gX6CwU.js";import"./genders.constans-ZqlXwVVz.js";import"./useBreakpoints-CGGSJYYs.js";import"./FormItem-BBmdDte0.js";import"./use-keyboard-BPlN3GQF.js";import"./Forward-DN8GWHg-.js";const ee=h({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(s,{emit:n}){const a=n,e=J(),c=[{label:"Editar",key:"edit",icon:x("edit-2"),props:{onClick:()=>a("edit")}},{label:"Eliminar",key:"delete",icon:x("trash","red"),props:{style:{color:"red"},onClick:()=>{e.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{a("delete")}})}}}];return(i,o)=>{const r=I,p=q;return k(),L(p,{options:c,placement:"bottom-start"},{default:l(()=>[t(r,null,{default:l(()=>[t(E,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),te=(s,n)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(a){const e=a;return b(ee,{onEdit:()=>{s(e)},onDelete:()=>{n(e)},item:e},{default:()=>"Editar"})}},{title:"Codigo",key:"code",minWidth:"120px"},{title:"Número de documento",key:"documentNumber",minWidth:"120px"},{title:"Nombre",key:"name",minWidth:"120px"},{title:"Apellido Paterno",key:"lastNameFather",minWidth:"120px"},{title:"Apellido Materno",key:"lastNameMother",minWidth:"120px"},{title:"Género",key:"gender",minWidth:"150px",render:a=>b(S,{tertiary:!0,bordered:!1,strong:!0},{default:()=>a.gender===1?"MASCULINO":a.gender===2?"FEMENINO":"NO ESPECIFICADO"})},{title:"Email",key:"email",minWidth:"80px"},{title:"Teléfono",key:"phone",minWidth:"100px"},{title:"Tipo de estudiante",key:"studentType",minWidth:"150px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:a=>b(S,{type:a.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>a.isEnabled?"	Habilitado":"Deshabilitado"})}],ae=(s=z())=>({page:s.page,total:s.total,pageSize:s.pageSize,pageCount:s.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${s.total} registros`}}),ne={style:{"border-bottom":"1px solid #e9e9e9"}},oe=h({__name:"DataTable",setup(s){const n=d(!1),a=d([]),e=d(!1),c=d(null),i=R({...z()}),o=d({search:null,page:i.page,pageSize:i.pageSize}),r=d({}),p=d({}),V=te(u=>{c.value=u,e.value=!0},async u=>{await U(u),await m()}),m=async()=>{o.value.page=1,await _()},_=async()=>{n.value=!0,r.value=await O(o.value),a.value=r.value.data,i.total=r.value.total,i.pageSize=r.value.per_page,i.page=r.value.current_page,i.pageCount=r.value.last_page,n.value=!1},B=A(()=>{m()},400),W=async u=>{o.value.page=u,await _()},F=async u=>{o.value.page=1,o.value.pageSize=u,await _()};return(async()=>{await _(),p.value.studentTypesItems=await Q(),p.value.documentTypesItems=await X()})(),(u,g)=>{const v=H,M=Y,w=G,$=K;return k(),N(P,null,[D("div",ne,[t(w,{gutter:12,style:{padding:"12px 16px"}},{default:l(()=>[t(v,{span:12}),t(v,{span:12},{default:l(()=>[t(M,{size:"large",placeholder:"Buscar",value:o.value.search,"onUpdate:value":g[0]||(g[0]=y=>o.value.search=y),onInput:f(B),clearable:""},{suffix:l(()=>[t(E,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),t(w,null,{default:l(()=>[t(v,{span:24},{default:l(()=>[t($,{key:"id",remote:"","single-line":!1,columns:f(V),data:a.value,pagination:f(ae)(i),"pagination-show-size-picker":!0,loading:n.value,"onUpdate:page":W,"onUpdate:pageSize":F},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),Z(u.$slots,"extra",{reLoadDataTable:m,selectables:p.value})]),t(T,{modelValue:e.value,"onUpdate:modelValue":g[1]||(g[1]=y=>e.value=y),item:c.value,onSuccess:m,selectables:p.value},null,8,["modelValue","item","selectables"])],64)}}}),Se=h({__name:"index",setup(s){const n=d(!1);return(a,e)=>{const c=I,i=j;return k(),N(P,null,[t(i,{segmented:{header:!0,content:!0}},{header:l(()=>e[2]||(e[2]=[D("h6",{style:{color:"#999",margin:"0"}},"Gestión de Estudiantes",-1),C(" Estudiantes ")])),"header-extra":l(()=>[t(c,{"render-icon":f(x)("additem"),onClick:e[0]||(e[0]=o=>n.value=!0)},{default:l(()=>e[3]||(e[3]=[C(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),t(oe,null,{extra:l(({reLoadDataTable:o,selectables:r})=>[t(T,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=p=>n.value=p),item:null,onSuccess:o,selectables:r},null,8,["modelValue","onSuccess","selectables"])]),_:1})],64)}}});export{Se as default};
