import{r as A}from"./icon.utils-DDsaHdGI.js";import{_ as P,a as Y,b as Z,c as ee,d as te,e as ae}from"./academicSupervision.services-0smcYSwa.js";import{d as C,a8 as F,a9 as T,aa as t,ab as e,af as E,aG as q,h as oe,e as U,r as p,j as ne,a7 as le,aA as N,az as z,bb as se,aH as ie,aI as re,aF as L,_ as M,ae as D,aJ as ue,ad as h}from"./index-C9c7JGRw.js";import{_ as pe,a as de}from"./FormItem-BhYV6jh0.js";import{_ as G,a as W}from"./Col-DDZ8Pssk.js";import{_ as ce}from"./Alert-CjX6nSE_.js";import{_ as me}from"./Select-Bv507AmW.js";import{_ as j}from"./Input-MpWbaTbN.js";import{_ as _e}from"./Space-B7YONKnB.js";import{i as H}from"./DataTable.types-BEg5m_To.js";import{u as ve}from"./composables-BO6PXfsE.js";import{_ as ge}from"./Dropdown-CKOP4Jno.js";import{d as fe}from"./debounce.utils-DqPPCsFD.js";import{_ as be}from"./DataTable-3NU7cn1U.js";import"./get-DMitJf1L.js";import"./Popover-U50KL7Ta.js";import"./use-merged-state-BO0aND_o.js";import"./Suffix-BAJCskMY.js";import"./Tag-CIenDrrK.js";import"./get-slot-Bk_rJcZu.js";import"./Tooltip-BbKh1Nso.js";const ye=C({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(r,{emit:i}){const m=ve(),a=i,u=[{label:"Editar",key:"edit",icon:A("edit-2"),props:{onClick:()=>a("edit")}},{label:"Eliminar",key:"delete",icon:A("trash","red"),props:{style:{color:"red"},onClick:()=>{m.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{a("delete")}})}}}];return(l,s)=>{const n=E,g=ge;return T(),F(g,{options:u,placement:"bottom-start"},{default:t(()=>[e(n,null,{default:t(()=>[e(q,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),we=(r,i)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(m){const a=m;return oe(ye,{onEdit:()=>{r(a)},onDelete:()=>{i(a)},item:a},{default:()=>"Editar"})}},{title:"Periodo",key:"period",minWidth:"120px"},{title:"Docente",key:"teacher",minWidth:"120px"},{title:"Curso",key:"course",minWidth:"120px"},{title:"Tipo",key:"type",width:"120px"},{title:"Observaciones",key:"observations",minWidth:"200px"}],xe=(r=H())=>({page:r.page,total:r.total,pageSize:r.pageSize,pageCount:r.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${r.total} registros`}}),J=C({__name:"Form",props:{item:{},modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(r,{emit:i}){const m=i,a=r,u=U({get:()=>a.modelValue,set:_=>m("update:modelValue",_)}),l=p(!1),s=p(null),n=p(P()),g=p(null),R=U(()=>({...Y()})),S=p([]),f=async()=>{if(s.value){const _=await s.value.validate();let o=null;_&&(l.value=!0,o=await Z(n.value),o.status?(m("success"),u.value=!1):g.value=o.data)}l.value=!1},b=async()=>{n.value=a.item?{...a.item,groupId:a.item.groupId}:P(),S.value=await ee()};return ne(u,_=>{_&&(g.value=null,b())}),(_,o)=>{const V=le("LnxIcon"),B=se,d=ce,v=W,y=me,w=de,I=j,$=G,x=pe,O=E,K=_e,Q=N,X=ie;return T(),F(X,{show:u.value,"onUpdate:show":o[4]||(o[4]=c=>u.value=c)},{default:t(()=>[e(Q,{style:{width:"500px"},title:_.item?"Editar registro":"Nuevo registro",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:t(()=>[e(K,{justify:"end"},{default:t(()=>[e(O,{tertiary:"",size:"large",onClick:o[3]||(o[3]=c=>u.value=!1),disabled:l.value},{default:t(()=>o[6]||(o[6]=[z(" Cancelar ")])),_:1},8,["disabled"]),e(O,{size:"large",type:"primary",onClick:f,loading:l.value},{default:t(()=>o[7]||(o[7]=[z(" Guardar ")])),_:1},8,["loading"])]),_:1})]),default:t(()=>[e(x,{ref_key:"formRef",ref:s,model:n.value,rules:R.value,size:"large"},{default:t(()=>[e($,{gutter:16},{default:t(()=>[e(v,{span:24},{default:t(()=>[e(d,{stype:"default",closable:"",class:"mb-2"},{icon:t(()=>[e(B,null,{default:t(()=>[e(V,{iconName:"info-circle"})]),_:1})]),default:t(()=>[o[5]||(o[5]=z(" Solo se listan los grupos que todavía están activos o disponibles para matrícula. "))]),_:1})]),_:1}),e(v,{span:24},{default:t(()=>{var c;return[e(w,{path:"groupId",label:"Grupo - Docente","show-require-mark":!0,feedback:(c=g.value)==null?void 0:c.groupId},{default:t(()=>[e(y,{value:n.value.groupId,"onUpdate:value":o[0]||(o[0]=k=>n.value.groupId=k),options:S.value,placeholder:"Seleccione un grupo",clearable:!0,loading:l.value,disabled:l.value},null,8,["value","options","loading","disabled"])]),_:1},8,["feedback"])]}),_:1}),e(v,{span:24},{default:t(()=>{var c;return[e(w,{path:"type",label:"Tipo","show-require-mark":!0,feedback:(c=g.value)==null?void 0:c.type},{default:t(()=>[e(y,{value:n.value.type,"onUpdate:value":o[1]||(o[1]=k=>n.value.type=k),options:[{label:"TARDE",value:"TARDE"},{label:"FALTA",value:"FALTA"},{label:"OTROS",value:"OTROS"}],placeholder:"Seleccione el tipo",clearable:!0},null,8,["value"])]),_:1},8,["feedback"])]}),_:1}),e(v,{span:24},{default:t(()=>{var c;return[e(w,{path:"observations",label:"Observaciones","show-require-mark":!0,feedback:(c=g.value)==null?void 0:c.observations},{default:t(()=>[e(I,{value:n.value.observations,"onUpdate:value":o[2]||(o[2]=k=>n.value.observations=k),type:"textarea",placeholder:"Ingrese las observaciones",disabled:l.value},null,8,["value","disabled"])]),_:1},8,["feedback"])]}),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),ke={style:{"border-bottom":"1px solid #e9e9e9"}},Se=C({__name:"DataTable",setup(r){const i=p(!1),m=p([]),a=p(!1),u=p(null),l=re({...H()}),s=p({search:null,page:l.page,pageSize:l.pageSize}),n=p({}),S=we(d=>{u.value=d,a.value=!0},async d=>{await ae(d),await f()}),f=async()=>{s.value.page=1,await b()},b=async()=>{i.value=!0,n.value=await te(s.value),m.value=n.value.data,l.total=n.value.total,l.pageSize=n.value.per_page,l.page=n.value.current_page,l.pageCount=n.value.last_page,i.value=!1},_=fe(()=>{f()},400),o=async d=>{s.value.page=d,await b()},V=async d=>{s.value.page=1,s.value.pageSize=d,await b()};return(async()=>{await b()})(),(d,v)=>{const y=W,w=j,I=G,$=be;return T(),L(M,null,[D("div",ke,[e(I,{gutter:12,style:{padding:"12px 16px"}},{default:t(()=>[e(y,{span:12}),e(y,{span:12},{default:t(()=>[e(w,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":v[0]||(v[0]=x=>s.value.search=x),onInput:h(_),clearable:""},{suffix:t(()=>[e(q,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(y,{span:24},{default:t(()=>[e($,{key:"id",remote:"","single-line":!1,columns:h(S),data:m.value,pagination:h(xe)(l),"pagination-show-size-picker":!0,loading:i.value,"onUpdate:page":o,"onUpdate:pageSize":V},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),ue(d.$slots,"extra",{reLoadDataTable:f})]),e(J,{modelValue:a.value,"onUpdate:modelValue":v[1]||(v[1]=x=>a.value=x),item:u.value,onSuccess:f},null,8,["modelValue","item"])],64)}}}),We=C({__name:"AcademicSupervisionView",setup(r){const i=p(!1);return(m,a)=>{const u=E,l=N;return T(),L(M,null,[e(l,{segmented:{header:!0,content:!0}},{header:t(()=>a[2]||(a[2]=[D("span",{class:"text-sm text-slate-500"}," Registro de supervisión académica ",-1),D("h5",{class:"text-lg font-bold text-slate-800"},"Supervisión académica",-1)])),"header-extra":t(()=>[e(u,{"render-icon":h(A)("additem"),onClick:a[0]||(a[0]=s=>i.value=!0)},{default:t(()=>a[3]||(a[3]=[z(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),e(Se,null,{extra:t(({reLoadDataTable:s})=>[e(J,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=n=>i.value=n),item:null,onSuccess:s},null,8,["modelValue","onSuccess"])]),_:1})],64)}}});export{We as default};
