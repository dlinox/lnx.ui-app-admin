import{r as $}from"./icon.utils-Cdau1lmo.js";import{_ as K,a as Q,b as X}from"./studentType.services-B4fxJyd-.js";import{d as z,a8 as R,a9 as k,aa as t,ab as e,af as U,aG as F,h as N,e as Y,r as m,j as Z,aA as H,az as h,aH as ee,aI as te,aF as j,_ as q,ae as D,aJ as ae,ad as E}from"./index--Fiy2I4t.js";import{_ as ne,a as oe}from"./FormItem-64Oo6hS7.js";import{_ as A,a as G}from"./Col-Bhohzmu6.js";import{_ as J}from"./Input-CfWAw0Qs.js";import{_ as le}from"./Space-CHReEK5D.js";import{_ as se}from"./Switch-DDt0T-WF.js";import{d as ie}from"./debounce.utils-DqPPCsFD.js";import{i as L}from"./DataTable.types-BEg5m_To.js";import{u as re}from"./composables-CN96FFP-.js";import{_ as ue}from"./Dropdown-B9vn1Rts.js";import{_ as pe}from"./Tag-CmlrV2vM.js";import{_ as de}from"./DataTable-D69-Uvxy.js";import"./get-BxuUz3sF.js";import"./Suffix-Cejid3DV.js";import"./use-merged-state-Hew3oQWq.js";import"./get-slot-Bk_rJcZu.js";import"./Popover-_nZkNipR.js";import"./Tooltip-B09_9Vum.js";import"./Select-JHMV7BBf.js";const me=z({__name:"DataTableOp",props:{item:{}},emits:["edit","delete"],setup(u,{emit:r}){const i=r,a=re(),p=[{label:"Editar",key:"edit",icon:$("edit-2"),props:{onClick:()=>i("edit")}},{label:"Eliminar",key:"delete",icon:$("trash","red"),props:{style:{color:"red"},onClick:()=>{a.warning({title:"Confirmar",content:"¿Está seguro que desea eliminar este registro?",positiveText:"Eliminar",negativeText:"Cancelar",closable:!1,showIcon:!1,negativeButtonProps:{secondary:!0,type:"tertiary",size:"large"},positiveButtonProps:{size:"large",type:"error"},onPositiveClick:()=>{i("delete")}})}}}];return(l,s)=>{const o=U,c=ue;return k(),R(c,{options:p,placement:"bottom-start"},{default:t(()=>[e(o,null,{default:t(()=>[e(F,{"icon-name":"setting-5",size:"20"})]),_:1})]),_:1})}}}),_e=(u,r)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(i){const a=i;return N(me,{onEdit:()=>{u(a)},onDelete:()=>{r(a)},item:a},{default:()=>"Editar"})}},{title:"Nombre",key:"name",minWidth:"300px"},{title:"Habilitado",key:"isEnabled",width:"150px",render:i=>N(pe,{type:i.isEnabled?"success":"error",tertiary:!0,bordered:!1,strong:!0},{default:()=>i.isEnabled?"	Habilitado":"Deshabilitado"})}],ce=(u=L())=>({page:u.page,total:u.total,pageSize:u.pageSize,pageCount:u.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${u.total} registros`}}),M=()=>({id:null,name:null,isEnabled:!0}),fe=()=>({name:[{required:!0,trigger:["blur","input"],message:"Obligatorio"}]}),W=z({__name:"StudentTypeForm",props:{item:{},modelValue:{type:Boolean}},emits:["update:modelValue","success"],setup(u,{emit:r}){const i=r,a=u,p=Y({get:()=>a.modelValue,set:d=>i("update:modelValue",d)}),l=m(!1),s=m(null),o=m(M()),c=m(null),B=m({...fe()}),T=async()=>{if(s.value){const d=await s.value.validate();let n=null;d?(l.value=!0,n=await K(o.value),n.status?(i("success"),p.value=!1):c.value=n.data):console.log("Formulario inválido")}l.value=!1},v=()=>{console.log("Inicializando formulario"),o.value=a.item?{...a.item}:M()};return Z(p,d=>{d&&v()}),(d,n)=>{const C=J,x=oe,S=G,_=se,f=le,b=A,I=ne,y=U,V=H,w=ee;return k(),R(w,{show:p.value,"onUpdate:show":n[4]||(n[4]=g=>p.value=g)},{default:t(()=>[e(V,{style:{width:"500px"},title:d.item?"EDITAR TIPO DE DOCUMENTO":"NUEVO TIPO DE DOCUMENTO",segmented:{content:!0,footer:!0},size:"small",role:"dialog","aria-modal":"true"},{footer:t(()=>[e(f,{justify:"end"},{default:t(()=>[e(y,{tertiary:"",size:"large",onClick:n[3]||(n[3]=g=>p.value=!1),disabled:l.value},{default:t(()=>n[5]||(n[5]=[h(" Cancelar ")])),_:1},8,["disabled"]),e(y,{size:"large",type:"primary",onClick:T,loading:l.value},{default:t(()=>n[6]||(n[6]=[h("Guardar")])),_:1},8,["loading"])]),_:1})]),default:t(()=>[e(I,{ref_key:"formRef",ref:s,model:o.value,rules:B.value,size:"large"},{default:t(()=>[e(b,null,{default:t(()=>[e(S,{span:"24"},{default:t(()=>{var g;return[e(x,{path:"name",label:"Nombre",feedback:(g=c.value)==null?void 0:g.name},{default:t(()=>{var O;return[e(C,{status:((O=c.value)==null?void 0:O.name)!=null?"error":"",value:o.value.name,"onUpdate:value":n[0]||(n[0]=P=>o.value.name=P),onInput:n[1]||(n[1]=P=>c.value!=null?c.value.name=null:()=>{})},null,8,["status","value"])]}),_:1},8,["feedback"])]}),_:1}),e(S,{span:"24"},{default:t(()=>[e(f,{justify:"end"},{default:t(()=>[e(x,{"label-placement":"left",label:"¿Habilitado?",path:"isEnabled","show-feedback":!1},{default:t(()=>[e(_,{value:o.value.isEnabled,"onUpdate:value":n[2]||(n[2]=g=>o.value.isEnabled=g)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),ge={style:{"border-bottom":"1px solid #e9e9e9"}},ve=z({__name:"DataTable",setup(u){const r=m(!1),i=m([]),a=m(!1),p=m(null),l=te({...L()}),s=m({search:null,page:l.page,pageSize:l.pageSize}),o=m({}),T=_e(_=>{p.value=_,a.value=!0},async _=>{await X(_),await v()}),v=async()=>{s.value.page=1,await d()},d=async()=>{r.value=!0,o.value=await Q(s.value),i.value=o.value.data,l.total=o.value.total,l.pageSize=o.value.per_page,l.page=o.value.current_page,l.pageCount=o.value.last_page,r.value=!1},n=ie(()=>{v()},400),C=async _=>{s.value.page=_,await d()},x=async _=>{s.value.page=1,s.value.pageSize=_,await d()};return(async()=>{await d()})(),(_,f)=>{const b=G,I=J,y=A,V=de;return k(),j(q,null,[D("div",ge,[e(y,{gutter:12,style:{padding:"12px 16px"}},{default:t(()=>[e(b,{span:12}),e(b,{span:12},{default:t(()=>[e(I,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":f[0]||(f[0]=w=>s.value.search=w),onInput:E(n),clearable:""},{suffix:t(()=>[e(F,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(b,{span:24},{default:t(()=>[e(V,{key:"id",remote:"","single-line":!1,columns:E(T),data:i.value,pagination:E(ce)(l),"pagination-show-size-picker":!0,loading:r.value,"onUpdate:page":C,"onUpdate:pageSize":x},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),ae(_.$slots,"extra",{reLoadDataTable:v})]),e(W,{modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=w=>a.value=w),item:p.value,onSuccess:v},null,8,["modelValue","item"])],64)}}}),Re=z({__name:"index",setup(u){const r=m(!1);return(i,a)=>{const p=U,l=H;return k(),j(q,null,[e(l,{segmented:{header:!0,content:!0}},{header:t(()=>a[2]||(a[2]=[D("span",{class:"text-sm text-slate-500"}," Gestión de Tipos de Estudiante",-1),D("h5",{class:"text-lg font-bold text-slate-800"},"Tipos de Estudiante",-1)])),"header-extra":t(()=>[e(p,{"render-icon":E($)("additem"),onClick:a[0]||(a[0]=s=>r.value=!0)},{default:t(()=>a[3]||(a[3]=[h(" Agregar ")])),_:1},8,["render-icon"])]),_:1}),e(ve,null,{extra:t(({reLoadDataTable:s})=>[e(W,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value=o),item:null,onSuccess:s},null,8,["modelValue","onSuccess"])]),_:1})],64)}}});export{Re as default};
