import{d as z,a3 as D,a6 as P,r as u,j as I,a8 as L,aG as x,a9 as m,ae as i,aa as s,ac as n,ad as b,ab as a,aA as r,ag as R,af as p,aB as q,_ as $,aU as G,ah as S}from"./index-CTX32WvQ.js";import{d as H}from"./debounce.utils-DqPPCsFD.js";import{_ as J}from"./StudentForm.vue_vue_type_script_setup_true_lang-BZBiHr_z.js";import{c as K}from"./student.services-vX8kgAv1.js";import{c as O}from"./studentType.services-telVY5M7.js";import{c as Q}from"./documentType.services-mG1tuhon.js";import{_ as W}from"./Divider-DufV4_kY.js";import{_ as X,a as Y}from"./ListItem-D5_apZVG.js";import{_ as Z}from"./Thing-BJQyNM1u.js";import{_ as ee,a as te}from"./Col-BZe6vIUY.js";import{_ as ae}from"./Input-BFgcVtgn.js";import{_ as ne}from"./Tag-vB_kF6B0.js";import{_ as oe}from"./Space-Cg-Z5G16.js";import"./genders.constans-BK559Fh_.js";import"./useBreakpoints-D9msJ4X0.js";import"./Select-DwwM8esp.js";import"./Popover-D4J2dXPN.js";import"./get-B5VZIcfe.js";import"./use-merged-state-xCl8VPUK.js";import"./Suffix-CZHvrjpx.js";import"./FormItem-TvXBxsfn.js";import"./Switch-CA1UdJhI.js";import"./DataTable.types-BEg5m_To.js";const le={style:{"text-align":"end"}},se={style:{padding:"0 1rem",color:"#999","font-size":"0.8rem"}},re={class:"pt-3 text-end"},Be=z({__name:"EnrollmentView",setup(ue){const{hasPermission:c}=D(),k=P(),v=u(!1),f=u({}),o=u({code:"",documentNumber:"",name:"",lastNameFather:"",lastNameMother:""}),y=u([]),g=u(!0),h=u(!1),w=l=>{o.value.documentNumber=l.documentNumber,o.value.name=l.name,o.value.lastNameFather=l.lastNameFather,o.value.lastNameMother=l.lastNameMother};return I(o.value,H(async l=>{h.value=!0,y.value=await K(l),h.value=!1},500)),(async()=>{g.value=!0,f.value.studentTypesItems=await O(),f.value.documentTypesItems=await Q(),g.value=!1})(),(l,e)=>{const N=R,M=W,_=ae,d=te,V=ee,C=q,T=ne,F=Z,A=oe,B=X,E=Y,U=L("AppNotAuthorization");return i(c)(["enrollment.create","enrollment.create-special","enrollment.edit","enrollment.print-record"])?(s(),x($,{key:0},[n(C,{segmented:{header:!0,footer:!0,content:!0}},{header:a(()=>e[6]||(e[6]=[p("h6",{class:"text-sm text-gray-500"},"Matrícula",-1),r(" Matrícula de Estudiantes ")])),"header-extra":a(()=>[n(N,{type:"primary",onClick:e[0]||(e[0]=t=>v.value=!0)},{default:a(()=>e[7]||(e[7]=[r(" Nuevo Estudiante ")])),_:1})]),action:a(()=>[n(M,{"title-placement":"left",style:{margin:"0 0 1rem 0"}},{default:a(()=>e[8]||(e[8]=[r(" Buscar estudiante ")])),_:1}),n(V,{gutter:"16"},{default:a(()=>[n(d,{span:"5"},{default:a(()=>[n(_,{type:"text",value:o.value.documentNumber,"onUpdate:value":e[1]||(e[1]=t=>o.value.documentNumber=t),placeholder:"N° de Documento"},null,8,["value"])]),_:1}),n(d,{span:"7"},{default:a(()=>[n(_,{type:"text",value:o.value.name,"onUpdate:value":e[2]||(e[2]=t=>o.value.name=t),placeholder:"Nombre"},null,8,["value"])]),_:1}),n(d,{span:"6"},{default:a(()=>[n(_,{type:"text",value:o.value.lastNameFather,"onUpdate:value":e[3]||(e[3]=t=>o.value.lastNameFather=t),placeholder:"Apellido Paterno"},null,8,["value"])]),_:1}),n(d,{span:"6"},{default:a(()=>[n(_,{type:"text",value:o.value.lastNameMother,"onUpdate:value":e[4]||(e[4]=t=>o.value.lastNameMother=t),placeholder:"Apellido Materno"},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(E,{hoverable:"",clickable:""},{header:a(()=>[p("div",le,[p("i",se,[e[9]||(e[9]=r(" Se muestran los 10 mejores resultados de la busqueda | ")),p("strong",null," Total de resultados: "+S(y.value.length),1)])])]),default:a(()=>[(s(!0),x($,null,G(y.value,t=>(s(),m(B,{style:{margin:"0 1rem"},key:t.id},{default:a(()=>[n(F,{title:`${t.name} ${t.lastName}`,description:`${t.documentType?t.documentType:"-"}    ${t.documentNumber?t.documentNumber:"-"}`},{default:a(()=>[n(T,{bordered:!1},{default:a(()=>[r(S(t.studentType),1)]),_:2},1024)]),_:2},1032,["title","description"]),p("div",re,[n(A,{align:"center",justify:"end"},{default:a(()=>[i(c)(["enrollment.create"])?(s(),m(N,{key:0,secondary:"",type:"primary",class:"ms-2",onClick:j=>i(k).push({name:"EnrollmentStudent",params:{id:t.id}})},{default:a(()=>e[10]||(e[10]=[r(" Matricular ")])),_:2},1032,["onClick"])):b("",!0),i(c)(["enrollment.create-special"])?(s(),m(N,{key:1,strong:"",secondary:"",onClick:j=>i(k).push({name:"EnrollmentSpecialStudent",params:{id:t.id}})},{default:a(()=>e[11]||(e[11]=[r(" Matriculas Especiales ")])),_:2},1032,["onClick"])):b("",!0)]),_:2},1024)])]),_:2},1024))),128))]),_:1}),g.value?b("",!0):(s(),m(J,{key:0,modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value=t),item:null,selectables:f.value,onSuccess:w},null,8,["modelValue","selectables"]))],64)):(s(),m(U,{key:1}))}}});export{Be as default};
