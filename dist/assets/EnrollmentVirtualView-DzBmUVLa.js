import{b as B,_ as D,h as M}from"./EditEnrollmentGroup.vue_vue_type_script_setup_true_lang-D4iCyvFi.js";import{i as S}from"./DataTable.types-B90ErchY.js";import"./index-ChN7EhXt.js";import"./studentType.services-q01b_W02.js";import"./documentType.services-BaW62wpr.js";import{u as F}from"./period.stores-C9HnWHFY.js";import{d as x,aI as N,ac as v,aa as b,a5 as R,ae as U,h as O,r as i,ak as L,al as w,ad as z,ab as o,a8 as m,ag as q,am as j,_ as V,ah as A,ai as H}from"./index-BOXL2TiF.js";import{d as J}from"./debounce.utils-DqPPCsFD.js";import{_ as K,a as Q}from"./Col-BTffZrwQ.js";import{_ as X}from"./Input-C8gwYOc9.js";import{_ as Y}from"./DataTable-D2zYKQJM.js";import"./icon.utils-BQfYQcDe.js";import"./Alert-CDPhDIy8.js";import"./FormItem-C4wDlZap.js";import"./get-DOtZouVG.js";import"./Select-Biy6SjtC.js";import"./ListItem-Ck5o9BKw.js";import"./Space-CbJKgSxe.js";import"./Thing-D15ay3LM.js";import"./composables-DOSSxa7-.js";import"./Dropdown-d17eZhwV.js";import"./Tooltip-BHYxHC_t.js";const Z=x({__name:"DataTableOp",props:{item:{}},emits:["openForm","success"],setup(l,{emit:u}){const a=u,t=F(),n=async()=>{};return N(()=>{n()}),(s,e)=>{var d;return((d=v(t).enrollment)==null?void 0:d.name)==s.item.period?(b(),R(B,{key:0,item:s.item,onResetEnrollment:e[0]||(e[0]=p=>a("openForm",p)),onChangeGroup:e[1]||(e[1]=p=>a("openForm",p)),onReserveEnrollment:e[2]||(e[2]=p=>a("success")),onCancelEnrollment:e[3]||(e[3]=p=>a("success"))},null,8,["item"])):U("",!0)}}}),ee=(l,u)=>[{title:"Ops.",key:"ops",width:"80px",fixed:"left",render(a){const t=a;return O(Z,{onOpenForm:()=>l(t),onSuccess:()=>u(),item:t},{default:()=>"Editar"})}},{title:"Estado de matrícula",key:"enrollmentStatus",minWidth:"150px"},{title:"Estudiante",key:"student",minWidth:"300px"},{title:"Módulo",key:"module",minWidth:"200px"},{title:"Curso",key:"course",minWidth:"200px"},{title:"Grupo",key:"group",minWidth:"100px"},{title:"Modalidad",key:"modality",minWidth:"100px"},{title:"Laboratorio",key:"laboratory",minWidth:"150px"},{title:"Período",key:"period",minWidth:"100"}],te=(l=S())=>({page:l.page,total:l.total,pageSize:l.pageSize,pageCount:l.pageCount,showSizePicker:!0,pageSizes:[10,50,100,500,1e3,5e3],style:{paddingRight:"16px",paddingBottom:"12px"},prefix(){return`Total ${l.total} registros`}}),ae={style:{"border-bottom":"1px solid #e9e9e9"}},ne=x({__name:"DataTable",setup(l){const u=i(!1),a=i(!1),t=i([]),n=L({...S()}),s=i({search:null,page:n.page,pageSize:n.pageSize}),e=i({}),d=i(null),p=i(null),h=i(null),k=i(null),C=r=>{d.value=r.courseId,h.value=r.studentId,k.value=r.curriculumId,p.value=r,u.value=!0},c=async()=>{s.value.page=1,await _()},$=ee(C,c),_=async()=>{a.value=!0,e.value=await M(s.value),t.value=e.value.data,n.total=e.value.total,n.pageSize=e.value.per_page,n.page=e.value.current_page,n.pageCount=e.value.last_page,a.value=!1},E=J(()=>{c()},400),T=async r=>{s.value.page=r,await _()},W=async r=>{s.value.page=1,s.value.pageSize=r,await _()};return(async()=>{await _()})(),(r,g)=>{const f=K,G=X,I=Q,P=Y;return b(),w(V,null,[z("div",ae,[o(I,{gutter:12,style:{padding:"12px 16px"}},{default:m(()=>[o(f,{span:12}),o(f,{span:12},{default:m(()=>[o(G,{size:"large",placeholder:"Buscar",value:s.value.search,"onUpdate:value":g[0]||(g[0]=y=>s.value.search=y),onInput:v(E),clearable:""},{suffix:m(()=>[o(q,{"icon-name":"search-normal-1",size:"20"})]),_:1},8,["value","onInput"])]),_:1})]),_:1}),o(I,null,{default:m(()=>[o(f,{span:24},{default:m(()=>[o(P,{key:"id",remote:"","single-line":!1,columns:v($),data:t.value,pagination:v(te)(n),"pagination-show-size-picker":!0,loading:a.value,"onUpdate:page":T,"onUpdate:pageSize":W},null,8,["columns","data","pagination","loading"])]),_:1})]),_:1}),j(r.$slots,"extra",{reLoadDataTable:c})]),o(D,{modelValue:u.value,"onUpdate:modelValue":g[1]||(g[1]=y=>u.value=y),studentId:h.value,curriculumId:k.value,courseId:d.value,enrollmetGroup:p.value,onSuccess:c},null,8,["modelValue","studentId","curriculumId","courseId","enrollmetGroup"])],64)}}}),Ve=x({__name:"EnrollmentVirtualView",setup(l){return(async()=>{})(),(a,t)=>{const n=H;return b(),w(V,null,[o(n,{segmented:{header:!0,content:!0}},{header:m(()=>t[0]||(t[0]=[z("h6",{style:{color:"#999",margin:"0"}}," Gestión matrícula virtual ",-1),A(" Matrícula virtual ")])),"header-extra":m(()=>t[1]||(t[1]=[])),_:1}),o(ne)],64)}}});export{Ve as default};
